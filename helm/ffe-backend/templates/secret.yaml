apiVersion: v1
kind: Secret
metadata:
  name: {{ include "ffe-backend.fullname" . }}-db
  labels:
    {{- include "ffe-backend.labels" . | nindent 4 }}
type: Opaque
data:
  # Database URL - MUST be set via:
  # 1. --set database.url="postgresql+psycopg2://..." OR
  # 2. Vault Secret injection (recommended) OR
  # 3. External secret operator
  url: {{ .Values.database.url | b64enc }}

---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "ffe-backend.fullname" . }}-secrets
  labels:
    {{- include "ffe-backend.labels" . | nindent 4 }}
type: Opaque
stringData:
  # API Keys and Secrets - SHOULD come from Vault or External Secret Operator
  # DO NOT hardcode sensitive values
  {{- if .Values.secrets.data }}
  {{- toYaml .Values.secrets.data | nindent 2 }}
  {{- end }}
