# ============================================================
# Finance Feedback Engine 2.0 - TEST/CI Environment
# ============================================================
# This file is used for automated testing in CI/CD pipelines
# Uses mock services and sandbox APIs for safe testing
# ============================================================

# ============================================================
# ENVIRONMENT
# ============================================================
ENVIRONMENT="test"

# ============================================================
# ALPHA VANTAGE API
# ============================================================
# Use demo key for testing (limited but functional)
ALPHA_VANTAGE_API_KEY="demo"

# ============================================================
# TRADING PLATFORM - TEST (MOCK)
# ============================================================
TRADING_PLATFORM="mock"

# ============================================================
# COINBASE CREDENTIALS - TEST (MOCK)
# ============================================================
COINBASE_API_KEY="test_coinbase_key"
COINBASE_API_SECRET="test_coinbase_secret"
COINBASE_USE_SANDBOX="true"

# ============================================================
# OANDA CREDENTIALS - TEST (MOCK)
# ============================================================
OANDA_API_KEY="test_oanda_token"
OANDA_ACCOUNT_ID="test_oanda_account"
OANDA_ENVIRONMENT="practice"

# ============================================================
# DECISION ENGINE - TEST
# ============================================================
DECISION_ENGINE_AI_PROVIDER="local"
DECISION_ENGINE_MODEL_NAME="llama3.2:3b-instruct-fp16"
DECISION_ENGINE_DECISION_THRESHOLD="0.7"
DECISION_ENGINE_GEMINI_API_KEY=""
DECISION_ENGINE_GEMINI_MODEL_NAME="gemini-pro"

# ============================================================
# ENSEMBLE CONFIGURATION - TEST
# ============================================================
ENSEMBLE_VOTING_STRATEGY="weighted"
ENSEMBLE_PROVIDER_WEIGHT_LLAMA="0.16666667"
ENSEMBLE_PROVIDER_WEIGHT_DEEPSEEK="0.16666667"
ENSEMBLE_PROVIDER_WEIGHT_MISTRAL="0.16666667"
ENSEMBLE_PROVIDER_WEIGHT_QWEN25="0.16666667"
ENSEMBLE_PROVIDER_WEIGHT_GEMMA2="0.16666667"
ENSEMBLE_PROVIDER_WEIGHT_QWEN="0.16666666"

# Debate mode (enabled for comprehensive testing)
ENSEMBLE_DEBATE_MODE="true"
ENSEMBLE_DEBATE_BULL_PROVIDER="local"
ENSEMBLE_DEBATE_BEAR_PROVIDER="local"
ENSEMBLE_DEBATE_JUDGE_PROVIDER="local"

ENSEMBLE_AGREEMENT_THRESHOLD="0.6"
ENSEMBLE_ADAPTIVE_LEARNING="true"
ENSEMBLE_LEARNING_RATE="0.1"

# ============================================================
# TWO-PHASE ENSEMBLE - TEST
# ============================================================
TWO_PHASE_ENABLED="false"  # Disabled for faster tests
TWO_PHASE_PHASE1_MIN_QUORUM="2"
TWO_PHASE_PHASE1_CONFIDENCE_THRESHOLD="0.7"
TWO_PHASE_PHASE1_AGREEMENT_THRESHOLD="0.6"

# ============================================================
# MONITORING - TEST (ENABLED)
# ============================================================
MONITORING_ENABLE_CONTEXT_INTEGRATION="true"
MONITORING_ENABLED="true"
MONITORING_MANUAL_CLI="false"
MONITORING_PULSE_INTERVAL_SECONDS="60"
MONITORING_INCLUDE_SENTIMENT="false"  # Disabled to reduce API calls
MONITORING_INCLUDE_MACRO="false"
MONITORING_ENABLE_LIVE_VIEW="false"

# ============================================================
# LOGGING - TEST (DEBUG)
# ============================================================
LOGGING_LEVEL="INFO"  # INFO level for cleaner test output
LOGGING_STRUCTURED_ENABLED="true"
LOGGING_STRUCTURED_FORMAT="json"
LOGGING_CONSOLE_ENABLED="true"
LOGGING_FILE_ENABLED="false"  # Disabled in CI

# ============================================================
# PERSISTENCE - TEST
# ============================================================
PERSISTENCE_ENABLED="true"
PERSISTENCE_STORAGE_PATH="/app/data/decisions"
PERSISTENCE_MAX_DECISIONS="100"
PERSISTENCE_CLEANUP_DAYS="7"

# ============================================================
# PORTFOLIO MEMORY ENGINE - TEST
# ============================================================
PORTFOLIO_MEMORY_ENABLED="true"
PORTFOLIO_MEMORY_MAX_MEMORY_SIZE="100"
PORTFOLIO_MEMORY_LEARNING_RATE="0.1"
PORTFOLIO_MEMORY_CONTEXT_WINDOW="10"

# ============================================================
# TELEGRAM - TEST (DISABLED)
# ============================================================
TELEGRAM_ENABLED="false"
TELEGRAM_BOT_TOKEN=""
TELEGRAM_CHAT_ID=""
TELEGRAM_NGROK_AUTH_TOKEN=""
TELEGRAM_ALLOWED_USER_IDS=""

# ============================================================
# BACKTESTING - TEST
# ============================================================
BACKTESTING_ENABLED="true"
BACKTESTING_USE_REAL_DATA="false"
BACKTESTING_INITIAL_BALANCE="10000.0"
BACKTESTING_FEE_PERCENTAGE="0.1"

# ============================================================
# SAFETY & EXECUTION CONTROLS - TEST
# ============================================================
SAFETY_MAX_LEVERAGE="2.0"
SAFETY_MAX_POSITION_PCT="20.0"
CIRCUIT_BREAKER_FAILURE_THRESHOLD="3"
CIRCUIT_BREAKER_RECOVERY_TIMEOUT_SECONDS="60"
CIRCUIT_BREAKER_HALF_OPEN_RETRY="1"

# ============================================================
# SIGNAL-ONLY MODE - TEST
# ============================================================
SIGNAL_ONLY_DEFAULT="true"  # Signal-only by default in tests

# ============================================================
# TRADING AGENT - TEST (RESTRICTED)
# ============================================================
AGENT_AUTONOMOUS_EXECUTION="false"
AGENT_APPROVAL_POLICY="manual"
AGENT_MAX_DAILY_TRADES="5"
AGENT_STRATEGIC_GOAL="balanced"
AGENT_RISK_APPETITE="low"
AGENT_AUTONOMOUS_ENABLED="false"
AGENT_CORRELATION_THRESHOLD="0.7"
AGENT_MAX_CORRELATED_ASSETS="2"
AGENT_MAX_VAR_PCT="0.05"
AGENT_VAR_CONFIDENCE="0.95"

# ============================================================
# API AUTHENTICATION - TEST (DISABLED)
# ============================================================
API_AUTH_RATE_LIMIT_MAX="1000"
API_AUTH_RATE_LIMIT_WINDOW="60"

# ============================================================
# API TIMEOUTS - TEST (SHORTER)
# ============================================================
API_TIMEOUT_MARKET_DATA="5"
API_TIMEOUT_SENTIMENT="10"
API_TIMEOUT_MACRO="5"
API_TIMEOUT_PLATFORM_BALANCE="3"
API_TIMEOUT_PLATFORM_PORTFOLIO="5"
API_TIMEOUT_PLATFORM_EXECUTE="10"
API_TIMEOUT_PLATFORM_CONNECTION="2"
API_TIMEOUT_LLM_QUERY="30"
API_TIMEOUT_LLM_DEBATE="60"
API_TIMEOUT_LLM_CONNECTION="3"
API_TIMEOUT_TELEGRAM_WEBHOOK="3"
API_TIMEOUT_REDIS_OPERATIONS="1"

# ============================================================
# ERROR TRACKING - TEST (DISABLED)
# ============================================================
ERROR_TRACKING_ENABLED="false"
ERROR_TRACKING_BACKEND="logging"
SENTRY_DSN=""
SENTRY_TRACES_SAMPLE_RATE="0"

# ============================================================
# OBSERVABILITY - TEST
# ============================================================
TRACING_ENABLED="false"  # Disabled for faster tests
OBSERVABILITY_ENABLED="false"
OBSERVABILITY_BACKEND="console"
OBSERVABILITY_EXPORT_PROMETHEUS="false"

# ============================================================
# DEPLOYMENT PORTS - TEST
# ============================================================
BACKEND_PORT="8000"
FRONTEND_PORT="80"
PROMETHEUS_PORT="9090"
GRAFANA_PORT="3001"
REDIS_PORT="6379"
OLLAMA_PORT="11434"

# ============================================================
# GRAFANA - TEST
# ============================================================
GRAFANA_ADMIN_USER="admin"
GRAFANA_ADMIN_PASSWORD="test_password"

# ============================================================
# TESTING FLAGS
# ============================================================
PAPER_TRADING_MODE="true"
