============================= test session starts ==============================
platform linux -- Python 3.13.11, pytest-9.0.1, pluggy-1.6.0 -- /home/cmp6510/finance_feedback_engine-2.0/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/cmp6510/finance_feedback_engine-2.0
configfile: pytest.ini
plugins: anyio-4.12.0, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1050 items

finance_feedback_engine/agent/test_config.py::test_trading_agent_config_defaults PASSED [  0%]
finance_feedback_engine/agent/test_config.py::test_percentage_field_normalization_above_one PASSED [  0%]
finance_feedback_engine/agent/test_config.py::test_percentage_field_normalization_at_or_below_one PASSED [  0%]
finance_feedback_engine/agent/test_config.py::test_model_validator_normalizes_default_min_confidence PASSED [  0%]
finance_feedback_engine/agent/test_config.py::test_bounded_field_validation PASSED [  0%]
test_asset_type_normalization.py::test_asset_type_normalization PASSED   [  0%]
test_atomic_writes.py::test_concurrent_writes PASSED                     [  0%]
test_atomic_writes.py::test_atomic_write_function PASSED                 [  0%]
test_ensemble_kelly_implementation.py::test_kelly_criterion PASSED       [  0%]
test_ensemble_kelly_implementation.py::test_voting_strategies PASSED     [  0%]
test_ensemble_kelly_implementation.py::test_ensemble_manager PASSED      [  1%]
test_rate_limiter.py::test_rate_limiter_always_active PASSED             [  1%]
test_short_positions.py::test_short_position PASSED                      [  1%]
test_stale_data_fix.py::test_validation_with_market_status PASSED        [  1%]
test_stale_data_fix.py::test_multi_timeframe_data PASSED                 [  1%]
test_stale_data_fix.py::test_historical_data_format_fix PASSED           [  1%]
test_telegram_live.py::test_telegram_approval PASSED                     [  1%]
tests/cli/test_agent_signal_only_validation.py::TestSignalOnlyModeValidation::test_supports_signal_only_mode_returns_true_when_methods_exist PASSED [  1%]
tests/cli/test_agent_signal_only_validation.py::TestSignalOnlyModeValidation::test_initialize_agent_validates_notification_channels_in_signal_mode PASSED [  1%]
tests/cli/test_agent_signal_only_validation.py::TestSignalOnlyModeValidation::test_initialize_agent_succeeds_with_telegram_configured PASSED [  1%]
tests/cli/test_agent_signal_only_validation.py::TestSignalOnlyModeValidation::test_agent_rejects_signal_mode_if_not_supported PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_initialization PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_initialization_with_start_index PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_initialization_empty_data PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_initialization_missing_columns PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_advance PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_advance_at_end PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_reset PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_reset_invalid_index PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_has_more_data PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_index PASSED [  2%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_progress PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_price PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_price_with_asset_pair PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_candle PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_candle_minimal PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_current_candle_out_of_bounds PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_comprehensive_market_data PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_comprehensive_market_data_with_sentiment PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_comprehensive_market_data_with_macro PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_comprehensive_data_matches_alpha_vantage_format PASSED [  3%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_market_data_sync PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_peek_ahead PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_peek_ahead_out_of_bounds PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_historical_window PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_historical_window_exclude_current PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_historical_window_from_start PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_repr PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_len PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_streaming_simulation PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_backtest_scenario PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_reset_and_replay PASSED [  4%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_multiple_asset_pairs PASSED [  5%]
tests/data_providers/test_mock_live_provider.py::TestMockLiveProvider::test_get_pulse_step_all_supported_timeframes PASSED [  5%]
tests/integration/test_basic_integration.py::test_basic_integration PASSED [  5%]
tests/integration/test_pipeline_integration.py::TestPipelineIntegration::test_end_to_end_backfill FAILED [  5%]
tests/integration/test_pipeline_integration.py::TestPipelineIntegration::test_delta_lake_time_travel SKIPPED [  5%]
tests/integration/test_pipeline_integration.py::TestPipelineIntegration::test_watermark_persistence PASSED [  5%]
tests/integration/test_pipeline_integration.py::TestBatchIngestionIntegration::test_ingestion_with_multiple_timeframes FAILED [  5%]
tests/monitoring/test_logging_config.py::TestCorrelationID::test_get_correlation_id_generates_uuid PASSED [  5%]
tests/monitoring/test_logging_config.py::TestCorrelationID::test_set_correlation_id PASSED [  5%]
tests/monitoring/test_logging_config.py::TestCorrelationID::test_correlation_id_thread_local PASSED [  5%]
tests/monitoring/test_logging_config.py::TestCorrelationID::test_correlation_context_manager PASSED [  6%]
tests/monitoring/test_logging_config.py::TestCorrelationID::test_correlation_context_with_custom_id PASSED [  6%]
tests/monitoring/test_logging_config.py::TestCorrelationIDFilter::test_filter_adds_correlation_id PASSED [  6%]
tests/monitoring/test_logging_config.py::TestCorrelationIDFilter::test_filter_preserves_existing_correlation_id PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_redact_api_key PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_redact_token PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_redact_password PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_redact_email PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_redact_account_id PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_filter_redacts_log_message PASSED [  6%]
tests/monitoring/test_logging_config.py::TestPIIRedactionFilter::test_custom_pii_patterns PASSED [  6%]
tests/monitoring/test_logging_config.py::TestStructuredJSONFormatter::test_format_basic_log PASSED [  7%]
tests/monitoring/test_logging_config.py::TestStructuredJSONFormatter::test_format_with_extra_context PASSED [  7%]
tests/monitoring/test_logging_config.py::TestStructuredJSONFormatter::test_format_with_exception PASSED [  7%]
tests/monitoring/test_logging_config.py::TestRotatingFileHandlerWithRetention::test_create_handler PASSED [  7%]
tests/monitoring/test_logging_config.py::TestRotatingFileHandlerWithRetention::test_rotation_creates_backup PASSED [  7%]
tests/monitoring/test_logging_config.py::TestSetupStructuredLogging::test_setup_with_defaults PASSED [  7%]
tests/monitoring/test_logging_config.py::TestSetupStructuredLogging::test_setup_with_verbose_flag PASSED [  7%]
tests/monitoring/test_logging_config.py::TestSetupStructuredLogging::test_setup_with_file_logging PASSED [  7%]
tests/monitoring/test_logging_config.py::TestIntegration::test_end_to_end_logging_with_correlation PASSED [  7%]
tests/monitoring/test_logging_config.py::TestIntegration::test_pii_redaction_integration PASSED [  7%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_capture_stdout PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_capture_stderr PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_capture_both_streams PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_capture_non_zero_return_code PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_capture_with_correlation_id PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_streaming_callback PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_context_manager_cleanup PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_large_output_handling PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_timeout_handling PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_invalid_command PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestProcessOutputCapture::test_thread_safety PASSED [  8%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_initialization PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_context_manager PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_with_correlation_id PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_logs_start_end PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_captures_duration PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_state_transition PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_llm_call PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_llm_call_with_extra_context PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_decision SKIPPED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_with_exception PASSED [  9%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_multiple_cycles PASSED [ 10%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_nested_contexts PASSED [ 10%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_with_custom_logger PASSED [ 10%]
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_performance_metrics PASSED [ 10%]
tests/monitoring/test_process_monitor.py::TestIntegration::test_full_workflow_monitoring PASSED [ 10%]
tests/monitoring/test_process_monitor.py::TestIntegration::test_capture_with_structured_logging PASSED [ 10%]
tests/risk/test_gatekeeper_backtest_timestamp.py::test_backtest_mode_raises_on_invalid_timestamp PASSED [ 10%]
tests/risk/test_gatekeeper_backtest_timestamp.py::test_live_mode_falls_back_on_invalid_timestamp PASSED [ 10%]
tests/risk/test_gatekeeper_backtest_timestamp.py::test_backtest_mode_accepts_valid_iso_timestamp PASSED [ 10%]
tests/risk/test_gatekeeper_backtest_timestamp.py::test_backtest_mode_accepts_valid_unix_timestamp PASSED [ 10%]
tests/risk/test_gatekeeper_data_freshness.py::test_rejects_trade_with_stale_crypto_data PASSED [ 10%]
tests/risk/test_gatekeeper_data_freshness.py::test_allows_fresh_crypto_data PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_rejects_trade_with_stale_stock_intraday_data PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_allows_old_stock_daily_data PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_handles_missing_timestamp_gracefully PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_rejects_invalid_timestamp_format PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_data_freshness_checked_before_other_validations PASSED [ 11%]
tests/risk/test_gatekeeper_data_freshness.py::test_defaults_to_intraday_for_stocks_without_timeframe PASSED [ 11%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_allows_forex_even_on_weekend_window PASSED [ 11%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_rejects_stock_when_market_closed_outside_hours PASSED [ 11%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_rejects_stock_on_weekend PASSED [ 11%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_allows_forex_during_london_session PASSED [ 12%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_allows_stock_during_trading_hours PASSED [ 12%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_allows_crypto_24_7_weekday PASSED [ 12%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_allows_crypto_weekend_with_warning_logged PASSED [ 12%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_market_check_is_first_validation PASSED [ 12%]
tests/risk/test_gatekeeper_market_schedule.py::TestGatekeeperMarketSchedule::test_defaults_to_live_market_status_without_timestamp PASSED [ 12%]
tests/test_agent.py::test_agent_state_transitions PASSED                 [ 12%]
tests/test_agent.py::test_run_agent_command PASSED                       [ 12%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_min_confidence_threshold_percentage_input PASSED [ 12%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_min_confidence_threshold_decimal_input PASSED [ 12%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_min_confidence_threshold_default_value PASSED [ 12%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_min_confidence_threshold_float_percentage PASSED [ 13%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_other_percentage_fields_normalization PASSED [ 13%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_edge_case_exactly_one PASSED [ 13%]
tests/test_agent_config.py::TestPercentageFieldNormalization::test_edge_case_just_above_one PASSED [ 13%]
tests/test_agent_config.py::TestMinConfidenceThresholdBackwardCompatibility::test_legacy_decimal_notation_still_works PASSED [ 13%]
tests/test_agent_config.py::TestMinConfidenceThresholdBackwardCompatibility::test_new_percentage_notation PASSED [ 13%]
tests/test_agent_config.py::TestMinConfidenceThresholdBackwardCompatibility::test_comparison_with_decision_confidence PASSED [ 13%]
tests/test_agent_config.py::TestConfigValidation::test_correlation_threshold_bounds PASSED [ 13%]
tests/test_agent_config.py::TestConfigValidation::test_var_confidence_bounds PASSED [ 13%]
tests/test_agent_config.py::TestConfigValidation::test_max_correlated_assets_bounds PASSED [ 13%]
tests/test_agent_config.py::TestConfigSerialization::test_config_to_dict PASSED [ 14%]
tests/test_agent_config.py::TestConfigSerialization::test_config_from_dict PASSED [ 14%]
tests/test_agent_config.py::TestMinConfidenceThresholdIntegration::test_confidence_comparison_logic PASSED [ 14%]
tests/test_agent_config.py::TestMinConfidenceThresholdIntegration::test_backward_compatible_decimal_config PASSED [ 14%]
tests/test_agent_config.py::TestMinConfidenceThresholdIntegration::test_yaml_config_percentage_input PASSED [ 14%]
tests/test_agent_kill_switch_scenarios.py::TestKillSwitchProtection::test_stop_loss_trigger PASSED [ 14%]
tests/test_agent_kill_switch_scenarios.py::TestKillSwitchProtection::test_no_kill_switch_within_limits PASSED [ 14%]
tests/test_agent_kill_switch_scenarios.py::TestDailyTradeLimit::test_max_trades_limit_enforced PASSED [ 14%]
tests/test_agent_kill_switch_scenarios.py::TestDailyTradeLimit::test_trade_allowed_below_limit PASSED [ 14%]
tests/test_agent_kill_switch_scenarios.py::TestDailyTradeLimit::test_reasoning_state_skips_trade_when_limit_reached PASSED [ 14%]
tests/test_api.py::test_engine_initialization PASSED                     [ 14%]
tests/test_api.py::test_analyze_asset PASSED                             [ 15%]
tests/test_api.py::test_get_balance PASSED                               [ 15%]
tests/test_api.py::test_get_decision_history PASSED                      [ 15%]
tests/test_api_client_base.py::TestAPIClientBaseImport::test_module_structure PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientBaseImport::test_retry_decorator_available PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientBaseImport::test_exception_types_available PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientConcepts::test_retry_logic_concept PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientConcepts::test_rate_limiting_concept PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientConcepts::test_timeout_concept PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientConcepts::test_async_get_request PASSED [ 15%]
tests/test_api_client_base.py::TestAPIClientConcepts::test_async_post_request PASSED [ 16%]
tests/test_api_client_base.py::TestRetryLogic::test_retry_on_failure SKIPPED [ 16%]
tests/test_api_client_base.py::TestRetryLogic::test_exponential_backoff_concept SKIPPED [ 16%]
tests/test_api_client_base.py::TestAuthentication::test_api_key_header PASSED [ 16%]
tests/test_api_client_base.py::TestAuthentication::test_bearer_token SKIPPED [ 16%]
tests/test_api_client_base.py::TestConnectionManagement::test_connection_pooling_concept PASSED [ 16%]
tests/test_api_client_base.py::TestConnectionManagement::test_close_connection_concept PASSED [ 16%]
tests/test_api_client_base.py::TestRequestValidation::test_validate_url_concept PASSED [ 16%]
tests/test_api_client_base.py::TestRequestValidation::test_validate_params_concept PASSED [ 16%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_returns_200 PASSED [ 16%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_json_structure PASSED [ 16%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_status_healthy PASSED [ 17%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_uptime_positive PASSED [ 17%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_circuit_breaker_state PASSED [ 17%]
tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_portfolio_balance PASSED [ 17%]
tests/test_api_endpoints.py::TestMetricsEndpoint::test_metrics_returns_200 PASSED [ 17%]
tests/test_api_endpoints.py::TestMetricsEndpoint::test_metrics_returns_prometheus_format PASSED [ 17%]
tests/test_api_endpoints.py::TestMetricsEndpoint::test_metrics_stubbed_structure PASSED [ 17%]
tests/test_api_endpoints.py::TestRootEndpoint::test_root_returns_200 PASSED [ 17%]
tests/test_api_endpoints.py::TestRootEndpoint::test_root_api_info PASSED [ 17%]
tests/test_api_endpoints.py::TestTelegramWebhook::test_telegram_webhook_post_endpoint_exists PASSED [ 17%]
tests/test_api_endpoints.py::TestTelegramWebhook::test_telegram_webhook_returns_503_when_bot_disabled PASSED [ 18%]
tests/test_api_endpoints.py::TestDecisionsEndpoints::test_decisions_endpoint_structure PASSED [ 18%]
tests/test_api_endpoints.py::TestStatusEndpoint::test_status_endpoint_exists PASSED [ 18%]
tests/test_api_endpoints.py::TestCORSMiddleware::test_cors_headers_present PASSED [ 18%]
tests/test_api_endpoints.py::TestCORSMiddleware::test_localhost_origin_allowed PASSED [ 18%]
tests/test_api_endpoints.py::TestLifespanManagement::test_engine_initialized_on_startup PASSED [ 18%]
tests/test_api_endpoints.py::TestLifespanManagement::test_app_state_cleared_on_shutdown PASSED [ 18%]
tests/test_api_endpoints.py::TestErrorHandling::test_health_check_handles_engine_errors PASSED [ 18%]
tests/test_api_endpoints.py::TestErrorHandling::test_invalid_endpoint_returns_404 PASSED [ 18%]
tests/test_api_endpoints.py::TestDependencyInjection::test_get_engine_returns_engine PASSED [ 18%]
tests/test_api_endpoints.py::TestDependencyInjection::test_endpoints_require_engine PASSED [ 18%]
tests/test_asset_classifier.py::TestAssetClassifier::test_forex_classification_with_underscore PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_forex_classification_without_separator PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_crypto_classification PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_crypto_classification_with_separators PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_unknown_classification PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_empty_string PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_case_insensitive PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_custom_forex_currencies PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_custom_crypto_symbols PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_convenience_function PASSED [ 19%]
tests/test_asset_classifier.py::TestAssetClassifier::test_extended_forex_currencies PASSED [ 20%]
tests/test_asset_classifier.py::TestAssetClassifier::test_extended_crypto_symbols PASSED [ 20%]
tests/test_asset_classifier.py::TestAssetClassifier::test_crypto_takes_precedence PASSED [ 20%]
tests/test_asset_pair_validation.py::test_uppercase_conversion PASSED    [ 20%]
tests/test_asset_pair_validation.py::test_separator_removal PASSED       [ 20%]
tests/test_asset_pair_validation.py::test_combined_transformations PASSED [ 20%]
tests/test_asset_pair_validation.py::test_already_standardized PASSED    [ 20%]
tests/test_asset_pair_validation.py::test_error_cases PASSED             [ 20%]
tests/test_asset_pair_validation.py::test_forex_pairs PASSED             [ 20%]
tests/test_asset_pair_validation.py::test_crypto_pairs PASSED            [ 20%]
tests/test_asset_pair_validation_enhanced.py::test_standardize_asset_pair PASSED [ 20%]
tests/test_asset_pair_validation_enhanced.py::test_invalid_standardize_asset_pair PASSED [ 21%]
tests/test_asset_pair_validation_enhanced.py::test_validate_asset_pair_format PASSED [ 21%]
tests/test_asset_pair_validation_enhanced.py::test_validate_asset_pair_composition PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_canonical_crypto_type PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_canonical_forex_type PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_canonical_stock_type PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_variation_cryptocurrency_normalized_to_crypto PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_variation_fx_normalized_to_forex PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_variation_equity_normalized_to_stock PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_unknown_type_defaults_to_crypto PASSED [ 21%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_invalid_type_defaults_to_crypto PASSED [ 22%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_missing_type_defaults_to_crypto PASSED [ 22%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_non_string_type_defaults_to_crypto PASSED [ 22%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_uppercase_type_normalized PASSED [ 22%]
tests/test_asset_type_validation.py::TestAssetTypeValidation::test_whitespace_type_normalized PASSED [ 22%]
tests/test_backtest_gatekeeper.py::test_risk_gatekeeper_blocks_after_drawdown PASSED [ 22%]
tests/test_backtest_gatekeeper.py::test_risk_gatekeeper_allows_within_limit PASSED [ 22%]
tests/test_backtest_mode.py::test_backtest_mode_parameter SKIPPED (T...) [ 22%]
tests/test_backtest_mode.py::test_mock_provider_decisions SKIPPED (T...) [ 22%]
tests/test_backtest_mode.py::test_mock_provider_bear_market SKIPPED      [ 22%]
tests/test_backtest_mode.py::test_mock_provider_ranging_market SKIPPED   [ 22%]
tests/test_backtest_mode.py::test_mock_provider_no_historical_data SKIPPED [ 23%]
tests/test_backtest_mode.py::test_mock_provider_invalid_close_price SKIPPED [ 23%]
tests/test_backtest_mode.py::test_normal_mode_not_affected SKIPPED (...) [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerBasics::test_init_defaults PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerBasics::test_init_custom_params PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerBasics::test_successful_call PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerStateTransitions::test_closed_to_open_after_threshold PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerStateTransitions::test_open_rejects_calls_immediately PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerStateTransitions::test_open_to_half_open_after_timeout PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerStateTransitions::test_half_open_to_closed_on_success PASSED [ 23%]
tests/test_circuit_breaker.py::TestCircuitBreakerStateTransitions::test_half_open_to_open_on_failure PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerMetrics::test_success_count_tracking PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerMetrics::test_failure_count_tracking PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerMetrics::test_mixed_calls_tracking PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerAsync::test_async_successful_call PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerAsync::test_async_failure_opens_circuit PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerAsync::test_async_open_rejects_calls PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_zero_failure_threshold PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_very_short_timeout PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerEdgeCases::test_custom_exception_type PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerIntegration::test_multiple_circuits_independent PASSED [ 24%]
tests/test_circuit_breaker.py::TestCircuitBreakerIntegration::test_recovery_workflow PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveCommandLoading::test_approve_loads_decision_file PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveCommandLoading::test_approve_invalid_decision_id PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveYesFlow::test_approve_yes_executes_trade PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveYesFlow::test_approve_yes_saves_approval PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveNoFlow::test_approve_no_skips_execution PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveNoFlow::test_approve_no_saves_rejection PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveModifyFlow::test_approve_modify_position_size PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveModifyFlow::test_approve_modify_validates_inputs PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApproveModifyFlow::test_approve_modify_rejects_invalid_ranges PASSED [ 25%]
tests/test_cli_approval_flows.py::TestApprovalPersistence::test_approval_file_format SKIPPED [ 26%]
tests/test_cli_approval_flows.py::TestApprovalPersistence::test_approval_timestamp_recorded SKIPPED [ 26%]
tests/test_cli_approval_flows.py::TestRichUIDisplay::test_displays_decision_details PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_asset_pairs_override_parsing PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_asset_pairs_override_various_formats PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_asset_pairs_override_with_spaces PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_asset_pairs_override_empty_entries PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_initialize_agent_with_override PASSED [ 26%]
tests/test_cli_asset_pairs_override.py::test_initialize_agent_without_override PASSED [ 26%]
tests/test_cli_commands.py::test_analyze_command_success FAILED          [ 26%]
tests/test_cli_commands.py::test_analyze_command_invalid_symbol PASSED   [ 26%]
tests/test_cli_commands.py::test_analyze_command_network_failure FAILED  [ 27%]
tests/test_cli_commands_comprehensive.py::test_analyze_command_default_and_with_provider PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_backtest_command_valid_and_invalid_dates PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_dashboard_command_with_mocked_aggregator_and_display PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_approve_command_yes_and_no PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_balance_command PASSED    [ 27%]
tests/test_cli_commands_comprehensive.py::test_history_command_basic PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_execute_with_id_calls_engine PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_execute_interactive_selection PASSED [ 27%]
tests/test_cli_commands_comprehensive.py::test_status_command_ok PASSED  [ 27%]
tests/test_cli_commands_comprehensive.py::test_wipe_decisions_when_none PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_wipe_decisions_confirmed PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_monitor_commands_basic_and_metrics PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_portfolio_backtest_command PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_walk_forward_command PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_monte_carlo_command PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_learning_report_command PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_prune_memory_command_no_confirm PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_prune_memory_command_with_pruning PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_retrain_meta_learner_no_history PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_retrain_meta_learner_force PASSED [ 28%]
tests/test_cli_commands_comprehensive.py::test_run_agent_command PASSED  [ 29%]
tests/test_cli_commands_comprehensive.py::test_install_deps_command PASSED [ 29%]
tests/test_cli_commands_comprehensive.py::test_update_ai_command PASSED  [ 29%]
tests/test_cli_commands_comprehensive.py::test_config_editor_command PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_analyze_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_balance_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_backtest_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_dashboard_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_execute_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_history_command_smoke PASSED [ 29%]
tests/test_cli_smoke.py::TestCLISmoke::test_status_command_smoke PASSED  [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_positions_command_smoke PASSED [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_walk_forward_command_smoke PASSED [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_monte_carlo_command_smoke PASSED [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_portfolio_backtest_command_smoke PASSED [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_run_agent_command_smoke SKIPPED [ 30%]
tests/test_cli_smoke.py::TestCLISmoke::test_monitor_command_smoke SKIPPED [ 30%]
tests/test_cli_smoke.py::TestCLISubCommands::test_monitor_status_command_smoke PASSED [ 30%]
tests/test_cli_smoke.py::TestCLISubCommands::test_monitor_metrics_command_smoke PASSED [ 30%]
tests/test_coinbase_platform.py::test_get_portfolio_breakdown_total_value PASSED [ 30%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_autonomous_enabled_telegram_disabled PASSED [ 30%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_autonomous_disabled_telegram_enabled PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_both_enabled PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_neither_enabled_validation_fails PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_telegram_enabled_but_incomplete PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_validation_error_message_clarity PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorTelegramValidation::test_config_editor_preserves_existing_config PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorPromptFlow::test_telegram_prompt_shows_after_autonomous PASSED [ 31%]
tests/test_config_editor_telegram_validation.py::TestConfigEditorPromptFlow::test_telegram_warning_when_autonomous_disabled PASSED [ 31%]
tests/test_config_validation.py::TestConfigValidator::test_valid_config PASSED [ 31%]
tests/test_config_validation.py::TestConfigValidator::test_exposed_api_key PASSED [ 31%]
tests/test_config_validation.py::TestConfigValidator::test_exposed_private_key PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_missing_required_keys PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_invalid_threshold_value PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_ensemble_weights_validation PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_production_debug_mode PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_production_mock_platform PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_production_sandbox_mode PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_safe_placeholders PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_environment_variables PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_missing_ensemble_config PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_invalid_yaml PASSED [ 32%]
tests/test_config_validation.py::TestConfigValidator::test_nonexistent_file PASSED [ 33%]
tests/test_config_validation.py::TestConfigValidator::test_absolute_storage_path PASSED [ 33%]
tests/test_config_validation.py::TestConfigValidator::test_telegram_token_exposure PASSED [ 33%]
tests/test_config_validation.py::TestConfigValidator::test_empty_config PASSED [ 33%]
tests/test_config_validation.py::TestValidationConvenienceFunctions::test_validate_config_file_function PASSED [ 33%]
tests/test_config_validation.py::TestValidationConvenienceFunctions::test_different_environments PASSED [ 33%]
tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_creates_decision PASSED [ 33%]--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e9ce5950>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dff2a210>, 3237.529947943)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e9ce5450>"
Arguments: ()

tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_signal_only_mode PASSED [ 33%]--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e9ce5950>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dffb7c50>, 3252.323320256)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e9ce5450>"
Arguments: ()

tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_with_ensemble PASSED [ 33%]--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e9ce5950>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 147, in runtestprotocol
    item.funcargs = None  # type: ignore[attr-defined]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dff82690>, 3265.93898487)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e9ce5450>"
Arguments: ()

tests/test_core_integration.py::TestErrorHandling::test_invalid_asset_pair_format PASSED [ 33%]
tests/test_core_integration.py::TestErrorHandling::test_provider_failure_fallback PASSED [ 34%]
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_save_and_load PASSED [ 34%]
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent PASSED [ 34%]
tests/test_core_integration.py::TestMarketRegimeDetection::test_regime_detection_trending PASSED [ 34%]
tests/test_core_integration.py::TestMarketRegimeDetection::test_regime_detection_choppy PASSED [ 34%]
tests/test_core_integration.py::TestPlatformIntegration::test_mock_platform_balance PASSED [ 34%]
tests/test_core_integration.py::TestPlatformIntegration::test_mock_platform_execute_trade PASSED [ 34%]
tests/test_core_integration.py::TestPositionSizing::test_position_sizing_with_balance PASSED [ 34%]
tests/test_core_integration.py::TestPositionSizing::test_position_sizing_signal_only PASSED [ 34%]
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests PASSED [ 34%]
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_recreation_if_closed PASSED [ 34%]
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_lock_prevents_race_conditions PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_crypto_data_rejected PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_force_refresh_still_validates_freshness PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_fresh_data_accepted PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_forex_data_rejected PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_crypto_data_blocked_in_live_mode PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_forex_data_blocked_in_live_mode PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_data_allowed_in_backtest_mode PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_api_failure_triggers_mock_data_check PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestOandaEntryPriceRecovery::test_oanda_position_has_entry_price PASSED [ 35%]
tests/test_critical_fixes_integration.py::TestOandaEntryPriceRecovery::test_entry_price_fallback_to_current_price PASSED [ 36%]
tests/test_critical_fixes_integration.py::TestOandaEntryPriceRecovery::test_unified_platform_preserves_entry_price PASSED [ 36%]
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety PASSED [ 36%]
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_backtest_mode_allows_flexibility PASSED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_initialization PASSED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_get_market_data_success FAILED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_get_market_data_rate_limit PASSED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_circuit_breaker_opens_on_failures --- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e01c6d50>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dfe40470>, 3278.510853829)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e01c6850>"
Arguments: ()
FAILED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_get_comprehensive_market_data FAILED [ 36%]
tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_api_key_required PASSED [ 36%]
tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_initialization FAILED [ 36%]
tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_get_candles FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_get_portfolio FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_error_handling PASSED [ 37%]
tests/test_data_providers_comprehensive.py::TestOandaDataProvider::test_initialization PASSED [ 37%]
tests/test_data_providers_comprehensive.py::TestOandaDataProvider::test_get_candles FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestOandaDataProvider::test_get_account_summary --- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e01c5450>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dfe25310>, 3278.331809987)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e01c47d0>"
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e01c5310>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dffb6390>, 3278.62487461)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e01c6e90>"
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e01c6ad0>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13dff49310>, 3278.786773644)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13e01c6850>"
Arguments: ()
FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_initialization PASSED [ 37%]
tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_market_data_routes_correctly FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_crypto_data_routes_to_coinbase FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_forex_data_routes_to_oanda FAILED [ 37%]
tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_fallback_on_provider_failure FAILED [ 38%]
tests/test_data_providers_comprehensive.py::TestHistoricalDataProvider::test_initialization FAILED [ 38%]
tests/test_data_providers_comprehensive.py::TestHistoricalDataProvider::test_get_historical_data PASSED [ 38%]--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 142, in runtestprotocol
    reports.append(call_and_report(item, "teardown", log, nextitem=nextitem))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 152, in _multicall
    teardown.send(result)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/logging.py", line 860, in pytest_runtest_teardown
    del item.stash[caplog_records_key]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/stash.py", line 108, in __delitem__
    del self._storage[key]
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e01c4b90>'
Arguments: ()

tests/test_decision_engine.py::TestDecisionEngineCore::test_engine_initialization SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineCore::test_calculate_position_size_basic SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineValidation::test_valid_provider_response_accepted SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineValidation::test_fallback_response_triggers_rule_based SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineValidation::test_empty_reasoning_handled_gracefully SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineContextCreation::test_price_change_reflected_in_decision SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineContextCreation::test_volatility_reflected_in_decision SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineContextCreation::test_decision_context_with_various_inputs SKIPPED [ 38%]
tests/test_decision_engine.py::TestDecisionEngineIntegration::test_generate_decision_integration SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineIntegration::test_various_provider_responses[ai_response0-BUY] SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineIntegration::test_various_provider_responses[ai_response1-SELL] SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineIntegration::test_various_provider_responses[ai_response2-HOLD] SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineIntegration::test_decision_with_invalid_confidence SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_ai_provider_raises_exception SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_ai_provider_returns_invalid_action SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_ai_provider_returns_missing_fields SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_data_provider_failure SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_invalid_market_data_missing_fields SKIPPED [ 39%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_invalid_market_data_negative_prices SKIPPED [ 40%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_zero_balance_handling SKIPPED [ 40%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_ai_provider_timeout SKIPPED [ 40%]
tests/test_decision_engine.py::TestDecisionEngineErrorHandling::test_ai_provider_returns_none SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestDecisionEngineInitialization::test_initialization_success SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestDecisionEngineInitialization::test_initialization_with_backtest_mode SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPromptConstruction::test_build_prompt_includes_asset_pair SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPromptConstruction::test_build_prompt_includes_market_data SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPromptConstruction::test_build_prompt_includes_portfolio_context SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPromptConstruction::test_build_prompt_includes_risk_parameters SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPositionSizing::test_position_sizing_formula SKIPPED [ 40%]
tests/test_decision_engine_comprehensive.py::TestPositionSizing::test_position_sizing_respects_risk_percentage SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestPositionSizing::test_position_sizing_with_high_price SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestSizingBehavior::test_minimum_order_size_when_balance_unavailable SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestSizingBehavior::test_sizing_with_valid_balance SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestBacktestMode::test_backtest_mode_buy_signal_above_sma SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestBacktestMode::test_backtest_mode_sell_signal_below_sma SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestBacktestMode::test_backtest_mode_hold_signal_low_adx SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestBacktestMode::test_backtest_mode_confidence_scaling SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestEnsembleIntegration::test_ensemble_provider_routing SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestCircuitBreakerIntegration::test_circuit_breaker_success_recorded SKIPPED [ 41%]
tests/test_decision_engine_comprehensive.py::TestCircuitBreakerIntegration::test_circuit_breaker_open_blocks_decision SKIPPED [ 42%]
tests/test_decision_engine_comprehensive.py::TestDecisionValidation::test_decision_has_required_fields SKIPPED [ 42%]
tests/test_decision_engine_comprehensive.py::TestDecisionValidation::test_decision_action_is_valid SKIPPED [ 42%]
tests/test_decision_engine_comprehensive.py::TestDecisionValidation::test_decision_confidence_in_range SKIPPED [ 42%]
tests/test_decision_engine_helpers.py::TestDeterminePositionType::test_buy_returns_long PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestDeterminePositionType::test_sell_returns_short PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestDeterminePositionType::test_hold_returns_none PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestDeterminePositionType::test_invalid_action_returns_none PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_crypto_asset_selects_coinbase_balance PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_forex_asset_selects_oanda_balance PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_btc_in_pair_detected_as_crypto PASSED [ 42%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_eth_in_pair_detected_as_crypto PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_underscore_pair_detected_as_forex PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_fallback_to_usd_balance PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_unknown_asset_uses_all_balances PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestSelectRelevantBalance::test_empty_balance_returns_empty PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_no_position_in_empty_portfolio PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_detects_spot_holding_in_portfolio PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_ignores_zero_amount_holding PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_detects_futures_position_in_monitoring_context_list PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_detects_futures_position_in_monitoring_context_dict PASSED [ 43%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_handles_usdt_suffix PASSED [ 44%]
tests/test_decision_engine_helpers.py::TestHasExistingPosition::test_handles_underscore_format PASSED [ 44%]
tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_normal_mode_with_valid_balance_buy FAILED [ 44%]
tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_normal_mode_with_valid_balance_sell FAILED [ 44%]
tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_hold_without_position_no_sizing FAILED [ 44%]
tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_hold_with_position_calculates_sizing FAILED [ 44%]
tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_legacy_percentage_conversion FAILED [ 44%]
tests/test_decision_engine_helpers.py::TestCreateDecisionIntegration::test_create_decision_buy_with_balance PASSED [ 44%]
tests/test_decision_engine_helpers.py::TestCreateDecisionIntegration::test_create_decision_hold_without_position PASSED [ 44%]
tests/test_decision_engine_logic.py::TestPositionSizing::test_calculate_position_size_standard PASSED [ 44%]
tests/test_decision_engine_logic.py::TestPositionSizing::test_calculate_position_size_zero_entry_price PASSED [ 44%]
tests/test_decision_engine_logic.py::TestPositionSizing::test_calculate_position_size_zero_stop_loss PASSED [ 45%]
tests/test_decision_engine_logic.py::TestPositionSizing::test_calculate_position_size_higher_risk PASSED [ 45%]
tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_positive FAILED [ 45%]
tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_negative FAILED [ 45%]
tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_zero_open FAILED [ 45%]
tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_volatility FAILED [ 45%]
tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_volatility_zero_close FAILED [ 45%]
tests/test_decision_engine_logic.py::TestPromptCreation::test_create_ai_prompt_basic PASSED [ 45%]
tests/test_decision_engine_logic.py::TestPromptCreation::test_create_ai_prompt_with_portfolio PASSED [ 45%]
tests/test_decision_engine_logic.py::TestPromptCreation::test_create_ai_prompt_with_sentiment PASSED [ 45%]
tests/test_decision_engine_logic.py::TestDecisionGeneration::test_generate_decision_basic PASSED [ 46%]
tests/test_decision_engine_logic.py::TestDecisionGeneration::test_generate_decision_with_portfolio PASSED [ 46%]
tests/test_decision_engine_logic.py::TestDecisionGeneration::test_generate_decision_invalid_action_fallback PASSED [ 46%]
tests/test_decision_engine_logic.py::TestDecisionGeneration::test_generate_decision_with_monitoring_context PASSED [ 46%]
tests/test_decision_engine_logic.py::TestEnsembleIntegration::test_ensemble_decision_mocked FAILED [ 46%]
tests/test_decision_engine_logic.py::TestMarketRegimeDetection::test_detect_market_regime_success PASSED [ 46%]
tests/test_decision_engine_logic.py::TestMarketRegimeDetection::test_detect_market_regime_insufficient_data PASSED [ 46%]
tests/test_decision_engine_logic.py::TestMarketRegimeDetection::test_detect_market_regime_no_data_provider PASSED [ 46%]
tests/test_decision_engine_logic.py::TestConfiguration::test_config_nested_structure FAILED [ 46%]
tests/test_decision_engine_logic.py::TestConfiguration::test_config_flat_structure_backward_compatibility FAILED [ 46%]
tests/test_decision_engine_logic.py::TestConfiguration::test_legacy_percentage_conversion FAILED [ 46%]
tests/test_decision_engine_logic.py::TestConfiguration::test_invalid_local_models_type PASSED [ 47%]
tests/test_decision_engine_logic.py::TestConfiguration::test_invalid_local_priority_type PASSED [ 47%]
tests/test_decision_engine_logic.py::TestMonitoringContext::test_set_monitoring_context PASSED [ 47%]
tests/test_decision_engine_logic.py::TestMonitoringContext::test_generate_decision_with_live_monitoring PASSED [ 47%]
tests/test_decision_engine_logic.py::TestBacktestMode::test_backtest_mode_initialization PASSED [ 47%]
tests/test_decision_engine_logic.py::TestBacktestMode::test_backtest_mode_generates_warning PASSED [ 47%]
tests/test_decision_store.py::TestDecisionStore::test_init_with_config PASSED [ 47%]
tests/test_decision_store.py::TestDecisionStore::test_save_and_retrieve_decision PASSED [ 47%]
tests/test_decision_store.py::TestDecisionStore::test_get_decisions PASSED [ 47%]
tests/test_decision_store.py::TestDecisionStore::test_delete_decision PASSED [ 47%]
tests/test_decision_store.py::TestDecisionStore::test_get_decision_count PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStorePersistence::test_decisions_persist_across_instances PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStorePersistence::test_update_decision PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_get_nonexistent_decision PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_save_decision_with_extra_fields PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_wipe_all_decisions PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_save_decision_without_id PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_update_decision_without_id PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreEdgeCases::test_delete_nonexistent_decision PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_with_no_old_decisions PASSED [ 48%]
tests/test_decision_store.py::TestDecisionStoreErrorHandling::test_save_decision_with_invalid_path PASSED [ 49%]
tests/test_decision_store.py::TestDecisionStoreErrorHandling::test_get_decisions_with_limit PASSED [ 49%]
tests/test_decision_store.py::TestDecisionStoreErrorHandling::test_get_decisions_filters_by_asset_pair PASSED [ 49%]
tests/test_dynamic_weights.py::test_dynamic_weights_all_providers_respond SKIPPED [ 49%]
tests/test_dynamic_weights.py::test_dynamic_weights_one_provider_fails PASSED [ 49%]
tests/test_dynamic_weights.py::test_dynamic_weights_multiple_providers_fail PASSED [ 49%]
tests/test_dynamic_weights.py::test_dynamic_weights_only_one_provider_responds PASSED [ 49%]
tests/test_dynamic_weights_injection.py::test_dynamic_weights_override SKIPPED [ 49%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_complete_analysis_to_storage_workflow PASSED [ 49%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_multi_asset_decision_storage PASSED [ 49%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_decision_validation PASSED [ 50%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_historical_decision_retrieval PASSED [ 50%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_concurrent_decision_storage PASSED [ 50%]
tests/test_e2e_workflow.py::TestEndToEndWorkflow::test_data_persistence_across_sessions PASSED [ 50%]
tests/test_e2e_workflow.py::TestDecisionHistoryManagement::test_save_and_retrieve_decision PASSED [ 50%]
tests/test_e2e_workflow.py::TestDecisionHistoryManagement::test_list_all_decisions PASSED [ 50%]
tests/test_e2e_workflow.py::TestMemoryEngineBasics::test_record_trade_outcome PASSED [ 50%]
tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_tracks_local_exception_as_failure FAILED [ 50%]
tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_tracks_multiple_provider_failures FAILED [ 50%]
tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_all_providers_fail_raises_error FAILED [ 50%]
tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_import_error FAILED [ 50%]
tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_runtime_error FAILED [ 51%]
tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_generic_exception FAILED [ 51%]
tests/test_ensemble_error_propagation.py::TestLocalPriorityFallbackChain::test_local_priority_soft_falls_back_to_remote FAILED [ 51%]
tests/test_ensemble_error_propagation.py::TestLocalPriorityFallbackChain::test_local_priority_true_still_tracks_failure_properly FAILED [ 51%]
tests/test_ensemble_error_propagation.py::TestProviderWeightAdjustment::test_weights_adjust_when_provider_fails FAILED [ 51%]
tests/test_ensemble_error_propagation.py::TestEnsembleFallbackTiers::test_weighted_voting_falls_back_to_majority_on_insufficient_providers FAILED [ 51%]
tests/test_ensemble_error_scenarios.py::TestEnsembleFallbackSystem::test_tier1_weighted_voting_all_providers SKIPPED [ 51%]
tests/test_ensemble_error_scenarios.py::TestEnsembleFallbackSystem::test_tier2_majority_voting_one_provider_fails SKIPPED [ 51%]
tests/test_ensemble_error_scenarios.py::TestEnsembleFallbackSystem::test_tier3_average_voting_below_quorum SKIPPED [ 51%]
tests/test_ensemble_error_scenarios.py::TestEnsembleFallbackSystem::test_tier4_single_provider_fallback SKIPPED [ 51%]
tests/test_ensemble_error_scenarios.py::TestEnsembleFallbackSystem::test_quorum_failure_all_providers_down SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestDynamicWeightAdjustment::test_weight_renormalization_one_failure SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestDynamicWeightAdjustment::test_weight_renormalization_multiple_failures SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestProviderFailureLogging::test_failed_providers_in_metadata SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestConfidenceDegradation::test_confidence_penalty_for_failures SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestDebateMode::test_debate_mode_enabled SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestAgreementScore::test_high_agreement_score SKIPPED [ 52%]
tests/test_ensemble_error_scenarios.py::TestAgreementScore::test_low_agreement_score SKIPPED [ 52%]
tests/test_ensemble_fallback.py::test_all_providers_active SKIPPED (...) [ 52%]
tests/test_ensemble_fallback.py::test_one_provider_fails SKIPPED (Te...) [ 52%]
tests/test_ensemble_fallback.py::test_two_providers_fail SKIPPED (Te...) [ 52%]
tests/test_ensemble_fallback.py::test_three_providers_fail SKIPPED (...) [ 53%]
tests/test_ensemble_fallback.py::test_asymmetric_weights SKIPPED (Te...) [ 53%]
tests/test_ensemble_fallback.py::test_fallback_tiers SKIPPED (Tests ...) [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_adjust_weights_handles_zero_weight_total PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_calculate_robust_weights_empty PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_calculate_robust_weights_mixed_providers PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_calculate_robust_weights_only_cloud PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_calculate_robust_weights_only_local PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_calculate_robust_weights_with_dynamic_weights PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_debate_mode_validates_enabled_providers PASSED [ 53%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_is_local_provider PASSED [ 54%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_is_valid_provider_response_strict_checks PASSED [ 54%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_local_models_config_reading PASSED [ 54%]
tests/test_ensemble_manager_validation.py::EnsembleSafetyChecksTest::test_local_models_validation PASSED [ 54%]
tests/test_ensemble_tiers.py::TestWeightCalculation::test_calculate_robust_weights_all_active PASSED [ 54%]
tests/test_ensemble_tiers.py::TestWeightCalculation::test_calculate_robust_weights_only_local PASSED [ 54%]
tests/test_ensemble_tiers.py::TestWeightCalculation::test_calculate_robust_weights_only_cloud PASSED [ 54%]
tests/test_ensemble_tiers.py::TestWeightCalculation::test_calculate_robust_weights_empty_providers PASSED [ 54%]
tests/test_ensemble_tiers.py::TestWeightCalculation::test_calculate_robust_weights_local_dominance PASSED [ 54%]
tests/test_ensemble_tiers.py::TestVotingStrategies::test_weighted_voting_consensus PASSED [ 54%]
tests/test_ensemble_tiers.py::TestVotingStrategies::test_majority_voting PASSED [ 54%]
tests/test_ensemble_tiers.py::TestVotingStrategies::test_stacking_ensemble PASSED [ 55%]
tests/test_ensemble_tiers.py::TestFallbackTiers::test_primary_strategy_success PASSED [ 55%]
tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_majority FAILED [ 55%]
tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_average FAILED [ 55%]
tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_single_provider FAILED [ 55%]
tests/test_ensemble_tiers.py::TestProviderFailures::test_partial_provider_failure PASSED [ 55%]
tests/test_ensemble_tiers.py::TestProviderFailures::test_confidence_adjustment_for_failures PASSED [ 55%]
tests/test_ensemble_tiers.py::TestProviderFailures::test_no_providers_error PASSED [ 55%]
tests/test_ensemble_tiers.py::TestDynamicWeightAdjustment::test_weight_adjustment_applied PASSED [ 55%]
tests/test_ensemble_tiers.py::TestDynamicWeightAdjustment::test_adjust_weights_for_active_providers PASSED [ 55%]
tests/test_ensemble_tiers.py::TestAgreementScore::test_calculate_agreement_score_full_consensus PASSED [ 56%]
tests/test_ensemble_tiers.py::TestAgreementScore::test_calculate_agreement_score_majority PASSED [ 56%]
tests/test_ensemble_tiers.py::TestAgreementScore::test_calculate_agreement_score_no_consensus PASSED [ 56%]
tests/test_ensemble_tiers.py::TestDecisionValidation::test_validate_valid_decision PASSED [ 56%]
tests/test_ensemble_tiers.py::TestDecisionValidation::test_validate_invalid_action PASSED [ 56%]
tests/test_ensemble_tiers.py::TestDecisionValidation::test_validate_missing_keys PASSED [ 56%]
tests/test_ensemble_tiers.py::TestDecisionValidation::test_validate_invalid_confidence_range PASSED [ 56%]
tests/test_ensemble_tiers.py::TestDecisionValidation::test_validate_negative_amount PASSED [ 56%]
tests/test_ensemble_tiers.py::TestProviderResponseValidation::test_is_valid_provider_response_valid PASSED [ 56%]
tests/test_ensemble_tiers.py::TestProviderResponseValidation::test_is_valid_provider_response_not_dict PASSED [ 56%]
tests/test_ensemble_tiers.py::TestProviderResponseValidation::test_is_valid_provider_response_missing_keys PASSED [ 56%]
tests/test_ensemble_tiers.py::TestProviderResponseValidation::test_is_valid_provider_response_invalid_action PASSED [ 57%]
tests/test_ensemble_tiers.py::TestProviderResponseValidation::test_is_valid_provider_response_confidence_out_of_range PASSED [ 57%]
tests/test_ensemble_tiers.py::TestLocalProviderDetection::test_is_local_provider_ollama PASSED [ 57%]
tests/test_ensemble_tiers.py::TestLocalProviderDetection::test_is_local_provider_named PASSED [ 57%]
tests/test_ensemble_tiers.py::TestLocalProviderDetection::test_is_local_provider_cloud PASSED [ 57%]
tests/test_ensemble_tiers.py::TestLocalProviderDetection::test_is_local_provider_case_insensitive PASSED [ 57%]
tests/test_ensemble_tiers.py::TestDebateMode::test_debate_mode_initialization PASSED [ 57%]
tests/test_ensemble_tiers.py::TestDebateMode::test_debate_mode_missing_provider_validation PASSED [ 57%]
tests/test_ensemble_tiers.py::TestDebateMode::test_debate_decisions_synthesis PASSED [ 57%]
tests/test_ensemble_tiers.py::TestQuorum::test_quorum_met PASSED         [ 57%]
tests/test_ensemble_tiers.py::TestQuorum::test_quorum_not_met_penalty PASSED [ 58%]
tests/test_ensemble_tiers.py::TestMetaLearner::test_meta_learner_initialization PASSED [ 58%]
tests/test_ensemble_tiers.py::TestMetaLearner::test_meta_learner_fallback_params PASSED [ 58%]
tests/test_ensemble_tiers.py::TestDynamicWeights::test_dynamic_weights_override PASSED [ 58%]
tests/test_ensemble_tiers.py::TestDynamicWeights::test_validate_dynamic_weights_non_string_key PASSED [ 58%]
tests/test_ensemble_tiers.py::TestDynamicWeights::test_validate_dynamic_weights_negative_value PASSED [ 58%]
tests/test_execute_safety.py::test_invalid_decision_blocks_execution PASSED [ 58%]
tests/test_execute_safety.py::test_execution_requires_valid_decision PASSED [ 58%]
tests/test_execute_safety.py::test_mock_platform_executes PASSED         [ 58%]
tests/test_execute_safety.py::test_breaker_opens_after_failures PASSED   [ 58%]
tests/test_execute_safety.py::test_learning_loop_calls_ensemble_update FAILED [ 58%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_init PASSED  [ 59%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_analyze_decision_outcome PASSED [ 59%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_calculate_performance_metrics PASSED [ 59%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_identify_patterns PASSED [ 59%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_generate_feedback_report PASSED [ 59%]
tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_update_learning_model PASSED [ 59%]
tests/test_feedback_analyzer.py::TestPerformanceAnalysis::test_win_rate_calculation PASSED [ 59%]
tests/test_feedback_analyzer.py::TestPerformanceAnalysis::test_sharpe_ratio PASSED [ 59%]
tests/test_feedback_analyzer.py::TestPerformanceAnalysis::test_max_drawdown_analysis PASSED [ 59%]
tests/test_feedback_analyzer.py::TestLearningFeedbackLoop::test_feedback_loop_iteration PASSED [ 59%]
tests/test_feedback_analyzer.py::TestLearningFeedbackLoop::test_learning_from_mistakes PASSED [ 60%]
tests/test_gemini_provider.py::test_gemini_provider PASSED               [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_initialization PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_initialization_default_cache_dir PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_fetch_raw_data FAILED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_fetch_raw_data_caching FAILED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_with_string_dates PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_with_datetime_objects PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_uses_cache_first PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_validates_data PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_persists_to_store PASSED [ 60%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_handles_empty_result PASSED [ 61%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_adds_missing_columns PASSED [ 61%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_sorts_by_index PASSED [ 61%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_get_historical_data_handles_persistence_failure PASSED [ 61%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProviderIntegration::test_full_workflow_without_cache FAILED [ 61%]
tests/test_historical_data_provider_implementation.py::TestHistoricalDataProviderIntegration::test_full_workflow_with_cache FAILED [ 61%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_bot_initialization PASSED [ 61%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_process_update_validates_user SKIPPED [ 61%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_process_update_handles_approval_request SKIPPED [ 61%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_create_approval_keyboard SKIPPED [ 61%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_queue_approval_request SKIPPED [ 62%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_format_decision_message SKIPPED [ 62%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_handle_callback_query_approve SKIPPED [ 62%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_handle_callback_query_reject SKIPPED [ 62%]
tests/test_integrations_telegram_redis.py::TestTelegramApprovalBot::test_set_webhook SKIPPED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_linux_apt PASSED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_macos_brew PASSED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_already_running FAILED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_docker_fallback FAILED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_is_redis_running_true FAILED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_is_redis_running_false PASSED [ 62%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_get_connection_url PASSED [ 63%]
tests/test_integrations_telegram_redis.py::TestRedisManager::test_start_redis_service PASSED [ 63%]
tests/test_integrations_telegram_redis.py::TestTunnelManager::test_start_ngrok_tunnel FAILED [ 63%]
tests/test_integrations_telegram_redis.py::TestTunnelManager::test_install_ngrok_if_missing FAILED [ 63%]
tests/test_integrations_telegram_redis.py::TestTunnelManager::test_get_tunnel_url_returns_url FAILED [ 63%]
tests/test_integrations_telegram_redis.py::TestTunnelManager::test_stop_tunnel FAILED [ 63%]
tests/test_integrations_telegram_redis.py::TestTunnelManager::test_custom_domain_scaffold FAILED [ 63%]
tests/test_long_term_performance.py::test_long_term_performance PASSED   [ 63%]
tests/test_model_installer_verify.py::test_verify_model_success PASSED   [ 63%]
tests/test_model_installer_verify.py::test_verify_model_failure_missing_digest PASSED [ 63%]
tests/test_model_installer_verify.py::test_download_model_calls_verify_success_progress_off PASSED [ 64%]
tests/test_model_installer_verify.py::test_download_model_retry_parallel_result PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_init PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_record_prediction PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_record_actual_outcome PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_evaluate_performance PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_detect_concept_drift PASSED [ 64%]
tests/test_model_performance_monitor.py::TestModelPerformanceMonitor::test_detect_data_drift PASSED [ 64%]
tests/test_model_performance_monitor.py::TestPerformanceMetrics::test_multiple_predictions PASSED [ 64%]
tests/test_monitoring_integration.py::test_monitoring_context_creation PASSED [ 64%]
tests/test_monitoring_integration.py::test_monitoring_context_has_required_fields PASSED [ 64%]
tests/test_monitoring_integration.py::test_monitoring_context_ai_formatting PASSED [ 65%]
tests/test_monitoring_integration.py::test_monitoring_provider_attachment_to_engine PASSED [ 65%]
tests/test_monitoring_integration.py::test_decision_generation_with_monitoring FAILED [ 65%]
tests/test_monitoring_integration.py::test_end_to_end_monitoring_setup PASSED [ 65%]
tests/test_monitoring_integration.py::test_end_to_end_decision_with_monitoring FAILED [ 65%]
tests/test_monitoring_integration.py::test_monitoring_provider_persistence FAILED [ 65%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_numpy_version_requirement PASSED [ 65%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_pandas_numpy_compatibility PASSED [ 65%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_sklearn_numpy_compatibility PASSED [ 65%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_pandas_ta_numpy_compatibility PASSED [ 65%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_numpy_deprecated_apis PASSED [ 66%]
tests/test_numpy_compatibility.py::TestNumpyCompatibility::test_version_compatibility_matrix PASSED [ 66%]
tests/test_phase1_robustness.py::test_retry_logic PASSED                 [ 66%]
tests/test_phase1_robustness.py::test_circuit_breaker PASSED             [ 66%]
tests/test_phase1_robustness.py::test_circuit_breaker_decorator PASSED   [ 66%]
tests/test_phase1_robustness.py::test_decision_validation PASSED         [ 66%]
tests/test_phase1_robustness.py::test_timeout_configuration PASSED       [ 66%]
tests/test_phase2_performance_benchmarks.py::TestPortfolioCachingPerformance::test_portfolio_cache_reduces_api_calls PASSED [ 66%]
tests/test_phase2_performance_benchmarks.py::TestPortfolioCachingPerformance::test_portfolio_cache_hit_rate PASSED [ 66%]
tests/test_phase2_performance_benchmarks.py::TestPortfolioCachingPerformance::test_cache_invalidation_after_trade PASSED [ 66%]
tests/test_phase2_performance_benchmarks.py::TestDataProviderCachingPerformance::test_market_regime_caching PASSED [ 66%]
tests/test_phase2_performance_benchmarks.py::TestDataProviderCachingPerformance::test_sentiment_caching PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestLLMConnectionPooling::test_singleton_pattern PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestLLMConnectionPooling::test_connection_health_check PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestLLMConnectionPooling::test_connection_stats PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestCacheMetrics::test_cache_metrics_tracking PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestCacheMetrics::test_cache_efficiency_score PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement PASSED [ 67%]
tests/test_phase2_performance_benchmarks.py::test_phase2_success_criteria_summary PASSED [ 67%]
tests/test_platform_error_handling.py::TestCoinbaseConnectionErrors::test_client_initialization_import_error PASSED [ 67%]
tests/test_platform_error_handling.py::TestCoinbaseConnectionErrors::test_client_initialization_generic_error PASSED [ 67%]
tests/test_platform_error_handling.py::TestCoinbaseConnectionErrors::test_get_balance_import_error PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseConnectionErrors::test_get_balance_network_timeout PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseConnectionErrors::test_get_balance_connection_error PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseResponseErrors::test_get_balance_missing_futures_balance_summary PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseResponseErrors::test_get_balance_futures_error_but_spot_succeeds PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseResponseErrors::test_get_balance_spot_error_but_futures_succeeds PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseResponseErrors::test_get_balance_zero_balances PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_empty_string PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_none PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_whitespace_only FAILED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_standard_formats PASSED [ 68%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_usdt_suffix PASSED [ 69%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_usdc_suffix PASSED [ 69%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_malformed_with_hyphen PASSED [ 69%]
tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_unknown_quote PASSED [ 69%]
tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_import_error FAILED [ 69%]
tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_network_error PASSED [ 69%]
tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_futures_error_continues_with_spot FAILED [ 69%]
tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_empty_positions_list PASSED [ 69%]
tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_client_initialization_import_error FAILED [ 69%]
tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_get_balance_connection_error FAILED [ 69%]
tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_get_balance_timeout FAILED [ 70%]
tests/test_platform_error_handling.py::TestOandaResponseErrors::test_get_balance_missing_account_field FAILED [ 70%]
tests/test_platform_error_handling.py::TestOandaResponseErrors::test_get_balance_malformed_balance_value FAILED [ 70%]
tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_balance_with_error_rate FAILED [ 70%]
tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_zero_error_rate FAILED [ 70%]
tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_trade_execution_error FAILED [ 70%]
tests/test_platform_error_handling.py::TestPlatformFactoryErrors::test_create_platform_unknown_type PASSED [ 70%]
tests/test_platform_error_handling.py::TestPlatformFactoryErrors::test_create_platform_missing_credentials PASSED [ 70%]
tests/test_platform_error_handling.py::TestPlatformFactoryErrors::test_create_platform_none_type PASSED [ 70%]
tests/test_platform_error_handling.py::TestErrorRecovery::test_partial_balance_fetch_success PASSED [ 70%]
tests/test_platform_error_handling.py::TestErrorRecovery::test_retry_on_transient_error PASSED [ 70%]
tests/test_pnl_semantics.py::test_pnl_consistency_zero_trades PASSED     [ 71%]
tests/test_pnl_semantics.py::test_pnl_summation PASSED                   [ 71%]
tests/test_pnl_semantics.py::test_win_rate_consistency PASSED            [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardAggregator::test_aggregator_initialization_with_platforms PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardAggregator::test_aggregator_stores_platforms PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestDisplayPortfolioDashboard::test_display_with_aggregated_data PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestDisplayPortfolioDashboard::test_display_accepts_dict PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardIntegration::test_aggregator_to_display_workflow PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardIntegration::test_aggregator_with_single_platform PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardEdgeCases::test_aggregator_with_empty_platforms PASSED [ 71%]
tests/test_portfolio_dashboard.py::TestPortfolioDashboardEdgeCases::test_display_with_empty_data PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestRecordTradeOutcome::test_record_trade_creates_outcome PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestRecordTradeOutcome::test_record_trade_calculates_pnl PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestRecordTradeOutcome::test_record_trade_stop_loss_flag PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestRecordTradeOutcome::test_record_trade_take_profit_flag PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestSaveToDisk::test_save_creates_file PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestSaveToDisk::test_save_json_structure PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestSaveToDisk::test_save_empty_memory PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestSaveToDisk::test_save_creates_directory PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestSaveToDisk::test_save_multiple_trades PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestLoadFromDisk::test_load_saved_file PASSED [ 72%]
tests/test_portfolio_memory_persistence.py::TestLoadFromDisk::test_load_nonexistent_file_creates_new PASSED [ 73%]
tests/test_portfolio_memory_persistence.py::TestLoadFromDisk::test_load_invalid_json_returns_new PASSED [ 73%]
tests/test_portfolio_memory_persistence.py::TestAutoSave::test_record_triggers_auto_save PASSED [ 73%]
tests/test_portfolio_memory_persistence.py::TestAutoSave::test_auto_save_handles_errors_gracefully PASSED [ 73%]
tests/test_portfolio_memory_persistence.py::TestProviderPerformanceTracking::test_provider_stats_updated PASSED [ 73%]
tests/test_portfolio_memory_persistence.py::TestProviderPerformanceTracking::test_provider_stats_persist PASSED [ 73%]
tests/test_positions_cli.py::test_coinbase_get_active_positions_returns_expected_format PASSED [ 73%]
tests/test_positions_cli.py::test_oanda_get_active_positions_returns_expected_format PASSED [ 73%]
tests/test_positions_cli.py::test_positions_cli_command_single_platform PASSED [ 73%]
tests/test_positions_cli.py::test_positions_cli_command_unified_platform PASSED [ 73%]
tests/test_positions_cli.py::test_positions_cli_command_no_positions PASSED [ 74%]
tests/test_positions_cli.py::test_positions_cli_command_platform_error PASSED [ 74%]
tests/test_provider_tiers.py::TestProviderTierConstants::test_tier_constants_are_lists PASSED [ 74%]
tests/test_provider_tiers.py::TestProviderTierConstants::test_no_overlap_between_tiers PASSED [ 74%]
tests/test_provider_tiers.py::TestGetTier::test_get_tier_cli PASSED      [ 74%]
tests/test_provider_tiers.py::TestGetTier::test_get_tier_codex PASSED    [ 74%]
tests/test_provider_tiers.py::TestGetTier::test_get_tier_gemini PASSED   [ 74%]
tests/test_provider_tiers.py::TestGetTier::test_get_tier_free_provider PASSED [ 74%]
tests/test_provider_tiers.py::TestGetTier::test_get_tier_unknown_provider PASSED [ 74%]
tests/test_provider_tiers.py::TestGetProviders::test_get_free_providers_returns_list PASSED [ 74%]
tests/test_provider_tiers.py::TestGetProviders::test_get_premium_providers_returns_list PASSED [ 74%]
tests/test_provider_tiers.py::TestGetProviders::test_premium_providers_include_known_providers PASSED [ 75%]
tests/test_provider_tiers.py::TestGetFallbackProvider::test_get_fallback_provider_returns_string PASSED [ 75%]
tests/test_provider_tiers.py::TestGetFallbackProvider::test_fallback_provider_has_tier PASSED [ 75%]
tests/test_provider_tiers.py::TestProviderTierIntegration::test_all_free_providers_return_free_tier PASSED [ 75%]
tests/test_provider_tiers.py::TestProviderTierIntegration::test_all_premium_providers_return_premium_tier PASSED [ 75%]
tests/test_provider_tiers.py::TestProviderTierIntegration::test_tier_classification_consistent PASSED [ 75%]
tests/test_provider_tiers.py::TestOllamaModels::test_get_ollama_models PASSED [ 75%]
tests/test_provider_tiers.py::TestOllamaModels::test_is_ollama_model PASSED [ 75%]
tests/test_provider_tiers.py::TestOllamaModels::test_get_total_vram_required PASSED [ 75%]
tests/test_provider_tiers.py::TestOllamaModels::test_get_total_download_size PASSED [ 75%]
tests/test_provider_tiers.py::TestAssetBasedRouting::test_get_premium_provider_for_crypto PASSED [ 76%]
tests/test_provider_tiers.py::TestAssetBasedRouting::test_get_premium_provider_for_forex PASSED [ 76%]
tests/test_provider_tiers.py::TestAssetBasedRouting::test_get_premium_provider_for_stock PASSED [ 76%]
tests/test_provider_tiers.py::TestAssetBasedRouting::test_get_premium_provider_invalid_asset_type PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_pulse_included_in_monitoring_context PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_pulse_not_fetched_without_asset_pair PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_includes_all_indicators PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_rsi_zones PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_macd_interpretation PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_bollinger_bands_zones PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_adx_trend_strength PASSED [ 76%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_cross_timeframe_alignment PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_pulse_summary_timeframe_ordering PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_for_ai_prompt_includes_pulse PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseFormatting::test_format_for_ai_prompt_no_pulse_when_unavailable PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseFormatting::test_pulse_staleness_handling PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseEdgeCases::test_empty_pulse_returns_empty_string PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseEdgeCases::test_partial_indicator_data PASSED [ 77%]
tests/test_pulse_integration.py::TestPulseEdgeCases::test_trade_monitor_error_handling PASSED [ 77%]
tests/test_risk_context_fields.py::test_risk_context_fields FAILED       [ 77%]
tests/test_risk_gatekeeper_comprehensive.py::TestRiskGatekeeperInitialization::test_default_initialization PASSED [ 77%]
tests/test_risk_gatekeeper_comprehensive.py::TestRiskGatekeeperInitialization::test_custom_initialization PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestCountHoldingsByCategory::test_empty_holdings PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestCountHoldingsByCategory::test_single_category PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestCountHoldingsByCategory::test_multiple_categories PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_no_market_status_no_override PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_crypto_market_open_no_override PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_stock_market_closed_overrides_to_hold PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_forex_market_closed_overrides_to_hold PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_hold_action_not_overridden_when_closed PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_stale_data_overrides_to_hold PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestMarketHoursCheck::test_backtest_mode_ignores_stale_data PASSED [ 78%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeDrawdown::test_small_drawdown_passes PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeDrawdown::test_large_drawdown_fails PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeCorrelation::test_low_correlation_passes PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeCorrelation::test_high_correlation_fails PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeCorrelation::test_legacy_correlation_check_without_analysis PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVaR::test_var_under_limit_passes PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVaR::test_var_exceeds_limit_fails PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVaR::test_no_var_analysis_skips_check PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVolatilityConfidence::test_low_volatility_high_confidence_passes PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVolatilityConfidence::test_high_volatility_low_confidence_fails PASSED [ 79%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeVolatilityConfidence::test_high_volatility_high_confidence_passes PASSED [ 80%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeMarketSchedule::test_market_open_passes PASSED [ 80%]
tests/test_risk_gatekeeper_comprehensive.py::TestValidateTradeMarketSchedule::test_market_closed_fails PASSED [ 80%]
tests/test_risk_gatekeeper_comprehensive.py::TestComprehensiveValidation::test_all_checks_pass PASSED [ 80%]
tests/test_risk_gatekeeper_comprehensive.py::TestComprehensiveValidation::test_multiple_failures_returns_first_failure PASSED [ 80%]
tests/test_signal_only_mode.py::test_valid_balance_enables_position_sizing SKIPPED [ 80%]
tests/test_signal_only_mode.py::test_empty_balance_enables_signal_only_mode SKIPPED [ 80%]
tests/test_signal_only_mode.py::test_zero_balance_enables_signal_only_mode SKIPPED [ 80%]
tests/test_signal_only_mode.py::test_none_balance_enables_signal_only_mode SKIPPED [ 80%]
tests/test_signal_only_mode.py::test_signal_only_default_overrides_balance SKIPPED [ 80%]
tests/test_system_integration_verification.py::TestTelegramBotIntegration::test_telegram_bot_decision_loop_closed PASSED [ 80%]
tests/test_system_integration_verification.py::TestHistoricalDataIntegration::test_historical_data_loop_closed PASSED [ 81%]
tests/test_system_integration_verification.py::TestHistoricalDataIntegration::test_historical_data_cache_roundtrip --- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 461, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: 'Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x7f13e987d6d0>'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 249, in call_and_report
    report: TestReport = ihook.pytest_runtest_makereport(item=item, call=call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 377, in pytest_runtest_makereport
    return TestReport.from_item_and_call(item, call)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 438, in from_item_and_call
    longrepr = _format_failed_longrepr(item, call, excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/reports.py", line 263, in _format_failed_longrepr
    longrepr = item.repr_failure(excinfo)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1762, in repr_failure
    return self._repr_failure_py(excinfo, style=style)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/nodes.py", line 456, in _repr_failure_py
    return excinfo.getrepr(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 765, in getrepr
    return fmt.repr_excinfo(self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1200, in repr_excinfo
    reprtraceback = self.repr_traceback(excinfo_)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1133, in repr_traceback
    self.repr_traceback_entry(entry, excinfo if last == entry else None)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 1063, in repr_traceback_entry
    source = self._getentrysource(entry)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 901, in _getentrysource
    source = entry.getsource(self.astcache)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/code.py", line 299, in getsource
    astnode, _, end = getstatementrange_ast(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/_code/source.py", line 191, in getstatementrange_ast
    astnode = ast.parse(content, "source", "exec")
  File "/usr/lib/python3.13/ast.py", line 50, in parse
    return compile(source, filename, mode, flags,
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/connector.py", line 388, in __del__
    self._loop.call_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1907, in call_exception_handler
    self.default_exception_handler(context)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 1879, in default_exception_handler
    logger.error('\n'.join(log_lines), exc_info=exc_info)
Message: "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x7f13ddadfcb0>, 3366.930450323)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x7f13de02e210>"
Arguments: ()
FAILED [ 81%]
tests/test_system_integration_verification.py::TestSystemClosedLoops::test_all_critical_todos_resolved PASSED [ 81%]
tests/test_system_integration_verification.py::TestSystemClosedLoops::test_validator_integration PASSED [ 81%]
tests/test_system_integration_verification.py::TestSystemClosedLoops::test_timeseries_store_integration PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_init_with_valid_config PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_format_decision_message PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_create_approval_keyboard PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_setup_webhook PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_send_approval_request PASSED [ 81%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_send_approval_request_without_decision_id PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_process_update_callback_query PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_process_update_unauthorized_user PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_handle_message_start_command PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_approve_decision_writes_file PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_reject_decision_writes_file PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBot::test_sanitize_decision_id PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBotWithoutInstallation::test_init_without_telegram_library PASSED [ 82%]
tests/test_telegram_bot_implementation.py::TestTelegramBotWithoutInstallation::test_send_message_without_bot PASSED [ 82%]
tests/test_timeframe_aggregator_indicators.py::TestRSICalculation::test_rsi_with_insufficient_data PASSED [ 82%]
tests/test_timeframe_aggregator_indicators.py::TestRSICalculation::test_rsi_uptrend_overbought PASSED [ 82%]
tests/test_timeframe_aggregator_indicators.py::TestRSICalculation::test_rsi_downtrend_oversold PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestRSICalculation::test_rsi_ranging_neutral SKIPPED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestMACDCalculation::test_macd_with_insufficient_data PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestMACDCalculation::test_macd_returns_dict PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestMACDCalculation::test_macd_uptrend_positive PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestMACDCalculation::test_macd_downtrend_negative PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestBollingerBands::test_bbands_with_insufficient_data PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestBollingerBands::test_bbands_returns_dict PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestBollingerBands::test_bbands_middle_is_sma PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestBollingerBands::test_bbands_percent_b_range PASSED [ 83%]
tests/test_timeframe_aggregator_indicators.py::TestADXCalculation::test_adx_with_insufficient_data PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestADXCalculation::test_adx_returns_dict PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestADXCalculation::test_adx_uptrend_plus_di_higher PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestADXCalculation::test_adx_downtrend_minus_di_higher PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestATRCalculation::test_atr_with_insufficient_data PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestATRCalculation::test_atr_positive PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestATRCalculation::test_atr_higher_in_volatile_market PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestVolatilityClassification::test_low_volatility PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestVolatilityClassification::test_medium_volatility PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestVolatilityClassification::test_high_volatility PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestVolatilityClassification::test_unknown_volatility_zero_price PASSED [ 84%]
tests/test_timeframe_aggregator_indicators.py::TestSignalStrength::test_signal_strength_range PASSED [ 85%]
tests/test_timeframe_aggregator_indicators.py::TestSignalStrength::test_signal_strength_oversold PASSED [ 85%]
tests/test_timeframe_aggregator_indicators.py::TestSignalStrength::test_signal_strength_neutral PASSED [ 85%]
tests/test_timeframe_aggregator_indicators.py::TestDetectTrendEnhanced::test_detect_trend_uptrend_confirmation PASSED [ 85%]
tests/test_timeframe_aggregator_indicators.py::TestDetectTrendEnhanced::test_detect_trend_all_fields_present PASSED [ 85%]
tests/test_timeframe_aggregator_indicators.py::TestDetectTrendEnhanced::test_detect_trend_insufficient_data PASSED [ 85%]
tests/test_timeseries_data_store.py::TestTimeSeriesDataStore::test_init PASSED [ 85%]
tests/test_timeseries_data_store.py::TestTimeSeriesDataStore::test_save_data_basic PASSED [ 85%]
tests/test_timeseries_data_store.py::TestTimeSeriesDataStore::test_load_data_basic PASSED [ 85%]
tests/test_timeseries_data_store.py::TestTimeSeriesDataStore::test_save_multiple_data_points PASSED [ 85%]
tests/test_timeseries_data_store.py::TestTimeSeriesDataStore::test_load_nonexistent_series PASSED [ 86%]
tests/test_timeseries_data_store.py::TestDataPersistence::test_data_survives_store_recreation PASSED [ 86%]
tests/test_timeseries_data_store.py::TestDataPersistence::test_multiple_series PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorLifecycle::test_monitor_initialization PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorLifecycle::test_monitor_start PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorLifecycle::test_monitor_stop PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorLifecycle::test_monitor_double_start PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorPnLTracking::test_get_monitoring_summary_stopped PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorPnLTracking::test_get_monitoring_summary_running PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorPnLTracking::test_get_active_trades_empty PASSED [ 86%]
tests/test_trade_monitor.py::TestTradeMonitorIntegration::test_monitor_with_position SKIPPED [ 86%]
tests/test_trade_tracker.py::TestTradeTrackerThread::test_init PASSED    [ 87%]
tests/test_trade_tracker.py::TestTradeTrackerThread::test_start_tracking PASSED [ 87%]
tests/test_trade_tracker.py::TestTradeTrackerThread::test_stop_tracking PASSED [ 87%]
tests/test_trade_tracker.py::TestTradeTrackerThread::test_get_current_status PASSED [ 87%]
tests/test_trade_tracker.py::TestTradeTrackerThread::test_is_running_property PASSED [ 87%]
tests/test_trade_tracker.py::TestPositionTracking::test_long_position_tracking PASSED [ 87%]
tests/test_trade_tracker.py::TestPositionTracking::test_short_position_tracking PASSED [ 87%]
tests/test_trading_loop_agent.py::test_agent_initial_state ERROR         [ 87%]
tests/test_trading_loop_agent.py::test_agent_process_cycle_no_action ERROR [ 87%]
tests/test_trading_loop_agent.py::test_agent_stop_method ERROR           [ 87%]
tests/test_two_phase_wiring.py::TestTwoPhaseEnsembleWiring::test_aggregate_decisions_two_phase_exists SKIPPED [ 88%]
tests/test_two_phase_wiring.py::TestTwoPhaseEnsembleWiring::test_two_phase_disabled_uses_standard_aggregation SKIPPED [ 88%]
tests/test_two_phase_wiring.py::TestTwoPhaseEnsembleWiring::test_two_phase_enabled_calls_aggregate_decisions_two_phase SKIPPED [ 88%]
tests/test_two_phase_wiring.py::TestTwoPhaseEnsembleWiring::test_two_phase_fallback_on_exception SKIPPED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_all_timeframes_basic PASSED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_with_missing_data PASSED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_custom_timeframes PASSED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_metadata_tracking PASSED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_timestamp_format PASSED [ 88%]
tests/test_unified_data_provider.py::TestUnifiedDataProviderAggregation::test_aggregate_empty_timeframes PASSED [ 88%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_basic PASSED [ 88%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_nonexistent_file PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_with_env_vars PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_missing_env_var PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_nested_env_vars PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_list_with_env_vars PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_no_env_vars PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_preserves_types PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_malformed_yaml PASSED [ 89%]
tests/test_utils_config_loader.py::TestConfigLoader::test_load_config_empty_file PASSED [ 89%]
tests/test_utils_cost_tracker.py::TestCostTracker::test_init PASSED      [ 89%]
tests/test_utils_cost_tracker.py::TestCostTracker::test_log_premium_call PASSED [ 90%]
tests/test_utils_cost_tracker.py::TestCostTracker::test_get_calls_today PASSED [ 90%]
tests/test_utils_cost_tracker.py::TestCostTracker::test_get_daily_summary PASSED [ 90%]
tests/test_utils_cost_tracker.py::TestModuleFunctions::test_log_premium_call_function PASSED [ 90%]
tests/test_utils_cost_tracker.py::TestModuleFunctions::test_check_budget_function PASSED [ 90%]
tests/test_utils_cost_tracker.py::TestModuleFunctions::test_get_cost_tracker_singleton PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestValidationRules::test_validation_rules_exist PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestValidationRules::test_price_validation_rules PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestValidationRules::test_volume_validation_rules PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_init PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_price_valid PASSED [ 90%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_price_invalid PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_volume_valid PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_volume_invalid PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_timestamp PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_currency_pair PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_dataframe PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestEdgeCases::test_zero_price PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestEdgeCases::test_very_large_price PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestEdgeCases::test_none_values PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestBatchValidation::test_validate_multiple_prices PASSED [ 91%]
tests/test_utils_financial_data_validator.py::TestIntegration::test_complete_market_data_validation PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_initialization PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_get_balance PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_buy_trade_execution PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_sell_trade_execution PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_insufficient_balance PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_action PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_amount PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_slippage_application PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_portfolio_breakdown PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_portfolio_with_positions PASSED [ 92%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_trade_history PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_reset_functionality PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_reset_with_custom_balance PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_position_price_update PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_asset_pair_normalization PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_multiple_positions PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_account_info_structure PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_no_position_sell_fails PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_partial_position_close PASSED [ 93%]
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_fees_applied PASSED [ 93%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_factory_creates_mock_platform PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_mock_platform_matches_coinbase_interface PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_backtest_simulation_workflow PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_agent_kill_switch_scenario PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_multiple_backtest_runs_with_reset PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_realistic_trading_scenario PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_circuit_breaker_compatibility PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_signal_only_mode_compatibility PASSED [ 94%]
tests/trading_platforms/test_mock_platform_integration.py::TestMockPlatformIntegration::test_unified_platform_routing PASSED [ 94%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_eurusd_routes_to_oanda PASSED [ 94%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_btcusd_routes_to_coinbase PASSED [ 94%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_ethusd_routes_to_coinbase PASSED [ 95%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_gbpusd_routes_to_oanda PASSED [ 95%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_usdjpy_routes_to_oanda PASSED [ 95%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_eur_usd_with_underscore_routes_to_oanda PASSED [ 95%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_unknown_asset_returns_error PASSED [ 95%]
tests/trading_platforms/test_unified_platform_routing.py::TestUnifiedPlatformRouting::test_three_asset_watchlist PASSED [ 95%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_fresh_crypto_data_no_warning PASSED [ 95%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_crypto_warning_threshold_5_minutes PASSED [ 95%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_crypto_critical_threshold_15_minutes PASSED [ 95%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_forex_warning_threshold_5_minutes PASSED [ 95%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_forex_critical_threshold_15_minutes PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_intraday_warning_threshold_5_minutes FAILED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_intraday_critical_threshold_15_minutes FAILED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_daily_warning_threshold_24_hours FAILED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_daily_fresh_within_24_hours FAILED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_timestamp_with_z_suffix PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_timestamp_with_timezone_offset PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_age_string_seconds_format PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_age_string_minutes_format PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_age_string_hours_format PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_case_insensitive_asset_type PASSED [ 96%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_case_insensitive_timeframe FAILED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_unknown_asset_type_defaults_to_crypto_thresholds PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_invalid_timestamp_format_raises_error PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_empty_timestamp_raises_error PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_none_timestamp_raises_error PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_default_asset_type_is_crypto PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_default_timeframe_is_intraday FAILED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_edge_case_exactly_5_minutes_old_crypto PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_edge_case_exactly_15_minutes_old_crypto PASSED [ 97%]
tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_fractional_minute_age_string PASSED [ 97%]
tests/utils/test_market_schedule.py::test_forex_friday_boundary_stays_open PASSED [ 98%]
tests/utils/test_market_schedule.py::test_forex_sunday_reopen_window PASSED [ 98%]
tests/utils/test_market_schedule.py::test_stock_open_and_close_edges PASSED [ 98%]
tests/utils/test_market_schedule.py::test_crypto_always_open_weekday PASSED [ 98%]
tests/utils/test_market_schedule.py::test_crypto_weekend_low_liquidity_warning PASSED [ 98%]
tests/utils/test_market_schedule.py::test_forex_asian_session PASSED     [ 98%]
tests/utils/test_market_schedule.py::test_forex_london_session PASSED    [ 98%]
tests/utils/test_market_schedule.py::test_forex_ny_session PASSED        [ 98%]
tests/utils/test_market_schedule.py::test_forex_overlap_session PASSED   [ 98%]
tests/utils/test_market_schedule.py::test_forex_saturday_open_with_warning PASSED [ 98%]
tests/utils/test_market_schedule.py::test_forex_time_to_close_friday PASSED [ 98%]
tests/utils/test_market_schedule.py::test_forex_time_to_close_midweek PASSED [ 99%]
tests/utils/test_market_schedule.py::test_stock_weekend_closed PASSED    [ 99%]
tests/utils/test_market_schedule.py::test_stock_time_to_close_midday PASSED [ 99%]
tests/utils/test_market_schedule.py::test_stock_session_label PASSED     [ 99%]
tests/utils/test_market_schedule.py::test_backtesting_forex_timestamp PASSED [ 99%]
tests/utils/test_market_schedule.py::test_backtesting_stock_timestamp PASSED [ 99%]
tests/utils/test_market_schedule.py::test_backtesting_crypto_timestamp PASSED [ 99%]
tests/utils/test_market_schedule.py::test_backtesting_crypto_weekend_timestamp PASSED [ 99%]
tests/utils/test_market_schedule.py::test_asset_type_case_insensitive PASSED [ 99%]
tests/utils/test_market_schedule.py::test_default_asset_type_is_crypto PASSED [ 99%]
tests/utils/test_market_schedule.py::test_timezone_awareness PASSED      [100%]

==================================== ERRORS ====================================
__________________ ERROR at setup of test_agent_initial_state __________________
tests/test_trading_loop_agent.py:52: in trading_agent
    agent = TradingLoopAgent(
finance_feedback_engine/agent/trading_loop_agent.py:123: in __init__
    raise ValueError(error_msg)
E   ValueError: Cannot start agent in signal-only mode without valid notification delivery.
E   Configuration errors: Telegram config missing
E   Please either:
E   1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
E   2. Enable autonomous mode (autonomous.enabled=true)
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 57, in __init__
    self.risk_gatekeeper = RiskGatekeeper(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/risk/gatekeeper.py", line 53, in __init__
    logger.info(
Message: 'RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 122, in __init__
    logger.error(error_msg)
Message: 'Cannot start agent in signal-only mode without valid notification delivery.\nConfiguration errors: Telegram config missing\nPlease either:\n1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)\n2. Enable autonomous mode (autonomous.enabled=true)\n'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.risk.gatekeeper:gatekeeper.py:53 RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence
ERROR    finance_feedback_engine.agent.trading_loop_agent:trading_loop_agent.py:122 Cannot start agent in signal-only mode without valid notification delivery.
Configuration errors: Telegram config missing
Please either:
1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
2. Enable autonomous mode (autonomous.enabled=true)
_____________ ERROR at setup of test_agent_process_cycle_no_action _____________
tests/test_trading_loop_agent.py:52: in trading_agent
    agent = TradingLoopAgent(
finance_feedback_engine/agent/trading_loop_agent.py:123: in __init__
    raise ValueError(error_msg)
E   ValueError: Cannot start agent in signal-only mode without valid notification delivery.
E   Configuration errors: Telegram config missing
E   Please either:
E   1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
E   2. Enable autonomous mode (autonomous.enabled=true)
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 57, in __init__
    self.risk_gatekeeper = RiskGatekeeper(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/risk/gatekeeper.py", line 53, in __init__
    logger.info(
Message: 'RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 122, in __init__
    logger.error(error_msg)
Message: 'Cannot start agent in signal-only mode without valid notification delivery.\nConfiguration errors: Telegram config missing\nPlease either:\n1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)\n2. Enable autonomous mode (autonomous.enabled=true)\n'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.risk.gatekeeper:gatekeeper.py:53 RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence
ERROR    finance_feedback_engine.agent.trading_loop_agent:trading_loop_agent.py:122 Cannot start agent in signal-only mode without valid notification delivery.
Configuration errors: Telegram config missing
Please either:
1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
2. Enable autonomous mode (autonomous.enabled=true)
___________________ ERROR at setup of test_agent_stop_method ___________________
tests/test_trading_loop_agent.py:52: in trading_agent
    agent = TradingLoopAgent(
finance_feedback_engine/agent/trading_loop_agent.py:123: in __init__
    raise ValueError(error_msg)
E   ValueError: Cannot start agent in signal-only mode without valid notification delivery.
E   Configuration errors: Telegram config missing
E   Please either:
E   1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
E   2. Enable autonomous mode (autonomous.enabled=true)
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 57, in __init__
    self.risk_gatekeeper = RiskGatekeeper(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/risk/gatekeeper.py", line 53, in __init__
    logger.info(
Message: 'RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_trading_loop_agent.py", line 52, in trading_agent
    agent = TradingLoopAgent(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/agent/trading_loop_agent.py", line 122, in __init__
    logger.error(error_msg)
Message: 'Cannot start agent in signal-only mode without valid notification delivery.\nConfiguration errors: Telegram config missing\nPlease either:\n1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)\n2. Enable autonomous mode (autonomous.enabled=true)\n'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.risk.gatekeeper:gatekeeper.py:53 RiskGatekeeper initialized: max_drawdown=15.0%, correlation_threshold=0.7, max_var=5.0% @ 95.0% confidence
ERROR    finance_feedback_engine.agent.trading_loop_agent:trading_loop_agent.py:122 Cannot start agent in signal-only mode without valid notification delivery.
Configuration errors: Telegram config missing
Please either:
1. Configure Telegram notifications (telegram.enabled=true, bot_token, chat_id)
2. Enable autonomous mode (autonomous.enabled=true)
=================================== FAILURES ===================================
_______________ TestPipelineIntegration.test_end_to_end_backfill _______________
.venv/lib/python3.13/site-packages/pandas/compat/_optional.py:135: in import_optional_dependency
    module = importlib.import_module(name)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'pyarrow'

During handling of the above exception, another exception occurred:
tests/integration/test_pipeline_integration.py:82: in test_end_to_end_backfill
    result = await ingestion_manager.ingest_historical_data(
finance_feedback_engine/pipelines/batch/batch_ingestion.py:194: in ingest_historical_data
    await self._write_to_delta(
finance_feedback_engine/pipelines/batch/batch_ingestion.py:396: in _write_to_delta
    await asyncio.to_thread(
/usr/lib/python3.13/asyncio/threads.py:25: in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/concurrent/futures/thread.py:59: in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/pipelines/storage/delta_lake_manager.py:114: in create_or_update_table
    self._save_as_parquet(df, table_name, mode)
finance_feedback_engine/pipelines/storage/delta_lake_manager.py:149: in _save_as_parquet
    df.to_parquet(filepath, index=False, engine="pyarrow")
.venv/lib/python3.13/site-packages/pandas/util/_decorators.py:333: in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/core/frame.py:3124: in to_parquet
    return to_parquet(
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:478: in to_parquet
    impl = get_engine(engine)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:79: in get_engine
    return PyArrowImpl()
           ^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:164: in __init__
    import_optional_dependency(
.venv/lib/python3.13/site-packages/pandas/compat/_optional.py:138: in import_optional_dependency
    raise ImportError(msg)
E   ImportError: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.pipelines.storage.delta_lake_manager:delta_lake_manager.py:42 PySpark not available, falling back to file-based storage. Delta Lake features limited.
WARNING  finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:174 Validation failed for 2 records
WARNING  finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:89 Saved 2 failed records to DLQ: data/dlq/dlq_2025-12-18T20-25-20.452234+00-00_0f196624.json
ERROR    finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:410 Delta Lake write failed: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
ERROR    finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:219 Ingestion failed for BTCUSD daily: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
____ TestBatchIngestionIntegration.test_ingestion_with_multiple_timeframes _____
.venv/lib/python3.13/site-packages/pandas/compat/_optional.py:135: in import_optional_dependency
    module = importlib.import_module(name)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/importlib/__init__.py:88: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   ModuleNotFoundError: No module named 'pyarrow'

During handling of the above exception, another exception occurred:
tests/integration/test_pipeline_integration.py:224: in test_ingestion_with_multiple_timeframes
    result = await ingestion_manager.ingest_historical_data(
finance_feedback_engine/pipelines/batch/batch_ingestion.py:194: in ingest_historical_data
    await self._write_to_delta(
finance_feedback_engine/pipelines/batch/batch_ingestion.py:396: in _write_to_delta
    await asyncio.to_thread(
/usr/lib/python3.13/asyncio/threads.py:25: in to_thread
    return await loop.run_in_executor(None, func_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/concurrent/futures/thread.py:59: in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/pipelines/storage/delta_lake_manager.py:114: in create_or_update_table
    self._save_as_parquet(df, table_name, mode)
finance_feedback_engine/pipelines/storage/delta_lake_manager.py:149: in _save_as_parquet
    df.to_parquet(filepath, index=False, engine="pyarrow")
.venv/lib/python3.13/site-packages/pandas/util/_decorators.py:333: in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/core/frame.py:3124: in to_parquet
    return to_parquet(
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:478: in to_parquet
    impl = get_engine(engine)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:79: in get_engine
    return PyArrowImpl()
           ^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:164: in __init__
    import_optional_dependency(
.venv/lib/python3.13/site-packages/pandas/compat/_optional.py:138: in import_optional_dependency
    raise ImportError(msg)
E   ImportError: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.pipelines.storage.delta_lake_manager:delta_lake_manager.py:42 PySpark not available, falling back to file-based storage. Delta Lake features limited.
ERROR    finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:410 Delta Lake write failed: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
ERROR    finance_feedback_engine.pipelines.batch.batch_ingestion:batch_ingestion.py:219 Ingestion failed for BTCUSD 1m: Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
_________________________ test_analyze_command_success _________________________
tests/test_cli_commands.py:15: in test_analyze_command_success
    assert result.exit_code == 0
E   assert 1 == 0
E    +  where 1 = <Result SystemExit(1)>.exit_code
_____________________ test_analyze_command_network_failure _____________________
tests/test_cli_commands.py:42: in test_analyze_command_network_failure
    assert "Traceback" not in result.output or result.exit_code == 0
E   assert ('Traceback' not in '{"timestamp...\nAborted!\n'
E     
E     'Traceback' is contained here:
E       {"timestamp": "2025-12-18T20:25:23.770354Z", "correlation_id": "36c5e0ad-a82b-4e33-9798-aee0e8903c3f", "level": "INFO", "logger": "finance_feedback_engine.monitoring.logging_config", "message": "Structured logging initialized", "module": "logging_config", "function": "setup_structured_logging", "line": 578, "context": {"taskName": null, "log_level": "INFO", "json_format": true, "correlation_ids": true, "pii_redaction": true, "file_logging": true}}
E       Using AI provider: local
E       {"timestamp": "2025-12-18T20:25:23.772217Z", "correlation_id": "36c5e0ad-a82b-4e33...
E     
E     ...Full output truncated (424 lines hidden), use '-vv' to show or 1 == 0)
E    +  where 1 = <Result SystemExit(1)>.exit_code
____________ TestAlphaVantageProvider.test_get_market_data_success _____________
tests/test_data_providers_comprehensive.py:44: in test_get_market_data_success
    data = asyncio.run(provider.get_market_data("AAPL"))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:306: in get_market_data
    market_data = await self._get_forex_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1679: in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 44, in test_get_market_data_success
    data = asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 44, in test_get_market_data_success
    data = asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1675, in _get_forex_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('AAPL', {'Note': 'We have detected your API key as test_key and our standard API rate limit is 25 requests per day. Please visit https://www.alphavantage.co/premium/ if you would like to target a higher API call frequency.'})
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 44, in test_get_market_data_success
    data = asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 44, in test_get_market_data_success
    data = asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1675 Unexpected response format for AAPL: {'Note': 'We have detected your API key as test_key and our standard API rate limit is 25 requests per day. Please visit https://www.alphavantage.co/premium/ if you would like to target a higher API call frequency.'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
_______ TestAlphaVantageProvider.test_circuit_breaker_opens_on_failures ________
tests/test_data_providers_comprehensive.py:75: in test_circuit_breaker_opens_on_failures
    assert provider.circuit_breaker.state.name in ["OPEN", "HALF_OPEN"]
E   AssertionError: assert 'CLOSED' in ['OPEN', 'HALF_OPEN']
E    +  where 'CLOSED' = <CircuitState.CLOSED: 'CLOSED'>.name
E    +    where <CircuitState.CLOSED: 'CLOSED'> = <finance_feedback_engine.utils.circuit_breaker.CircuitBreaker object at 0x7f13dfe558b0>.state
E    +      where <finance_feedback_engine.utils.circuit_breaker.CircuitBreaker object at 0x7f13dfe558b0> = <finance_feedback_engine.data_providers.alpha_vantage_provider.AlphaVantageProvider object at 0x7f13dfe54fc0>.circuit_breaker
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1675, in _get_forex_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('AAPL', {'Information': 'Thank you for using Alpha Vantage! Please consider spreading out your free API requests more sparingly (1 request per second). You may subscribe to any of the premium plans at https://www.alphavantage.co/premium/ to lift the free key rate limit (25 requests per day), raise the per-second burst limit, and instantly unlock all premium endpoints'})
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1685, in _get_forex_data
    logger.error("Error fetching forex data for %s: %s", asset_pair, e)
Message: 'Error fetching forex data for %s: %s'
Arguments: ('AAPL', RuntimeError('Event loop is closed'))
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1685, in _get_forex_data
    logger.error("Error fetching forex data for %s: %s", asset_pair, e)
Message: 'Error fetching forex data for %s: %s'
Arguments: ('AAPL', RuntimeError('Event loop is closed'))
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1685, in _get_forex_data
    logger.error("Error fetching forex data for %s: %s", asset_pair, e)
Message: 'Error fetching forex data for %s: %s'
Arguments: ('AAPL', RuntimeError('Event loop is closed'))
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1685, in _get_forex_data
    logger.error("Error fetching forex data for %s: %s", asset_pair, e)
Message: 'Error fetching forex data for %s: %s'
Arguments: ('AAPL', RuntimeError('Event loop is closed'))
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1563, in _get_forex_data
    data = await self.circuit_breaker.call(api_call)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 103, in call
    return await self._execute_with_circuit_async(async_runner, is_async=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 231, in _execute_with_circuit_async
    result = await runner()
             ^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 101, in async_runner
    return await func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1559, in api_call
    return await self._async_request(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
        params, timeout=self.timeout_market_data
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 217, in _async_request
    async with client.get(
               ~~~~~~~~~~^
        self.BASE_URL, params=params, timeout=timeout
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as resp:
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 158, in __aenter__
    return await self._do_request()
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp_retry/client.py", line 119, in _do_request
    response: ClientResponse = await self._request_func(
                               ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/client.py", line 596, in _request
    handle = tm.start()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/aiohttp/helpers.py", line 615, in start
    return self._loop.call_at(when, self.__call__)
           ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 812, in call_at
    self._check_closed()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/lib/python3.13/asyncio/base_events.py", line 556, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1687, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 70, in test_circuit_breaker_opens_on_failures
    asyncio.run(provider.get_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1675 Unexpected response format for AAPL: {'Information': 'Thank you for using Alpha Vantage! Please consider spreading out your free API requests more sparingly (1 request per second). You may subscribe to any of the premium plans at https://www.alphavantage.co/premium/ to lift the free key rate limit (25 requests per day), raise the per-second burst limit, and instantly unlock all premium endpoints'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1685 Error fetching forex data for AAPL: Event loop is closed
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1685 Error fetching forex data for AAPL: Event loop is closed
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1685 Error fetching forex data for AAPL: Event loop is closed
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1685 Error fetching forex data for AAPL: Event loop is closed
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
_________ TestAlphaVantageProvider.test_get_comprehensive_market_data __________
tests/test_data_providers_comprehensive.py:97: in test_get_comprehensive_market_data
    data = asyncio.run(provider.get_comprehensive_market_data("AAPL"))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1104: in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:306: in get_market_data
    market_data = await self._get_forex_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1679: in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 19, in provider
    return AlphaVantageProvider(api_key="test_key")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 97, in test_get_comprehensive_market_data
    data = asyncio.run(provider.get_comprehensive_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('AAPL', False)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 97, in test_get_comprehensive_market_data
    data = asyncio.run(provider.get_comprehensive_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1675, in _get_forex_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('AAPL', {'Information': 'Thank you for using Alpha Vantage! Please consider spreading out your free API requests more sparingly (1 request per second). You may subscribe to any of the premium plans at https://www.alphavantage.co/premium/ to lift the free key rate limit (25 requests per day), raise the per-second burst limit, and instantly unlock all premium endpoints'})
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 97, in test_get_comprehensive_market_data
    data = asyncio.run(provider.get_comprehensive_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 306, in get_market_data
    market_data = await self._get_forex_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1679, in _get_forex_data
    return self._create_mock_data(asset_pair, "forex")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 97, in test_get_comprehensive_market_data
    data = asyncio.run(provider.get_comprehensive_market_data("AAPL"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for AAPL (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1675 Unexpected response format for AAPL: {'Information': 'Thank you for using Alpha Vantage! Please consider spreading out your free API requests more sparingly (1 request per second). You may subscribe to any of the premium plans at https://www.alphavantage.co/premium/ to lift the free key rate limit (25 requests per day), raise the per-second burst limit, and instantly unlock all premium endpoints'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for AAPL: CRITICAL SAFETY VIOLATION: Attempted to create mock data for AAPL in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
_________________ TestCoinbaseDataProvider.test_initialization _________________
tests/test_data_providers_comprehensive.py:130: in test_initialization
    assert provider.api_key == "test_key"
           ^^^^^^^^^^^^^^^^
E   AttributeError: 'CoinbaseDataProvider' object has no attribute 'api_key'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 68, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('CoinbaseData', 3, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 72, in __init__
    logger.info("CoinbaseDataProvider initialized")
Message: 'CoinbaseDataProvider initialized'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 CoinbaseData initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.data_providers.coinbase_data:coinbase_data.py:72 CoinbaseDataProvider initialized
__________________ TestCoinbaseDataProvider.test_get_candles ___________________
tests/test_data_providers_comprehensive.py:142: in test_get_candles
    candles = provider.get_candles("BTC-USD", granularity=86400)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/coinbase_data.py:147: in get_candles
    raise ValueError(f"Unsupported granularity: {granularity}")
E   ValueError: Unsupported granularity: 86400
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 68, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('CoinbaseData', 3, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 72, in __init__
    logger.info("CoinbaseDataProvider initialized")
Message: 'CoinbaseDataProvider initialized'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 CoinbaseData initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.data_providers.coinbase_data:coinbase_data.py:72 CoinbaseDataProvider initialized
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 142, in test_get_candles
    candles = provider.get_candles("BTC-USD", granularity=86400)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 138, in get_candles
    logger.info(f"Fetching {granularity} candles for {asset_pair} from Coinbase")
Message: 'Fetching 86400 candles for BTC-USD from Coinbase'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 147, in get_candles
    raise ValueError(f"Unsupported granularity: {granularity}")
ValueError: Unsupported granularity: 86400

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 142, in test_get_candles
    candles = provider.get_candles("BTC-USD", granularity=86400)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 172, in get_candles
    logger.error(f"Failed to fetch Coinbase candles: {e}")
Message: 'Failed to fetch Coinbase candles: Unsupported granularity: 86400'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.coinbase_data:coinbase_data.py:138 Fetching 86400 candles for BTC-USD from Coinbase
ERROR    finance_feedback_engine.data_providers.coinbase_data:coinbase_data.py:172 Failed to fetch Coinbase candles: Unsupported granularity: 86400
_________________ TestCoinbaseDataProvider.test_get_portfolio __________________
tests/test_data_providers_comprehensive.py:157: in test_get_portfolio
    portfolio = provider.get_portfolio()
                ^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CoinbaseDataProvider' object has no attribute 'get_portfolio'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 68, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('CoinbaseData', 3, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 126, in provider
    return CoinbaseDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/coinbase_data.py", line 72, in __init__
    logger.info("CoinbaseDataProvider initialized")
Message: 'CoinbaseDataProvider initialized'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 CoinbaseData initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.data_providers.coinbase_data:coinbase_data.py:72 CoinbaseDataProvider initialized
____________________ TestOandaDataProvider.test_get_candles ____________________
tests/test_data_providers_comprehensive.py:203: in test_get_candles
    candles = provider.get_candles("EUR_USD", granularity="D")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/oanda_data.py:156: in get_candles
    raise ValueError(f"Unsupported granularity: {granularity}")
E   ValueError: Unsupported granularity: D
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 180, in provider
    return OandaDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 80, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('OandaData', 3, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 180, in provider
    return OandaDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 84, in __init__
    logger.info(f"OandaDataProvider initialized ({self.environment} environment)")
Message: 'OandaDataProvider initialized (practice environment)'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 OandaData initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.data_providers.oanda_data:oanda_data.py:84 OandaDataProvider initialized (practice environment)
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 203, in test_get_candles
    candles = provider.get_candles("EUR_USD", granularity="D")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 147, in get_candles
    logger.info(f"Fetching {granularity} candles for {asset_pair} from Oanda")
Message: 'Fetching D candles for EUR_USD from Oanda'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 156, in get_candles
    raise ValueError(f"Unsupported granularity: {granularity}")
ValueError: Unsupported granularity: D

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 203, in test_get_candles
    candles = provider.get_candles("EUR_USD", granularity="D")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 173, in get_candles
    logger.error(f"Failed to fetch Oanda candles: {e}")
Message: 'Failed to fetch Oanda candles: Unsupported granularity: D'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.oanda_data:oanda_data.py:147 Fetching D candles for EUR_USD from Oanda
ERROR    finance_feedback_engine.data_providers.oanda_data:oanda_data.py:173 Failed to fetch Oanda candles: Unsupported granularity: D
________________ TestOandaDataProvider.test_get_account_summary ________________
tests/test_data_providers_comprehensive.py:221: in test_get_account_summary
    summary = provider.get_account_summary()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'OandaDataProvider' object has no attribute 'get_account_summary'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 180, in provider
    return OandaDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 80, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('OandaData', 3, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 180, in provider
    return OandaDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/oanda_data.py", line 84, in __init__
    logger.info(f"OandaDataProvider initialized ({self.environment} environment)")
Message: 'OandaDataProvider initialized (practice environment)'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 OandaData initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.data_providers.oanda_data:oanda_data.py:84 OandaDataProvider initialized (practice environment)
________ TestUnifiedDataProvider.test_get_market_data_routes_correctly _________
tests/test_data_providers_comprehensive.py:266: in test_get_market_data_routes_correctly
    data = provider.get_market_data("AAPL")
           ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedDataProvider' object has no attribute 'get_market_data'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 68, in __init__
    logger.info("Alpha Vantage provider initialized (primary)")
Message: 'Alpha Vantage provider initialized (primary)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 93, in __init__
    logger.info("UnifiedDataProvider initialized with cascading fallback")
Message: 'UnifiedDataProvider initialized with cascading fallback'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:68 Alpha Vantage provider initialized (primary)
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:93 UnifiedDataProvider initialized with cascading fallback
_______ TestUnifiedDataProvider.test_get_crypto_data_routes_to_coinbase ________
tests/test_data_providers_comprehensive.py:278: in test_get_crypto_data_routes_to_coinbase
    data = provider.get_market_data("BTC-USD")
           ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedDataProvider' object has no attribute 'get_market_data'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 68, in __init__
    logger.info("Alpha Vantage provider initialized (primary)")
Message: 'Alpha Vantage provider initialized (primary)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 93, in __init__
    logger.info("UnifiedDataProvider initialized with cascading fallback")
Message: 'UnifiedDataProvider initialized with cascading fallback'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:68 Alpha Vantage provider initialized (primary)
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:93 UnifiedDataProvider initialized with cascading fallback
_________ TestUnifiedDataProvider.test_get_forex_data_routes_to_oanda __________
tests/test_data_providers_comprehensive.py:287: in test_get_forex_data_routes_to_oanda
    data = provider.get_market_data("EUR_USD")
           ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedDataProvider' object has no attribute 'get_market_data'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 68, in __init__
    logger.info("Alpha Vantage provider initialized (primary)")
Message: 'Alpha Vantage provider initialized (primary)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 93, in __init__
    logger.info("UnifiedDataProvider initialized with cascading fallback")
Message: 'UnifiedDataProvider initialized with cascading fallback'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:68 Alpha Vantage provider initialized (primary)
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:93 UnifiedDataProvider initialized with cascading fallback
__________ TestUnifiedDataProvider.test_fallback_on_provider_failure ___________
tests/test_data_providers_comprehensive.py:301: in test_fallback_on_provider_failure
    data = provider.get_market_data("AAPL")
           ^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedDataProvider' object has no attribute 'get_market_data'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 68, in __init__
    logger.info("Alpha Vantage provider initialized (primary)")
Message: 'Alpha Vantage provider initialized (primary)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 251, in provider
    return UnifiedDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/unified_data_provider.py", line 93, in __init__
    logger.info("UnifiedDataProvider initialized with cascading fallback")
Message: 'UnifiedDataProvider initialized with cascading fallback'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:68 Alpha Vantage provider initialized (primary)
INFO     finance_feedback_engine.data_providers.unified_data_provider:unified_data_provider.py:93 UnifiedDataProvider initialized with cascading fallback
________________ TestHistoricalDataProvider.test_initialization ________________
tests/test_data_providers_comprehensive.py:327: in test_initialization
    assert hasattr(provider, "alpha_vantage")
E   AssertionError: assert False
E    +  where False = hasattr(<finance_feedback_engine.data_providers.historical_data_provider.HistoricalDataProvider object at 0x7f13dfec39a0>, 'alpha_vantage')
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py", line 323, in provider
    return HistoricalDataProvider(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
__ TestCalculatePositionSizingParams.test_normal_mode_with_valid_balance_buy ___
tests/test_decision_engine_helpers.py:213: in test_normal_mode_with_valid_balance_buy
    params = decision_engine._calculate_position_sizing_params(
E   TypeError: DecisionEngine._calculate_position_sizing_params() missing 1 required positional argument: 'signal_only_default'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: mock'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: mock
__ TestCalculatePositionSizingParams.test_normal_mode_with_valid_balance_sell __
tests/test_decision_engine_helpers.py:234: in test_normal_mode_with_valid_balance_sell
    params = decision_engine._calculate_position_sizing_params(
E   TypeError: DecisionEngine._calculate_position_sizing_params() missing 1 required positional argument: 'signal_only_default'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: mock'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: mock
____ TestCalculatePositionSizingParams.test_hold_without_position_no_sizing ____
tests/test_decision_engine_helpers.py:250: in test_hold_without_position_no_sizing
    params = decision_engine._calculate_position_sizing_params(
E   TypeError: DecisionEngine._calculate_position_sizing_params() missing 1 required positional argument: 'signal_only_default'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: mock'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: mock
_ TestCalculatePositionSizingParams.test_hold_with_position_calculates_sizing __
tests/test_decision_engine_helpers.py:267: in test_hold_with_position_calculates_sizing
    params = decision_engine._calculate_position_sizing_params(
E   TypeError: DecisionEngine._calculate_position_sizing_params() missing 1 required positional argument: 'signal_only_default'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 27, in decision_engine
    return DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: mock'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: mock
_____ TestCalculatePositionSizingParams.test_legacy_percentage_conversion ______
tests/test_decision_engine_helpers.py:298: in test_legacy_percentage_conversion
    params = engine._calculate_position_sizing_params(
E   TypeError: DecisionEngine._calculate_position_sizing_params() missing 1 required positional argument: 'signal_only_default'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_helpers.py", line 293, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: mock'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: mock
________ TestMarketAnalysisHelpers.test_calculate_price_change_positive ________
tests/test_decision_engine_logic.py:175: in test_calculate_price_change_positive
    price_change = decision_engine._calculate_price_change(market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute '_calculate_price_change'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
________ TestMarketAnalysisHelpers.test_calculate_price_change_negative ________
tests/test_decision_engine_logic.py:181: in test_calculate_price_change_negative
    price_change = decision_engine._calculate_price_change(market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute '_calculate_price_change'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
_______ TestMarketAnalysisHelpers.test_calculate_price_change_zero_open ________
tests/test_decision_engine_logic.py:187: in test_calculate_price_change_zero_open
    price_change = decision_engine._calculate_price_change(market_data)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute '_calculate_price_change'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
_____________ TestMarketAnalysisHelpers.test_calculate_volatility ______________
tests/test_decision_engine_logic.py:193: in test_calculate_volatility
    volatility = decision_engine._calculate_volatility(market_data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute '_calculate_volatility'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
________ TestMarketAnalysisHelpers.test_calculate_volatility_zero_close ________
tests/test_decision_engine_logic.py:200: in test_calculate_volatility_zero_close
    volatility = decision_engine._calculate_volatility(market_data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute '_calculate_volatility'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 59, in decision_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
____________ TestEnsembleIntegration.test_ensemble_decision_mocked _____________
tests/test_decision_engine_logic.py:428: in test_ensemble_decision_mocked
    ensemble_engine.ensemble_manager,
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 67, in ensemble_engine
    return DecisionEngine(config, data_provider=mock_data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
________________ TestConfiguration.test_config_nested_structure ________________
tests/test_decision_engine_logic.py:526: in test_config_nested_structure
    assert engine.ai_provider == "local"
           ^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ai_provider'. Did you mean: 'data_provider'?
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: "Local models configured: ['llama3.2:3b', 'deepseek-r1:1.5b']"
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 525, in test_config_nested_structure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: ['llama3.2:3b', 'deepseek-r1:1.5b']
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
_____ TestConfiguration.test_config_flat_structure_backward_compatibility ______
tests/test_decision_engine_logic.py:534: in test_config_flat_structure_backward_compatibility
    assert engine.ai_provider == "cli"
           ^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ai_provider'. Did you mean: 'data_provider'?
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 533, in test_config_flat_structure_backward_compatibility
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
_____________ TestConfiguration.test_legacy_percentage_conversion ______________
tests/test_decision_engine_logic.py:547: in test_legacy_percentage_conversion
    assert engine.portfolio_stop_loss_percentage == 0.02
E   assert 2.0 == 0.02
E    +  where 2.0 = <finance_feedback_engine.decision_engine.engine.DecisionEngine object at 0x7f13dfb19910>.portfolio_stop_loss_percentage
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 106, in __init__
    self.validator = DecisionValidator(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/decision_validator.py", line 46, in __init__
    logger.warning(
Message: 'Detected legacy portfolio_stop_loss_percentage 2.0%. Converting to decimal: 0.020'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 106, in __init__
    self.validator = DecisionValidator(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/decision_validator.py", line 51, in __init__
    logger.warning(
Message: 'Detected legacy portfolio_take_profit_percentage 5.0%. Converting to decimal: 0.050'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py", line 546, in test_legacy_percentage_conversion
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.decision_engine.decision_validator:decision_validator.py:46 Detected legacy portfolio_stop_loss_percentage 2.0%. Converting to decimal: 0.020
WARNING  finance_feedback_engine.decision_engine.decision_validator:decision_validator.py:51 Detected legacy portfolio_take_profit_percentage 5.0%. Converting to decimal: 0.050
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
_ TestEnsembleProviderFailureTracking.test_ensemble_tracks_local_exception_as_failure _
tests/test_ensemble_error_propagation.py:50: in test_ensemble_tracks_local_exception_as_failure
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 32, in test_ensemble_tracks_local_exception_as_failure
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_ TestEnsembleProviderFailureTracking.test_ensemble_tracks_multiple_provider_failures _
tests/test_ensemble_error_propagation.py:96: in test_ensemble_tracks_multiple_provider_failures
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 77, in test_ensemble_tracks_multiple_provider_failures
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_ TestEnsembleProviderFailureTracking.test_ensemble_all_providers_fail_raises_error _
tests/test_ensemble_error_propagation.py:138: in test_ensemble_all_providers_fail_raises_error
    await engine._ensemble_ai_inference("test prompt")
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 127, in test_ensemble_all_providers_fail_raises_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_ TestSingleProviderFallbackBehavior.test_single_local_provider_returns_fallback_on_import_error _
finance_feedback_engine/decision_engine/engine.py:846: in _local_ai_inference
    provider = LocalLLMProvider(provider_config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   ImportError: ollama module not found

During handling of the above exception, another exception occurred:
tests/test_ensemble_error_propagation.py:158: in test_single_local_provider_returns_fallback_on_import_error
    decision = await engine._local_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:857: in _local_ai_inference
    "ensemble_mode": self.ai_provider == "ensemble",
                     ^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ai_provider'. Did you mean: 'data_provider'?
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 150, in test_single_local_provider_returns_fallback_on_import_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 158, in test_single_local_provider_returns_fallback_on_import_error
    decision = await engine._local_ai_inference("test prompt")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 834, in _local_ai_inference
    logger.info(f"Using local LLM AI inference (Ollama){model_info}")
Message: 'Using local LLM AI inference (Ollama)'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.decision_engine.engine:engine.py:834 Using local LLM AI inference (Ollama)
_ TestSingleProviderFallbackBehavior.test_single_local_provider_returns_fallback_on_runtime_error _
finance_feedback_engine/decision_engine/engine.py:846: in _local_ai_inference
    provider = LocalLLMProvider(provider_config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   RuntimeError: Cannot connect to Ollama service

During handling of the above exception, another exception occurred:
tests/test_ensemble_error_propagation.py:186: in test_single_local_provider_returns_fallback_on_runtime_error
    decision = await engine._local_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:874: in _local_ai_inference
    "ensemble_mode": self.ai_provider == "ensemble",
                     ^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ai_provider'. Did you mean: 'data_provider'?
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 178, in test_single_local_provider_returns_fallback_on_runtime_error
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 186, in test_single_local_provider_returns_fallback_on_runtime_error
    decision = await engine._local_ai_inference("test prompt")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 834, in _local_ai_inference
    logger.info(f"Using local LLM AI inference (Ollama){model_info}")
Message: 'Using local LLM AI inference (Ollama)'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.decision_engine.engine:engine.py:834 Using local LLM AI inference (Ollama)
_ TestSingleProviderFallbackBehavior.test_single_local_provider_returns_fallback_on_generic_exception _
finance_feedback_engine/decision_engine/engine.py:846: in _local_ai_inference
    provider = LocalLLMProvider(provider_config)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   ValueError: Invalid model configuration

During handling of the above exception, another exception occurred:
tests/test_ensemble_error_propagation.py:211: in test_single_local_provider_returns_fallback_on_generic_exception
    decision = await engine._local_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:891: in _local_ai_inference
    "ensemble_mode": self.ai_provider == "ensemble",
                     ^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ai_provider'. Did you mean: 'data_provider'?
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 203, in test_single_local_provider_returns_fallback_on_generic_exception
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 211, in test_single_local_provider_returns_fallback_on_generic_exception
    decision = await engine._local_ai_inference("test prompt")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 834, in _local_ai_inference
    logger.info(f"Using local LLM AI inference (Ollama){model_info}")
Message: 'Using local LLM AI inference (Ollama)'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.decision_engine.engine:engine.py:834 Using local LLM AI inference (Ollama)
_ TestLocalPriorityFallbackChain.test_local_priority_soft_falls_back_to_remote _
tests/test_ensemble_error_propagation.py:259: in test_local_priority_soft_falls_back_to_remote
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: "Local models configured: ['llama3.2:3b']"
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: soft'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 241, in test_local_priority_soft_falls_back_to_remote
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: ['llama3.2:3b']
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: soft
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_ TestLocalPriorityFallbackChain.test_local_priority_true_still_tracks_failure_properly _
tests/test_ensemble_error_propagation.py:307: in test_local_priority_true_still_tracks_failure_properly
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: "Local models configured: ['llama3.2:3b']"
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: True'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 289, in test_local_priority_true_still_tracks_failure_properly
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: ['llama3.2:3b']
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: True
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_____ TestProviderWeightAdjustment.test_weights_adjust_when_provider_fails _____
tests/test_ensemble_error_propagation.py:362: in test_weights_adjust_when_provider_fails
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 333, in test_weights_adjust_when_provider_fails
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_ TestEnsembleFallbackTiers.test_weighted_voting_falls_back_to_majority_on_insufficient_providers _
tests/test_ensemble_error_propagation.py:420: in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    decision = await engine._ensemble_ai_inference("test prompt")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/decision_engine/engine.py:740: in _ensemble_ai_inference
    if self.ensemble_manager.debate_mode:
       ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'DecisionEngine' object has no attribute 'ensemble_manager'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 104, in __init__
    self.ai_manager = AIDecisionManager(config, backtest_mode)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 30, in __init__
    self._get_ensemble_manager()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ai_decision_manager.py", line 35, in _get_ensemble_manager
    self.ensemble_manager = EnsembleDecisionManager(self.config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_error_propagation.py", line 402, in test_weighted_voting_falls_back_to_majority_on_insufficient_providers
    engine = DecisionEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: ensemble'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: ensemble
_________________ TestFallbackTiers.test_fallback_to_majority __________________
tests/test_ensemble_tiers.py:264: in test_fallback_to_majority
    assert result["ensemble_metadata"]["fallback_tier"] == "majority_fallback"
E   AssertionError: assert 'weighted' == 'majority_fallback'
E     
E     - majority_fallback
E     + weighted
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 56, in ensemble_manager
    return EnsembleDecisionManager(ensemble_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 261, in test_fallback_to_majority
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 284, in aggregate_decisions
    logger.info(
Message: 'Aggregating 2 provider decisions (0 failed, 0.0% failure rate)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 261, in test_fallback_to_majority
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 351, in aggregate_decisions
    final_decision = self._adjust_confidence_for_failures(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 935, in _adjust_confidence_for_failures
    logger.info(
Message: 'Confidence adjusted: 93  76 (factor: 0.820) due to 2/5 providers active'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 261, in test_fallback_to_majority
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 400, in aggregate_decisions
    logger.info(
Message: 'Ensemble decision: BUY (76%) - Agreement: 1.00'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:284 Aggregating 2 provider decisions (0 failed, 0.0% failure rate)
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:935 Confidence adjusted: 93  76 (factor: 0.820) due to 2/5 providers active
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:400 Ensemble decision: BUY (76%) - Agreement: 1.00
__________________ TestFallbackTiers.test_fallback_to_average __________________
tests/test_ensemble_tiers.py:298: in test_fallback_to_average
    assert (
E   AssertionError: assert 'weighted' == 'average_fallback'
E     
E     - average_fallback
E     + weighted
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 56, in ensemble_manager
    return EnsembleDecisionManager(ensemble_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 295, in test_fallback_to_average
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 284, in aggregate_decisions
    logger.info(
Message: 'Aggregating 2 provider decisions (0 failed, 0.0% failure rate)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 295, in test_fallback_to_average
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 351, in aggregate_decisions
    final_decision = self._adjust_confidence_for_failures(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 935, in _adjust_confidence_for_failures
    logger.info(
Message: 'Confidence adjusted: 83  68 (factor: 0.820) due to 2/5 providers active'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 295, in test_fallback_to_average
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 400, in aggregate_decisions
    logger.info(
Message: 'Ensemble decision: BUY (68%) - Agreement: 0.50'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:284 Aggregating 2 provider decisions (0 failed, 0.0% failure rate)
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:935 Confidence adjusted: 83  68 (factor: 0.820) due to 2/5 providers active
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:400 Ensemble decision: BUY (68%) - Agreement: 0.50
______________ TestFallbackTiers.test_fallback_to_single_provider ______________
tests/test_ensemble_tiers.py:329: in test_fallback_to_single_provider
    assert (
E   AssertionError: assert 'weighted' == 'single_provider'
E     
E     - single_provider
E     + weighted
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 458, in setup
    return super().setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 56, in ensemble_manager
    return EnsembleDecisionManager(ensemble_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 158, in __init__
    logger.info(
Message: 'Local-First Ensemble initialized. Target Local Dominance: 60%'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:158 Local-First Ensemble initialized. Target Local Dominance: 60%
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 326, in test_fallback_to_single_provider
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 284, in aggregate_decisions
    logger.info(
Message: 'Aggregating 1 provider decisions (0 failed, 0.0% failure rate)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 326, in test_fallback_to_single_provider
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 351, in aggregate_decisions
    final_decision = self._adjust_confidence_for_failures(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 935, in _adjust_confidence_for_failures
    logger.info(
Message: 'Confidence adjusted: 96  72 (factor: 0.760) due to 1/5 providers active'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_ensemble_tiers.py", line 326, in test_fallback_to_single_provider
    result = await ensemble_manager.aggregate_decisions(decisions)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py", line 400, in aggregate_decisions
    logger.info(
Message: 'Ensemble decision: BUY (72%) - Agreement: 1.00'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:284 Aggregating 1 provider decisions (0 failed, 0.0% failure rate)
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:935 Confidence adjusted: 96  72 (factor: 0.760) due to 1/5 providers active
INFO     finance_feedback_engine.decision_engine.ensemble_manager:ensemble_manager.py:400 Ensemble decision: BUY (72%) - Agreement: 1.00
___________________ test_learning_loop_calls_ensemble_update ___________________
tests/test_execute_safety.py:164: in test_learning_loop_calls_ensemble_update
    outcome = engine.record_trade_outcome("test-learn", exit_price=110.0)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:879: in record_trade_outcome
    outcome = self.memory_engine.record_trade_outcome(
finance_feedback_engine/memory/portfolio_memory.py:291: in record_trade_outcome
    self._update_provider_performance(outcome, decision)
finance_feedback_engine/memory/portfolio_memory.py:423: in _update_provider_performance
    stats = self.provider_performance[provider]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'ensemble'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 68, in __init__
    logger.info("Checking Ollama model installation...")
Message: 'Checking Ollama model installation...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 396, in ensure_models_installed
    if not self._check_disk_space(total_size + 5):  # +5GB buffer
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 91, in _check_disk_space
    logger.info(f"Disk space check: {free_gb:.1f}GB available")
Message: 'Disk space check: 669.9GB available'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 423, in ensure_models_installed
    logger.info("All required models already installed")
Message: 'All required models already installed'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 93, in __init__
    self.historical_data_provider = HistoricalDataProvider(api_key=api_key)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 122, in create_platform
    logger.info("Creating platform instance: %s", platform_name)
Message: 'Creating platform instance: %s'
Arguments: ('mock',)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 133, in create_platform
    instance = platform_class(credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 144, in create_platform
    breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('execute_trade:mock', 3, 60)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 212, in __init__
    self.decision_store = DecisionStore(persistence_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 35, in __init__
    logger.info(f"Decision store initialized at {self.storage_path}")
Message: 'Decision store initialized at /tmp/pytest-of-cmp6510/pytest-2/test_learning_loop_calls_ensem0/decisions'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 222, in __init__
    self.memory_engine = PortfolioMemoryEngine.load_from_disk(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 391, in load_from_disk
    instance = cls(config={})
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 168, in __init__
    self._load_memory()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 1230, in _load_memory
    logger.info(
Message: 'Loaded 0 outcomes and 0 snapshots from disk'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 222, in __init__
    self.memory_engine = PortfolioMemoryEngine.load_from_disk(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 391, in load_from_disk
    instance = cls(config={})
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 173, in __init__
    logger.info(
Message: 'Portfolio Memory Engine initialized with 0 experiences'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 222, in __init__
    self.memory_engine = PortfolioMemoryEngine.load_from_disk(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py", line 406, in load_from_disk
    logger.info(
Message: 'Portfolio memory loaded from data/memory/portfolio_memory.json: 1 trades'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 225, in __init__
    logger.info(f"Loaded portfolio memory from {memory_path}")
Message: 'Loaded portfolio memory from data/memory/portfolio_memory.json'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 252, in __init__
    logger.info("Portfolio Memory Engine enabled")
Message: 'Portfolio Memory Engine enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 128, in test_learning_loop_calls_ensemble_update
    engine = FinanceFeedbackEngine(cfg)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 278, in __init__
    logger.info("Finance Feedback Engine initialized successfully")
Message: 'Finance Feedback Engine initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 951, in wrapper
    return self._call_with_time_factory(time_factory, func=func, args=args, kwargs=kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/freezegun/api.py", line 934, in _call_with_time_factory
    result = func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_execute_safety.py", line 161, in test_learning_loop_calls_ensemble_update
    engine.decision_store.save_decision(decision)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 59, in save_decision
    logger.info(f"Decision saved: {filepath}")
Message: 'Decision saved: /tmp/pytest-of-cmp6510/pytest-2/test_learning_loop_calls_ensem0/decisions/2025-01-01_test-learn.json'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.core:core.py:68 Checking Ollama model installation...
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:91 Disk space check: 669.9GB available
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:423 All required models already installed
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
INFO     finance_feedback_engine.trading_platforms.platform_factory:platform_factory.py:122 Creating platform instance: mock
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 execute_trade:mock initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:35 Decision store initialized at /tmp/pytest-of-cmp6510/pytest-2/test_learning_loop_calls_ensem0/decisions
INFO     finance_feedback_engine.memory.portfolio_memory:portfolio_memory.py:1230 Loaded 0 outcomes and 0 snapshots from disk
INFO     finance_feedback_engine.memory.portfolio_memory:portfolio_memory.py:173 Portfolio Memory Engine initialized with 0 experiences
INFO     finance_feedback_engine.memory.portfolio_memory:portfolio_memory.py:406 Portfolio memory loaded from data/memory/portfolio_memory.json: 1 trades
INFO     finance_feedback_engine.core:core.py:225 Loaded portfolio memory from data/memory/portfolio_memory.json
INFO     finance_feedback_engine.core:core.py:252 Portfolio Memory Engine enabled
INFO     finance_feedback_engine.core:core.py:278 Finance Feedback Engine initialized successfully
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:59 Decision saved: /tmp/pytest-of-cmp6510/pytest-2/test_learning_loop_calls_ensem0/decisions/2025-01-01_test-learn.json
________________ TestHistoricalDataProvider.test_fetch_raw_data ________________
/usr/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'finance_feedback_engine.data_providers.historical_data_provider' has no attribute 'asyncio'
____________ TestHistoricalDataProvider.test_fetch_raw_data_caching ____________
/usr/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/usr/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'finance_feedback_engine.data_providers.historical_data_provider' has no attribute 'asyncio'
____ TestHistoricalDataProviderIntegration.test_full_workflow_without_cache ____
tests/test_historical_data_provider_implementation.py:494: in test_full_workflow_without_cache
    with patch(
/usr/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'finance_feedback_engine.data_providers.historical_data_provider' has no attribute 'asyncio'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_historical_data_provider_implementation.py", line 490, in test_full_workflow_without_cache
    provider = HistoricalDataProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
_____ TestHistoricalDataProviderIntegration.test_full_workflow_with_cache ______
tests/test_historical_data_provider_implementation.py:534: in test_full_workflow_with_cache
    with patch(
/usr/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'finance_feedback_engine.data_providers.historical_data_provider' has no attribute 'asyncio'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_historical_data_provider_implementation.py", line 530, in test_full_workflow_with_cache
    provider = HistoricalDataProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
_____________ TestRedisManager.test_ensure_running_already_running _____________
tests/test_integrations_telegram_redis.py:232: in test_ensure_running_already_running
    redis_manager.ensure_running()
finance_feedback_engine/integrations/redis_manager.py:414: in ensure_running
    if not cls.prompt_user_install():
           ^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/integrations/redis_manager.py:69: in prompt_user_install
    result = Confirm.ask(
.venv/lib/python3.13/site-packages/rich/prompt.py:149: in ask
    return _prompt(default=default, stream=stream)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/rich/prompt.py:292: in __call__
    value = self.get_input(self.console, prompt, self.password, stream=stream)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/rich/prompt.py:211: in get_input
    return console.input(prompt, password=password, stream=stream)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/rich/console.py:2170: in input
    result = input()
             ^^^^^^^
.venv/lib/python3.13/site-packages/_pytest/capture.py:229: in read
    raise OSError(
E   OSError: pytest: reading from stdin while output is captured!  Consider using `-s`.
----------------------------- Captured stdout call -----------------------------
 Redis not found. Required for Telegram approval queue. Install now? [y/n] 
(y): 
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 232, in test_ensure_running_already_running
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 404, in ensure_running
    logger.warning("  Redis not found on localhost:6379")
Message: '  Redis not found on localhost:6379'
Arguments: ()
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.integrations.redis_manager:redis_manager.py:404   Redis not found on localhost:6379
_____________ TestRedisManager.test_ensure_running_docker_fallback _____________
tests/test_integrations_telegram_redis.py:250: in test_ensure_running_docker_fallback
    assert any("docker" in str(call) for call in mock_run.call_args_list)
E   assert False
E    +  where False = any(<generator object TestRedisManager.test_ensure_running_docker_fallback.<locals>.<genexpr> at 0x7f13ddce0660>)
----------------------------- Captured stdout call -----------------------------
 Redis not found. Required for Telegram approval queue. Install now? [y/n] 
(y): 
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 247, in test_ensure_running_docker_fallback
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 404, in ensure_running
    logger.warning("  Redis not found on localhost:6379")
Message: '  Redis not found on localhost:6379'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 247, in test_ensure_running_docker_fallback
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 422, in ensure_running
    logger.info(f"  Detected OS: {os_type}")
Message: '  Detected OS: linux'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 247, in test_ensure_running_docker_fallback
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 427, in ensure_running
    success = cls.install_redis_linux()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 118, in install_redis_linux
    logger.info(" Installing Redis via apt-get (requires sudo)...")
Message: ' Installing Redis via apt-get (requires sudo)...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 247, in test_ensure_running_docker_fallback
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 427, in ensure_running
    success = cls.install_redis_linux()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 201, in install_redis_linux
    logger.info(
Message: ' Redis installed and started via systemd (redis)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_integrations_telegram_redis.py", line 247, in test_ensure_running_docker_fallback
    redis_manager.ensure_running()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/integrations/redis_manager.py", line 448, in ensure_running
    logger.error(" Redis installed but not responding")
Message: ' Redis installed but not responding'
Arguments: ()
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.integrations.redis_manager:redis_manager.py:404   Redis not found on localhost:6379
INFO     finance_feedback_engine.integrations.redis_manager:redis_manager.py:422   Detected OS: linux
INFO     finance_feedback_engine.integrations.redis_manager:redis_manager.py:118  Installing Redis via apt-get (requires sudo)...
INFO     finance_feedback_engine.integrations.redis_manager:redis_manager.py:201  Redis installed and started via systemd (redis)
ERROR    finance_feedback_engine.integrations.redis_manager:redis_manager.py:448  Redis installed but not responding
_________________ TestRedisManager.test_is_redis_running_true __________________
tests/test_integrations_telegram_redis.py:257: in test_is_redis_running_true
    assert redis_manager.is_redis_running() is True
E   assert False is True
E    +  where False = <function RedisManager.is_redis_running at 0x7f13de198d60>()
E    +    where <function RedisManager.is_redis_running at 0x7f13de198d60> = <finance_feedback_engine.integrations.redis_manager.RedisManager object at 0x7f13de02bce0>.is_redis_running
__________________ TestTunnelManager.test_start_ngrok_tunnel ___________________
finance_feedback_engine/integrations/tunnel_manager.py:140: in _setup_ngrok_tunnel
    from pyngrok import conf, ngrok
E   ModuleNotFoundError: No module named 'pyngrok'

During handling of the above exception, another exception occurred:
tests/test_integrations_telegram_redis.py:302: in test_start_ngrok_tunnel
    tunnel_manager.start_ngrok_tunnel(port=8000)
finance_feedback_engine/integrations/tunnel_manager.py:225: in start_ngrok_tunnel
    return self._setup_ngrok_tunnel(port)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/integrations/tunnel_manager.py:170: in _setup_ngrok_tunnel
    raise RuntimeError(
E   RuntimeError: pyngrok not installed. Install with: pip install pyngrok
_______________ TestTunnelManager.test_install_ngrok_if_missing ________________
tests/test_integrations_telegram_redis.py:318: in test_install_ngrok_if_missing
    assert mock_run.called
E   AssertionError: assert False
E    +  where False = <MagicMock name='run' id='139723302304272'>.called
______________ TestTunnelManager.test_get_tunnel_url_returns_url _______________
finance_feedback_engine/integrations/tunnel_manager.py:140: in _setup_ngrok_tunnel
    from pyngrok import conf, ngrok
E   ModuleNotFoundError: No module named 'pyngrok'

During handling of the above exception, another exception occurred:
tests/test_integrations_telegram_redis.py:327: in test_get_tunnel_url_returns_url
    url = tunnel_manager.get_tunnel_url()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/integrations/tunnel_manager.py:221: in get_tunnel_url
    return self.get_public_url(port)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/integrations/tunnel_manager.py:72: in get_public_url
    return self._setup_ngrok_tunnel(port)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/integrations/tunnel_manager.py:170: in _setup_ngrok_tunnel
    raise RuntimeError(
E   RuntimeError: pyngrok not installed. Install with: pip install pyngrok
______________________ TestTunnelManager.test_stop_tunnel ______________________
tests/test_integrations_telegram_redis.py:341: in test_stop_tunnel
    assert mock_process.terminate.called or mock_process.kill.called
E   AssertionError: assert (False or False)
E    +  where False = <Mock name='mock.terminate' id='139723304960752'>.called
E    +    where <Mock name='mock.terminate' id='139723304960752'> = <Mock id='139723304960416'>.terminate
E    +  and   False = <Mock name='mock.kill' id='139723304961088'>.called
E    +    where <Mock name='mock.kill' id='139723304961088'> = <Mock id='139723304960416'>.kill
________________ TestTunnelManager.test_custom_domain_scaffold _________________
tests/test_integrations_telegram_redis.py:345: in test_custom_domain_scaffold
    config = tunnel_manager.generate_custom_domain_config("example.com")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: TunnelManager.generate_custom_domain_config() takes 1 positional argument but 2 were given
___________________ test_decision_generation_with_monitoring ___________________
tests/test_monitoring_integration.py:94: in test_decision_generation_with_monitoring
    market_data = asyncio.run(engine.data_provider.get_market_data("BTCUSD"))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:302: in get_market_data
    market_data = await self._get_crypto_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1512: in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 68, in __init__
    logger.info("Checking Ollama model installation...")
Message: 'Checking Ollama model installation...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 396, in ensure_models_installed
    if not self._check_disk_space(total_size + 5):  # +5GB buffer
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 91, in _check_disk_space
    logger.info(f"Disk space check: {free_gb:.1f}GB available")
Message: 'Disk space check: 669.9GB available'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 423, in ensure_models_installed
    logger.info("All required models already installed")
Message: 'All required models already installed'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 93, in __init__
    self.historical_data_provider = HistoricalDataProvider(api_key=api_key)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 122, in create_platform
    logger.info("Creating platform instance: %s", platform_name)
Message: 'Creating platform instance: %s'
Arguments: ('mock',)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 133, in create_platform
    instance = platform_class(credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 144, in create_platform
    breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('execute_trade:mock', 3, 60)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 212, in __init__
    self.decision_store = DecisionStore(persistence_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 35, in __init__
    logger.info(f"Decision store initialized at {self.storage_path}")
Message: 'Decision store initialized at data/decisions_test'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 286, in _auto_enable_monitoring
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 289, in _auto_enable_monitoring
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 296, in _auto_enable_monitoring
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 298, in _auto_enable_monitoring
    logger.info(
Message: 'Monitoring context auto-enabled - AI has position awareness by default'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 278, in __init__
    logger.info("Finance Feedback Engine initialized successfully")
Message: 'Finance Feedback Engine initialized successfully'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.core:core.py:68 Checking Ollama model installation...
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:91 Disk space check: 669.9GB available
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:423 All required models already installed
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
INFO     finance_feedback_engine.trading_platforms.platform_factory:platform_factory.py:122 Creating platform instance: mock
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 execute_trade:mock initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:35 Decision store initialized at data/decisions_test
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:298 Monitoring context auto-enabled - AI has position awareness by default
INFO     finance_feedback_engine.core:core.py:278 Finance Feedback Engine initialized successfully
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 91, in test_decision_generation_with_monitoring
    provider = MonitoringContextProvider(platform=engine.trading_platform)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 92, in test_decision_generation_with_monitoring
    engine.decision_engine.set_monitoring_context(provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 94, in test_decision_generation_with_monitoring
    market_data = asyncio.run(engine.data_provider.get_market_data("BTCUSD"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('BTCUSD', False)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 94, in test_decision_generation_with_monitoring
    market_data = asyncio.run(engine.data_provider.get_market_data("BTCUSD"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1508, in _get_crypto_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('BTCUSD', {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'})
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 94, in test_decision_generation_with_monitoring
    market_data = asyncio.run(engine.data_provider.get_market_data("BTCUSD"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 94, in test_decision_generation_with_monitoring
    market_data = asyncio.run(engine.data_provider.get_market_data("BTCUSD"))
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for BTCUSD (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1508 Unexpected response format for BTCUSD: {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
___________________ test_end_to_end_decision_with_monitoring ___________________
finance_feedback_engine/core.py:431: in analyze_asset
    asyncio.get_running_loop()
E   RuntimeError: no running event loop

During handling of the above exception, another exception occurred:
tests/test_monitoring_integration.py:132: in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:433: in analyze_asset
    return asyncio.run(
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:463: in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1104: in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:302: in get_market_data
    market_data = await self._get_crypto_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1512: in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 68, in __init__
    logger.info("Checking Ollama model installation...")
Message: 'Checking Ollama model installation...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 396, in ensure_models_installed
    if not self._check_disk_space(total_size + 5):  # +5GB buffer
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 91, in _check_disk_space
    logger.info(f"Disk space check: {free_gb:.1f}GB available")
Message: 'Disk space check: 669.9GB available'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 423, in ensure_models_installed
    logger.info("All required models already installed")
Message: 'All required models already installed'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 93, in __init__
    self.historical_data_provider = HistoricalDataProvider(api_key=api_key)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 122, in create_platform
    logger.info("Creating platform instance: %s", platform_name)
Message: 'Creating platform instance: %s'
Arguments: ('mock',)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 133, in create_platform
    instance = platform_class(credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 144, in create_platform
    breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('execute_trade:mock', 3, 60)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 212, in __init__
    self.decision_store = DecisionStore(persistence_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 35, in __init__
    logger.info(f"Decision store initialized at {self.storage_path}")
Message: 'Decision store initialized at data/decisions_test'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 286, in _auto_enable_monitoring
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 289, in _auto_enable_monitoring
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 296, in _auto_enable_monitoring
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 298, in _auto_enable_monitoring
    logger.info(
Message: 'Monitoring context auto-enabled - AI has position awareness by default'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 278, in __init__
    logger.info("Finance Feedback Engine initialized successfully")
Message: 'Finance Feedback Engine initialized successfully'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.core:core.py:68 Checking Ollama model installation...
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:91 Disk space check: 669.9GB available
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:423 All required models already installed
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
INFO     finance_feedback_engine.trading_platforms.platform_factory:platform_factory.py:122 Creating platform instance: mock
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 execute_trade:mock initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:35 Decision store initialized at data/decisions_test
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:298 Monitoring context auto-enabled - AI has position awareness by default
INFO     finance_feedback_engine.core:core.py:278 Finance Feedback Engine initialized successfully
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 126, in test_end_to_end_decision_with_monitoring
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 128, in test_end_to_end_decision_with_monitoring
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 400, in enable_monitoring_integration
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 128, in test_end_to_end_decision_with_monitoring
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 407, in enable_monitoring_integration
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 128, in test_end_to_end_decision_with_monitoring
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 409, in enable_monitoring_integration
    logger.info(
Message: 'Monitoring context integration enabled - AI will have full awareness of active positions/trades'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 132, in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 460, in analyze_asset_async
    logger.info("Analyzing asset: %s", asset_pair)
Message: 'Analyzing asset: %s'
Arguments: ('BTCUSD',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 132, in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('BTCUSD', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 132, in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1508, in _get_crypto_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('BTCUSD', {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'})
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 132, in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 132, in test_end_to_end_decision_with_monitoring
    decision = engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:409 Monitoring context integration enabled - AI will have full awareness of active positions/trades
INFO     finance_feedback_engine.core:core.py:460 Analyzing asset: BTCUSD
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for BTCUSD (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1508 Unexpected response format for BTCUSD: {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
_____________________ test_monitoring_provider_persistence _____________________
finance_feedback_engine/core.py:431: in analyze_asset
    asyncio.get_running_loop()
E   RuntimeError: no running event loop

During handling of the above exception, another exception occurred:
tests/test_monitoring_integration.py:154: in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
finance_feedback_engine/core.py:433: in analyze_asset
    return asyncio.run(
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:463: in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1104: in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:302: in get_market_data
    market_data = await self._get_crypto_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1512: in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 68, in __init__
    logger.info("Checking Ollama model installation...")
Message: 'Checking Ollama model installation...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 396, in ensure_models_installed
    if not self._check_disk_space(total_size + 5):  # +5GB buffer
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 91, in _check_disk_space
    logger.info(f"Disk space check: {free_gb:.1f}GB available")
Message: 'Disk space check: 669.9GB available'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 423, in ensure_models_installed
    logger.info("All required models already installed")
Message: 'All required models already installed'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 93, in __init__
    self.historical_data_provider = HistoricalDataProvider(api_key=api_key)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 122, in create_platform
    logger.info("Creating platform instance: %s", platform_name)
Message: 'Creating platform instance: %s'
Arguments: ('mock',)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 133, in create_platform
    instance = platform_class(credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 144, in create_platform
    breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('execute_trade:mock', 3, 60)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 212, in __init__
    self.decision_store = DecisionStore(persistence_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 35, in __init__
    logger.info(f"Decision store initialized at {self.storage_path}")
Message: 'Decision store initialized at data/decisions_test'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 286, in _auto_enable_monitoring
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 289, in _auto_enable_monitoring
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 296, in _auto_enable_monitoring
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 298, in _auto_enable_monitoring
    logger.info(
Message: 'Monitoring context auto-enabled - AI has position awareness by default'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 24, in mock_engine_with_monitoring
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 278, in __init__
    logger.info("Finance Feedback Engine initialized successfully")
Message: 'Finance Feedback Engine initialized successfully'
Arguments: ()
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.core:core.py:68 Checking Ollama model installation...
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:91 Disk space check: 669.9GB available
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:423 All required models already installed
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
INFO     finance_feedback_engine.trading_platforms.platform_factory:platform_factory.py:122 Creating platform instance: mock
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 execute_trade:mock initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:35 Decision store initialized at data/decisions_test
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:298 Monitoring context auto-enabled - AI has position awareness by default
INFO     finance_feedback_engine.core:core.py:278 Finance Feedback Engine initialized successfully
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 144, in test_monitoring_provider_persistence
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 146, in test_monitoring_provider_persistence
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 400, in enable_monitoring_integration
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 146, in test_monitoring_provider_persistence
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 407, in enable_monitoring_integration
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 146, in test_monitoring_provider_persistence
    engine.enable_monitoring_integration(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 409, in enable_monitoring_integration
    logger.info(
Message: 'Monitoring context integration enabled - AI will have full awareness of active positions/trades'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 154, in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 460, in analyze_asset_async
    logger.info("Analyzing asset: %s", asset_pair)
Message: 'Analyzing asset: %s'
Arguments: ('BTCUSD',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 154, in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('BTCUSD', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 154, in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1508, in _get_crypto_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('BTCUSD', {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'})
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 154, in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_monitoring_integration.py", line 154, in test_monitoring_provider_persistence
    engine.analyze_asset("BTCUSD")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:409 Monitoring context integration enabled - AI will have full awareness of active positions/trades
INFO     finance_feedback_engine.core:core.py:460 Analyzing asset: BTCUSD
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for BTCUSD (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1508 Unexpected response format for BTCUSD: {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
____ TestCoinbaseProductIdFormatting.test_format_product_id_whitespace_only ____
tests/test_platform_error_handling.py:253: in test_format_product_id_whitespace_only
    with pytest.raises(ValueError, match="asset_pair cannot be empty"):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'ValueError'>
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 60, in coinbase_platform
    return ConcreteCoinbasePlatform(coinbase_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 62, in __init__
    logger.info(
Message: 'Coinbase Advanced platform initialized (sandbox=%s)'
Arguments: (True,)
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:62 Coinbase Advanced platform initialized (sandbox=True)
___ TestCoinbasePortfolioBreakdown.test_get_portfolio_breakdown_import_error ___
tests/test_platform_error_handling.py:305: in test_get_portfolio_breakdown_import_error
    coinbase_platform.get_portfolio_breakdown()
finance_feedback_engine/trading_platforms/coinbase_platform.py:271: in get_portfolio_breakdown
    client = self._get_client()
             ^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   ImportError: No module
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 60, in coinbase_platform
    return ConcreteCoinbasePlatform(coinbase_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 62, in __init__
    logger.info(
Message: 'Coinbase Advanced platform initialized (sandbox=%s)'
Arguments: (True,)
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:62 Coinbase Advanced platform initialized (sandbox=True)
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 305, in test_get_portfolio_breakdown_import_error
    coinbase_platform.get_portfolio_breakdown()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 268, in get_portfolio_breakdown
    logger.info("Fetching complete account breakdown")
Message: 'Fetching complete account breakdown'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 271, in get_portfolio_breakdown
    client = self._get_client()
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
ImportError: No module

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 305, in test_get_portfolio_breakdown_import_error
    coinbase_platform.get_portfolio_breakdown()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 508, in get_portfolio_breakdown
    logger.error("Error fetching portfolio breakdown: %s", e)
Message: 'Error fetching portfolio breakdown: %s'
Arguments: (ImportError('No module'),)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:268 Fetching complete account breakdown
ERROR    finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:508 Error fetching portfolio breakdown: No module
_ TestCoinbasePortfolioBreakdown.test_get_portfolio_breakdown_futures_error_continues_with_spot _
tests/test_platform_error_handling.py:344: in test_get_portfolio_breakdown_futures_error_continues_with_spot
    result = coinbase_platform.get_portfolio_breakdown()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/trading_platforms/coinbase_platform.py:279: in get_portfolio_breakdown
    futures_response = client.get_futures_balance_summary()
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   Exception: Futures error
---------------------------- Captured stderr setup -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 131, in runtestprotocol
    rep = call_and_report(item, "setup", log)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 165, in pytest_runtest_setup
    item.session._setupstate.setup(item)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 523, in setup
    col.setup()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1723, in setup
    self._request._fillfixtures()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 707, in _fillfixtures
    item.funcargs[argname] = self.getfixturevalue(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 539, in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 627, in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1110, in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 1202, in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/fixtures.py", line 915, in call_fixture_func
    fixture_result = fixturefunc(**kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 60, in coinbase_platform
    return ConcreteCoinbasePlatform(coinbase_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 62, in __init__
    logger.info(
Message: 'Coinbase Advanced platform initialized (sandbox=%s)'
Arguments: (True,)
------------------------------ Captured log setup ------------------------------
INFO     finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:62 Coinbase Advanced platform initialized (sandbox=True)
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 344, in test_get_portfolio_breakdown_futures_error_continues_with_spot
    result = coinbase_platform.get_portfolio_breakdown()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 268, in get_portfolio_breakdown
    logger.info("Fetching complete account breakdown")
Message: 'Fetching complete account breakdown'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 279, in get_portfolio_breakdown
    futures_response = client.get_futures_balance_summary()
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
Exception: Futures error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 344, in test_get_portfolio_breakdown_futures_error_continues_with_spot
    result = coinbase_platform.get_portfolio_breakdown()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 396, in get_portfolio_breakdown
    logger.error("Error fetching futures data: %s", e)
Message: 'Error fetching futures data: %s'
Arguments: (Exception('Futures error'),)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 279, in get_portfolio_breakdown
    futures_response = client.get_futures_balance_summary()
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
Exception: Futures error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 344, in test_get_portfolio_breakdown_futures_error_continues_with_spot
    result = coinbase_platform.get_portfolio_breakdown()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/coinbase_platform.py", line 508, in get_portfolio_breakdown
    logger.error("Error fetching portfolio breakdown: %s", e)
Message: 'Error fetching portfolio breakdown: %s'
Arguments: (Exception('Futures error'),)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:268 Fetching complete account breakdown
ERROR    finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:396 Error fetching futures data: Futures error
ERROR    finance_feedback_engine.trading_platforms.coinbase_platform:coinbase_platform.py:508 Error fetching portfolio breakdown: Futures error
______ TestOandaConnectionErrors.test_client_initialization_import_error _______
/usr/lib/python3.13/logging/__init__.py:1154: in emit
    stream.write(msg + self.terminator)
E   ValueError: I/O operation on closed file.

During handling of the above exception, another exception occurred:
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/traceback.py:707: in _should_show_carets
    import ast
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/traceback.py:590: in format_frame_summary
    anchors = _extract_caret_anchors_from_line_segment(segment)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/traceback.py:812: in _extract_caret_anchors_from_line_segment
    import ast
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
finance_feedback_engine/trading_platforms/oanda_platform.py:80: in _get_client
    from oandapyV20 import API
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/traceback.py:707: in _should_show_carets
    import ast
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/traceback.py:590: in format_frame_summary
    anchors = _extract_caret_anchors_from_line_segment(segment)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/traceback.py:812: in _extract_caret_anchors_from_line_segment
    import ast
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
/usr/lib/python3.13/linecache.py:90: in checkcache
    import os
/usr/lib/python3.13/unittest/mock.py:1169: in __call__
    return self._mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1173: in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/unittest/mock.py:1228: in _execute_mock_call
    raise effect
E   ImportError: No module named 'oandapyV20'

During handling of the above exception, another exception occurred:
tests/test_platform_error_handling.py:402: in test_client_initialization_import_error
    platform._get_client()
finance_feedback_engine/trading_platforms/oanda_platform.py:91: in _get_client
    raise ValueError("Oanda library not available. " "Install oandapyV20")
E   ValueError: Oanda library not available. Install oandapyV20

During handling of the above exception, another exception occurred:
tests/test_platform_error_handling.py:401: in test_client_initialization_import_error
    with pytest.raises(ValueError, match="oandapyV20 library not available"):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: Regex pattern did not match.
E     Expected regex: 'oandapyV20 library not available'
E     Actual message: 'Oanda library not available. Install oandapyV20'
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 400, in test_client_initialization_import_error
    platform = OandaPlatform(oanda_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 65, in __init__
    logger.info(
Message: 'Oanda platform initialized (%s environment, base_url=%s)'
Arguments: ('practice', 'https://api-fxpractice.oanda.com')
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 402, in test_client_initialization_import_error
    platform._get_client()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 88, in _get_client
    logger.warning(
Message: 'oandapyV20 not installed. Install with: pip install oandapyV20'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:65 Oanda platform initialized (practice environment, base_url=https://api-fxpractice.oanda.com)
WARNING  finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:88 oandapyV20 not installed. Install with: pip install oandapyV20
_________ TestOandaConnectionErrors.test_get_balance_connection_error __________
tests/test_platform_error_handling.py:412: in test_get_balance_connection_error
    with pytest.raises(Exception):
         ^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'Exception'>
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 407, in test_get_balance_connection_error
    platform = OandaPlatform(oanda_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 65, in __init__
    logger.info(
Message: 'Oanda platform initialized (%s environment, base_url=%s)'
Arguments: ('practice', 'https://api-fxpractice.oanda.com')
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 413, in test_get_balance_connection_error
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 107, in get_balance
    logger.info("Fetching Oanda balances")
Message: 'Fetching Oanda balances'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 117, in get_balance
    response = client.request(request)
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
requests.exceptions.ConnectionError: Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 413, in test_get_balance_connection_error
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 140, in get_balance
    logger.error("Error fetching Oanda balances: %s", e)
Message: 'Error fetching Oanda balances: %s'
Arguments: (ConnectionError('Connection refused'),)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:65 Oanda platform initialized (practice environment, base_url=https://api-fxpractice.oanda.com)
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:107 Fetching Oanda balances
ERROR    finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:140 Error fetching Oanda balances: Connection refused
______________ TestOandaConnectionErrors.test_get_balance_timeout ______________
tests/test_platform_error_handling.py:423: in test_get_balance_timeout
    with pytest.raises(Exception):
         ^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'Exception'>
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 418, in test_get_balance_timeout
    platform = OandaPlatform(oanda_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 65, in __init__
    logger.info(
Message: 'Oanda platform initialized (%s environment, base_url=%s)'
Arguments: ('practice', 'https://api-fxpractice.oanda.com')
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 424, in test_get_balance_timeout
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 107, in get_balance
    logger.info("Fetching Oanda balances")
Message: 'Fetching Oanda balances'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 117, in get_balance
    response = client.request(request)
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
requests.exceptions.Timeout: Request timeout

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 424, in test_get_balance_timeout
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 140, in get_balance
    logger.error("Error fetching Oanda balances: %s", e)
Message: 'Error fetching Oanda balances: %s'
Arguments: (Timeout('Request timeout'),)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:65 Oanda platform initialized (practice environment, base_url=https://api-fxpractice.oanda.com)
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:107 Fetching Oanda balances
ERROR    finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:140 Error fetching Oanda balances: Request timeout
________ TestOandaResponseErrors.test_get_balance_missing_account_field ________
tests/test_platform_error_handling.py:438: in test_get_balance_missing_account_field
    with pytest.raises(Exception):  # Will raise KeyError or similar
         ^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'Exception'>
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 433, in test_get_balance_missing_account_field
    platform = OandaPlatform(oanda_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 65, in __init__
    logger.info(
Message: 'Oanda platform initialized (%s environment, base_url=%s)'
Arguments: ('practice', 'https://api-fxpractice.oanda.com')
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 439, in test_get_balance_missing_account_field
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 107, in get_balance
    logger.info("Fetching Oanda balances")
Message: 'Fetching Oanda balances'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:65 Oanda platform initialized (practice environment, base_url=https://api-fxpractice.oanda.com)
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:107 Fetching Oanda balances
_______ TestOandaResponseErrors.test_get_balance_malformed_balance_value _______
tests/test_platform_error_handling.py:454: in test_get_balance_malformed_balance_value
    with pytest.raises(Exception):  # Will raise ValueError on float conversion
         ^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'Exception'>
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 444, in test_get_balance_malformed_balance_value
    platform = OandaPlatform(oanda_credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 65, in __init__
    logger.info(
Message: 'Oanda platform initialized (%s environment, base_url=%s)'
Arguments: ('practice', 'https://api-fxpractice.oanda.com')
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 455, in test_get_balance_malformed_balance_value
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 107, in get_balance
    logger.info("Fetching Oanda balances")
Message: 'Fetching Oanda balances'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 124, in get_balance
    balance = float(account.get("balance", 0))
ValueError: could not convert string to float: 'invalid_number'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/usr/lib/python3.13/unittest/mock.py", line 1426, in patched
    return func(*newargs, **newkeywargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 455, in test_get_balance_malformed_balance_value
    platform.get_balance()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/oanda_platform.py", line 140, in get_balance
    logger.error("Error fetching Oanda balances: %s", e)
Message: 'Error fetching Oanda balances: %s'
Arguments: (ValueError("could not convert string to float: 'invalid_number'"),)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:65 Oanda platform initialized (practice environment, base_url=https://api-fxpractice.oanda.com)
INFO     finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:107 Fetching Oanda balances
ERROR    finance_feedback_engine.trading_platforms.oanda_platform:oanda_platform.py:140 Error fetching Oanda balances: could not convert string to float: 'invalid_number'
__ TestMockPlatformErrorSimulation.test_mock_platform_balance_with_error_rate __
tests/test_platform_error_handling.py:469: in test_mock_platform_balance_with_error_rate
    platform = MockTradingPlatform({"error_rate": 1.0})  # 100% error rate
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/trading_platforms/mock_platform.py:51: in __init__
    raise RuntimeError("Simulated platform error (error_rate >= 1.0)")
E   RuntimeError: Simulated platform error (error_rate >= 1.0)
______ TestMockPlatformErrorSimulation.test_mock_platform_zero_error_rate ______
tests/test_platform_error_handling.py:481: in test_mock_platform_zero_error_rate
    assert "USD" in result
E   AssertionError: assert 'USD' in {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_platform_error_handling.py", line 477, in test_mock_platform_zero_error_rate
    platform = MockTradingPlatform({"error_rate": 0.0})  # 0% error rate
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
___ TestMockPlatformErrorSimulation.test_mock_platform_trade_execution_error ___
tests/test_platform_error_handling.py:485: in test_mock_platform_trade_execution_error
    platform = MockTradingPlatform({"error_rate": 1.0})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/trading_platforms/mock_platform.py:51: in __init__
    raise RuntimeError("Simulated platform error (error_rate >= 1.0)")
E   RuntimeError: Simulated platform error (error_rate >= 1.0)
___________________________ test_risk_context_fields ___________________________
finance_feedback_engine/core.py:431: in analyze_asset
    asyncio.get_running_loop()
E   RuntimeError: no running event loop

During handling of the above exception, another exception occurred:
tests/test_risk_context_fields.py:44: in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:433: in analyze_asset
    return asyncio.run(
/usr/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
finance_feedback_engine/core.py:463: in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1104: in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:302: in get_market_data
    market_data = await self._get_crypto_data(
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1512: in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
finance_feedback_engine/data_providers/alpha_vantage_provider.py:1715: in _create_mock_data
    raise ValueError(error_msg)
E   ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
----------------------------- Captured stdout call -----------------------------

======================================================================
TEST: VaR/Correlation Context Fields in Decision
======================================================================

1. Initializing engine...
    Engine initialized

2. Generating decision with risk context...
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 68, in __init__
    logger.info("Checking Ollama model installation...")
Message: 'Checking Ollama model installation...'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 396, in ensure_models_installed
    if not self._check_disk_space(total_size + 5):  # +5GB buffer
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 91, in _check_disk_space
    logger.info(f"Disk space check: {free_gb:.1f}GB available")
Message: 'Disk space check: 669.9GB available'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 69, in __init__
    ensure_models_installed()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 504, in ensure_models_installed
    return installer.ensure_models_installed(force_reinstall)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/model_installer.py", line 423, in ensure_models_installed
    logger.info("All required models already installed")
Message: 'All required models already installed'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 60, in __init__
    self.rate_limiter = rate_limiter or self._create_default_rate_limiter()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1824, in _create_default_rate_limiter
    logger.info(
Message: 'Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 78, in __init__
    self.circuit_breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('AlphaVantage-API', 5, 60.0)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 88, in __init__
    self.data_provider = AlphaVantageProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 85, in __init__
    logger.info(
Message: 'Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 93, in __init__
    self.historical_data_provider = HistoricalDataProvider(api_key=api_key)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 122, in create_platform
    logger.info("Creating platform instance: %s", platform_name)
Message: 'Creating platform instance: %s'
Arguments: ('mock',)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 133, in create_platform
    instance = platform_class(credentials)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py", line 81, in __init__
    logger.info(
Message: 'MockTradingPlatform initialized with balance: %s, slippage: %.2f%%'
Arguments: ({'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, 0.1)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 193, in __init__
    self.trading_platform = PlatformFactory.create_platform(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/platform_factory.py", line 144, in create_platform
    breaker = CircuitBreaker(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/circuit_breaker.py", line 87, in __init__
    logger.info(
Message: '%s initialized: threshold=%d, timeout=%.1fs'
Arguments: ('execute_trade:mock', 3, 60)
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 140, in __init__
    logger.info(f"Local models configured: {self.local_models}")
Message: 'Local models configured: []'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 141, in __init__
    logger.info(f"Local priority: {self.local_priority}")
Message: 'Local priority: False'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 71, in __init__
    self._load_index()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 266, in _load_index
    logger.info(f"Loaded {len(self.vectors)} vectors from {self.storage_path}")
Message: 'Loaded 0 vectors from data/memory/vectors.pkl'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 160, in __init__
    self.vector_memory = VectorMemory(storage_path)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/vector_store.py", line 75, in __init__
    logger.info(
Message: 'VectorMemory initialized with empty store (expected on first run)'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 161, in __init__
    logger.info("Vector memory initialized successfully")
Message: 'Vector memory initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 208, in __init__
    self.decision_engine = DecisionEngine(config, self.data_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 167, in __init__
    logger.info(
Message: 'Decision engine initialized with provider: local'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 212, in __init__
    self.decision_store = DecisionStore(persistence_config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py", line 35, in __init__
    logger.info(f"Decision store initialized at {self.storage_path}")
Message: 'Decision store initialized at data/decisions_test'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 286, in _auto_enable_monitoring
    metrics_collector = TradeMetricsCollector()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/metrics_collector.py", line 38, in __init__
    logger.info(f"TradeMetricsCollector initialized: {self.storage_dir}")
Message: 'TradeMetricsCollector initialized: data/trade_metrics'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 289, in _auto_enable_monitoring
    self.monitoring_provider = MonitoringContextProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py", line 47, in __init__
    logger.info("MonitoringContextProvider initialized")
Message: 'MonitoringContextProvider initialized'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 296, in _auto_enable_monitoring
    self.decision_engine.set_monitoring_context(self.monitoring_provider)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py", line 1212, in set_monitoring_context
    logger.info("Monitoring context provider attached to decision engine")
Message: 'Monitoring context provider attached to decision engine'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 270, in __init__
    self._auto_enable_monitoring()
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 298, in _auto_enable_monitoring
    logger.info(
Message: 'Monitoring context auto-enabled - AI has position awareness by default'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 39, in test_risk_context_fields
    engine = FinanceFeedbackEngine(config)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 278, in __init__
    logger.info("Finance Feedback Engine initialized successfully")
Message: 'Finance Feedback Engine initialized successfully'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 44, in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 460, in analyze_asset_async
    logger.info("Analyzing asset: %s", asset_pair)
Message: 'Analyzing asset: %s'
Arguments: ('BTCUSD',)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 44, in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 295, in get_market_data
    logger.info(
Message: 'Fetching market data for %s (force_refresh=%s)'
Arguments: ('BTCUSD', False)
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 44, in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1508, in _get_crypto_data
    logger.warning(
Message: 'Unexpected response format for %s: %s'
Arguments: ('BTCUSD', {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'})
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 44, in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1714, in _create_mock_data
    logger.critical(error_msg)
Message: 'CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 431, in analyze_asset
    asyncio.get_running_loop()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
RuntimeError: no running event loop

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 302, in get_market_data
    market_data = await self._get_crypto_data(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        asset_pair, force_refresh=force_refresh
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1512, in _get_crypto_data
    return self._create_mock_data(asset_pair, "crypto")
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1715, in _create_mock_data
    raise ValueError(error_msg)
ValueError: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_risk_context_fields.py", line 44, in test_risk_context_fields
    decision = engine.analyze_asset("BTCUSD", use_memory_context=False)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 433, in analyze_asset
    return asyncio.run(
  File "/usr/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
  File "/usr/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
  File "/usr/lib/python3.13/asyncio/base_events.py", line 712, in run_until_complete
    self.run_forever()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 683, in run_forever
    self._run_once()
  File "/usr/lib/python3.13/asyncio/base_events.py", line 2050, in _run_once
    handle._run()
  File "/usr/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py", line 463, in analyze_asset_async
    market_data = await self.data_provider.get_comprehensive_market_data(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 1104, in get_comprehensive_market_data
    market_data = await self.get_market_data(asset_pair)
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py", line 329, in get_market_data
    logger.error(f"Data validation failed for {asset_pair}: {e}")
Message: 'Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.'
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.core:core.py:68 Checking Ollama model installation...
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:91 Disk space check: 669.9GB available
INFO     finance_feedback_engine.utils.model_installer:model_installer.py:423 All required models already installed
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1824 Creating default rate limiter for AlphaVantage: 0.0833 tokens/sec, max 5 tokens
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 AlphaVantage-API initialized: threshold=5, timeout=60.0s
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:85 Alpha Vantage provider initialized with timeouts: market=10s, sentiment=15s, macro=10s, caching=enabled
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
INFO     finance_feedback_engine.trading_platforms.platform_factory:platform_factory.py:122 Creating platform instance: mock
INFO     finance_feedback_engine.trading_platforms.mock_platform:mock_platform.py:81 MockTradingPlatform initialized with balance: {'FUTURES_USD': 10000.0, 'SPOT_USD': 5000.0, 'SPOT_USDC': 3000.0}, slippage: 0.10%
INFO     finance_feedback_engine.utils.circuit_breaker:circuit_breaker.py:87 execute_trade:mock initialized: threshold=3, timeout=60.0s
INFO     finance_feedback_engine.decision_engine.engine:engine.py:140 Local models configured: []
INFO     finance_feedback_engine.decision_engine.engine:engine.py:141 Local priority: False
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:266 Loaded 0 vectors from data/memory/vectors.pkl
INFO     finance_feedback_engine.memory.vector_store:vector_store.py:75 VectorMemory initialized with empty store (expected on first run)
INFO     finance_feedback_engine.decision_engine.engine:engine.py:161 Vector memory initialized successfully
INFO     finance_feedback_engine.decision_engine.engine:engine.py:167 Decision engine initialized with provider: local
INFO     finance_feedback_engine.persistence.decision_store:decision_store.py:35 Decision store initialized at data/decisions_test
INFO     finance_feedback_engine.monitoring.metrics_collector:metrics_collector.py:38 TradeMetricsCollector initialized: data/trade_metrics
INFO     finance_feedback_engine.monitoring.context_provider:context_provider.py:47 MonitoringContextProvider initialized
INFO     finance_feedback_engine.decision_engine.engine:engine.py:1212 Monitoring context provider attached to decision engine
INFO     finance_feedback_engine.core:core.py:298 Monitoring context auto-enabled - AI has position awareness by default
INFO     finance_feedback_engine.core:core.py:278 Finance Feedback Engine initialized successfully
INFO     finance_feedback_engine.core:core.py:460 Analyzing asset: BTCUSD
INFO     finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:295 Fetching market data for BTCUSD (force_refresh=False)
WARNING  finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1508 Unexpected response format for BTCUSD: {'Information': 'The **demo** API key is for demo purposes only. Please claim your free API key at (https://www.alphavantage.co/support/#api-key) to explore our full API offerings. It takes fewer than 20 seconds.'}
CRITICAL finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:1714 CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
ERROR    finance_feedback_engine.data_providers.alpha_vantage_provider:alpha_vantage_provider.py:329 Data validation failed for BTCUSD: CRITICAL SAFETY VIOLATION: Attempted to create mock data for BTCUSD in LIVE TRADING MODE. Mock data generation is ONLY allowed in backtesting/testing. This indicates a real market data fetch failure. Trading decisions cannot be made on fabricated data in live mode. Check API connectivity, rate limits, and data availability.
______ TestHistoricalDataIntegration.test_historical_data_cache_roundtrip ______
tests/test_system_integration_verification.py:101: in test_historical_data_cache_roundtrip
    provider.data_store.save_dataframe("BTCUSD", sample_df, start, end, "1h")
finance_feedback_engine/persistence/timeseries_data_store.py:128: in save_dataframe
    df.to_parquet(filepath)
.venv/lib/python3.13/site-packages/pandas/util/_decorators.py:333: in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/core/frame.py:3124: in to_parquet
    return to_parquet(
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:478: in to_parquet
    impl = get_engine(engine)
           ^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pandas/io/parquet.py:68: in get_engine
    raise ImportError(
E   ImportError: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
E   A suitable version of pyarrow or fastparquet is required for parquet support.
E   Trying to import the above resulted in these errors:
E    - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
E    - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_system_integration_verification.py", line 80, in test_historical_data_cache_roundtrip
    provider = HistoricalDataProvider(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/historical_data_provider.py", line 66, in __init__
    logger.info(
Message: ' HistoricalDataProvider initialized with validator and data store'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/timeseries_data_store.py", line 128, in save_dataframe
    df.to_parquet(filepath)
    ~~~~~~~~~~~~~^^^^^^^^^^
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pandas/util/_decorators.py", line 333, in wrapper
    return func(*args, **kwargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pandas/core/frame.py", line 3124, in to_parquet
    return to_parquet(
        self,
    ...<6 lines>...
        **kwargs,
    )
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pandas/io/parquet.py", line 478, in to_parquet
    impl = get_engine(engine)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pandas/io/parquet.py", line 68, in get_engine
    raise ImportError(
    ...<7 lines>...
    )
ImportError: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/test_system_integration_verification.py", line 101, in test_historical_data_cache_roundtrip
    provider.data_store.save_dataframe("BTCUSD", sample_df, start, end, "1h")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/timeseries_data_store.py", line 133, in save_dataframe
    logger.error(f" Failed to save DataFrame for {asset_pair}: {e}")
Message: " Failed to save DataFrame for BTCUSD: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.\nA suitable version of pyarrow or fastparquet is required for parquet support.\nTrying to import the above resulted in these errors:\n - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.\n - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet."
Arguments: ()
------------------------------ Captured log call -------------------------------
INFO     finance_feedback_engine.data_providers.historical_data_provider:historical_data_provider.py:66  HistoricalDataProvider initialized with validator and data store
ERROR    finance_feedback_engine.persistence.timeseries_data_store:timeseries_data_store.py:133  Failed to save DataFrame for BTCUSD: Unable to find a usable engine; tried using: 'pyarrow', 'fastparquet'.
A suitable version of pyarrow or fastparquet is required for parquet support.
Trying to import the above resulted in these errors:
 - Missing optional dependency 'pyarrow'. pyarrow is required for parquet support. Use pip or conda to install pyarrow.
 - Missing optional dependency 'fastparquet'. fastparquet is required for parquet support. Use pip or conda to install fastparquet.
__ TestValidateDataFreshness.test_stock_intraday_warning_threshold_5_minutes ___
tests/utils/test_data_freshness.py:76: in test_stock_intraday_warning_threshold_5_minutes
    assert "WARNING" in warning
E   AssertionError: assert 'WARNING' in ''
_ TestValidateDataFreshness.test_stock_intraday_critical_threshold_15_minutes __
tests/utils/test_data_freshness.py:89: in test_stock_intraday_critical_threshold_15_minutes
    assert is_fresh is False
E   assert True is False
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 86, in test_stock_intraday_critical_threshold_15_minutes
    is_fresh, age_str, warning = validate_data_freshness(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 410, in validate_data_freshness
    logger.warning(warning_msg)
Message: 'WARNING: Stock intraday data is 18.0 minutes old (warning: 15 minutes). Consider refreshing.'
Arguments: ()
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.utils.validation:validation.py:410 WARNING: Stock intraday data is 18.0 minutes old (warning: 15 minutes). Consider refreshing.
____ TestValidateDataFreshness.test_stock_daily_warning_threshold_24_hours _____
tests/utils/test_data_freshness.py:100: in test_stock_daily_warning_threshold_24_hours
    assert is_fresh is True  # Still usable for daily
    ^^^^^^^^^^^^^^^^^^^^^^^
E   assert False is True
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 97, in test_stock_daily_warning_threshold_24_hours
    is_fresh, age_str, warning = validate_data_freshness(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 370, in validate_data_freshness
    logger.error(warning_msg)
Message: 'CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.'
Arguments: ()
------------------------------ Captured log call -------------------------------
ERROR    finance_feedback_engine.utils.validation:validation.py:370 CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.
_______ TestValidateDataFreshness.test_stock_daily_fresh_within_24_hours _______
tests/utils/test_data_freshness.py:114: in test_stock_daily_fresh_within_24_hours
    assert warning == ""
E   AssertionError: assert 'WARNING: Sto...r refreshing.' == ''
E     
E     + WARNING: Stock daily data is 12.00 hours old (warning: 4 hours). Consider refreshing.
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 110, in test_stock_daily_fresh_within_24_hours
    is_fresh, age_str, warning = validate_data_freshness(
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 377, in validate_data_freshness
    logger.warning(warning_msg)
Message: 'WARNING: Stock daily data is 12.00 hours old (warning: 4 hours). Consider refreshing.'
Arguments: ()
------------------------------ Captured log call -------------------------------
WARNING  finance_feedback_engine.utils.validation:validation.py:377 WARNING: Stock daily data is 12.00 hours old (warning: 4 hours). Consider refreshing.
__________ TestValidateDataFreshness.test_case_insensitive_timeframe ___________
tests/utils/test_data_freshness.py:188: in test_case_insensitive_timeframe
    assert result_lower[0] == result_upper[0] == result_mixed[0] is True
E   assert False is True
----------------------------- Captured stderr call -----------------------------
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 183, in test_case_insensitive_timeframe
    result_lower = validate_data_freshness(ts, "stocks", "daily")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 370, in validate_data_freshness
    logger.error(warning_msg)
Message: 'CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 184, in test_case_insensitive_timeframe
    result_upper = validate_data_freshness(ts, "stocks", "DAILY")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 370, in validate_data_freshness
    logger.error(warning_msg)
Message: 'CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "/usr/lib/python3.13/logging/__init__.py", line 1154, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
ValueError: I/O operation on closed file.
Call stack:
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/bin/pytest", line 7, in <module>
    sys.exit(console_main())
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 221, in console_main
    code = main()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/config/__init__.py", line 197, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 365, in pytest_cmdline_main
    return wrap_session(config, _main)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 318, in wrap_session
    session.exitstatus = doit(config, session) or 0
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 372, in _main
    config.hook.pytest_runtestloop(session=session)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/main.py", line 396, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 118, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "call", log))
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 244, in call_and_report
    call = CallInfo.from_call(
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
  File "/home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/home/cmp6510/finance_feedback_engine-2.0/tests/utils/test_data_freshness.py", line 185, in test_case_insensitive_timeframe
    result_mixed = validate_data_freshness(ts, "stocks", "DaIly")
  File "/home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/validation.py", line 370, in validate_data_freshness
    logger.error(warning_msg)
Message: 'CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.'
Arguments: ()
------------------------------ Captured log call -------------------------------
ERROR    finance_feedback_engine.utils.validation:validation.py:370 CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.
ERROR    finance_feedback_engine.utils.validation:validation.py:370 CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.
ERROR    finance_feedback_engine.utils.validation:validation.py:370 CRITICAL: Stock daily data is 26.00 hours old (threshold: 24 hours, market_open=True). Data too stale.
_________ TestValidateDataFreshness.test_default_timeframe_is_intraday _________
tests/utils/test_data_freshness.py:236: in test_default_timeframe_is_intraday
    assert "intraday" in warning.lower()
E   AssertionError: assert 'intraday' in ''
E    +  where '' = <built-in method lower of str object at 0x7f1449ef3648>()
E    +    where <built-in method lower of str object at 0x7f1449ef3648> = ''.lower
=============================== warnings summary ===============================
tests/test_phase2_performance_benchmarks.py:312
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_phase2_performance_benchmarks.py:312: PytestUnknownMarkWarning: Unknown pytest.mark.slow - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.slow

test_asset_type_normalization.py::test_asset_type_normalization
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but test_asset_type_normalization.py::test_asset_type_normalization returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

test_atomic_writes.py: 10 warnings
tests/test_e2e_workflow.py: 2 warnings
tests/test_portfolio_memory_persistence.py: 14 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py:215: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    entry_timestamp = decision.get("timestamp", datetime.utcnow().isoformat())

test_atomic_writes.py::test_concurrent_writes
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but test_atomic_writes.py::test_concurrent_writes returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

test_atomic_writes.py::test_atomic_write_function
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but test_atomic_writes.py::test_atomic_write_function returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

test_ensemble_kelly_implementation.py: 1 warning
tests/test_dynamic_weights.py: 3 warnings
tests/test_ensemble_tiers.py: 12 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/ensemble_manager.py:374: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

test_rate_limiter.py::test_rate_limiter_always_active
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but test_rate_limiter.py::test_rate_limiter_always_active returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

test_stale_data_fix.py::test_validation_with_market_status
  /home/cmp6510/finance_feedback_engine-2.0/test_stale_data_fix.py:31: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

test_stale_data_fix.py: 1 warning
tests/risk/test_gatekeeper_backtest_timestamp.py: 1 warning
tests/risk/test_gatekeeper_data_freshness.py: 7 warnings
tests/risk/test_gatekeeper_market_schedule.py: 1 warning
tests/test_backtest_gatekeeper.py: 2 warnings
tests/test_cli_commands.py: 2 warnings
tests/test_core_integration.py: 3 warnings
tests/test_critical_fixes_integration.py: 7 warnings
tests/test_decision_engine_logic.py: 6 warnings
tests/test_phase2_performance_benchmarks.py: 2 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/market_schedule.py:33: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now_utc = now_utc or _dt.datetime.utcnow().replace(tzinfo=pytz.UTC)

test_stale_data_fix.py::test_multi_timeframe_data
  /home/cmp6510/finance_feedback_engine-2.0/test_stale_data_fix.py:135: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "fetch_timestamp": datetime.utcnow().isoformat() + "Z",

tests/monitoring/test_logging_config.py: 23 warnings
tests/monitoring/test_process_monitor.py: 148 warnings
tests/risk/test_gatekeeper_backtest_timestamp.py: 30 warnings
tests/risk/test_gatekeeper_data_freshness.py: 81 warnings
tests/risk/test_gatekeeper_market_schedule.py: 63 warnings
tests/test_agent.py: 36 warnings
tests/test_agent_kill_switch_scenarios.py: 78 warnings
tests/test_api.py: 309 warnings
tests/test_api_client_base.py: 12 warnings
tests/test_api_endpoints.py: 246 warnings
tests/test_asset_pair_validation.py: 81 warnings
tests/test_asset_pair_validation_enhanced.py: 42 warnings
tests/test_asset_type_validation.py: 36 warnings
tests/test_backtest_gatekeeper.py: 12 warnings
tests/test_circuit_breaker.py: 222 warnings
tests/test_cli_commands.py: 525 warnings
tests/test_positions_cli.py: 20 warnings
tests/test_pulse_integration.py: 85 warnings
tests/test_risk_context_fields.py: 139 warnings
tests/test_risk_gatekeeper_comprehensive.py: 227 warnings
tests/test_system_integration_verification.py: 37 warnings
tests/test_telegram_bot_implementation.py: 200 warnings
tests/test_timeframe_aggregator_indicators.py: 140 warnings
tests/test_trade_monitor.py: 230 warnings
tests/test_trade_tracker.py: 99 warnings
tests/test_trading_loop_agent.py: 36 warnings
tests/test_unified_data_provider.py: 140 warnings
tests/test_utils_cost_tracker.py: 25 warnings
tests/trading_platforms/test_mock_platform.py: 354 warnings
tests/trading_platforms/test_mock_platform_integration.py: 235 warnings
tests/trading_platforms/test_unified_platform_routing.py: 132 warnings
tests/utils/test_data_freshness.py: 87 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/logging_config.py:241: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).
    "timestamp": datetime.utcfromtimestamp(record.created).isoformat() + "Z",

tests/monitoring/test_process_monitor.py: 12 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/output_capture/process_monitor.py:343: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "start_time": datetime.utcnow().isoformat(),

tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_state_transition
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_nested_contexts
tests/monitoring/test_process_monitor.py::TestIntegration::test_full_workflow_monitoring
tests/monitoring/test_process_monitor.py::TestIntegration::test_full_workflow_monitoring
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/output_capture/process_monitor.py:367: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_llm_call
tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_llm_call_with_extra_context
tests/monitoring/test_process_monitor.py::TestIntegration::test_full_workflow_monitoring
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/output_capture/process_monitor.py:402: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/monitoring/test_process_monitor.py::TestAgentProcessMonitor::test_monitor_cycle_with_exception
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/output_capture/process_monitor.py:314: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/risk/test_gatekeeper_backtest_timestamp.py: 2 warnings
tests/risk/test_gatekeeper_data_freshness.py: 1 warning
tests/risk/test_gatekeeper_market_schedule.py: 9 warnings
tests/utils/test_market_schedule.py: 5 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/utils/market_schedule.py:193: DeprecationWarning: datetime.datetime.utcfromtimestamp() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.fromtimestamp(timestamp, datetime.UTC).
    now_utc = _dt.datetime.utcfromtimestamp(timestamp).replace(tzinfo=pytz.UTC)

tests/test_agent_kill_switch_scenarios.py::TestKillSwitchProtection::test_stop_loss_trigger
  /usr/lib/python3.13/json/encoder.py:254: RuntimeWarning: coroutine 'run_agent.<locals>.run_agent_tasks' was never awaited
    _iterencode = c_make_encoder(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_api_endpoints.py::TestHealthEndpoint::test_health_check_returns_200
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/api/health_checks.py:16: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    _startup_time = datetime.utcnow()

tests/test_api_endpoints.py: 11 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/api/health_checks.py:38: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    uptime_seconds = (datetime.utcnow() - _startup_time).total_seconds()

tests/test_api_endpoints.py: 11 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/api/health_checks.py:179: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_api_endpoints.py::TestLifespanManagement::test_engine_initialized_on_startup
tests/test_api_endpoints.py::TestLifespanManagement::test_app_state_cleared_on_shutdown
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/auth/auth_manager.py:453: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_time = datetime.utcnow() - timedelta(hours=hours_back)

tests/test_asset_type_validation.py: 12 warnings
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'EnsembleDecisionManager.aggregate_decisions_two_phase' was never awaited
    result = testfunction(**testargs)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_cli_commands.py::test_analyze_command_success
tests/test_cli_commands.py::test_analyze_command_network_failure
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_fresh_data_accepted
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1463: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_cli_commands.py::test_analyze_command_success
tests/test_cli_commands.py::test_analyze_command_network_failure
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_fresh_data_accepted
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1466: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_cli_commands.py::test_analyze_command_success
tests/test_cli_commands.py::test_analyze_command_network_failure
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_crypto_data_rejected
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_force_refresh_still_validates_freshness
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_fresh_data_accepted
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1490: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_cli_commands.py::test_analyze_command_success
tests/test_cli_commands.py::test_analyze_command_network_failure
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1768: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    age = datetime.utcnow() - data_time.replace(tzinfo=None)

tests/test_cli_commands.py::test_analyze_command_success
tests/test_cli_commands.py::test_analyze_command_network_failure
tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py:759: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_date = datetime.utcnow() - timedelta(days=days)

tests/test_coinbase_platform.py::test_get_portfolio_breakdown_total_value
  /usr/lib/python3.13/unittest/mock.py:687: RuntimeWarning: coroutine 'DecisionEngine.generate_decision' was never awaited
    raise AttributeError(name)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_core_integration.py: 3 warnings
tests/test_monitoring_integration.py: 2 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
tests/test_pulse_integration.py: 6 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py:68: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_creates_decision
tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_signal_only_mode
tests/test_core_integration.py::TestCoreAnalysisWorkflow::test_analyze_asset_with_ensemble
tests/test_phase2_performance_benchmarks.py::TestEndToEndPerformance::test_decision_cycle_time_improvement
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/context_provider.py:272: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_time = datetime.utcnow() - timedelta(hours=lookback_hours)

tests/test_core_integration.py: 3 warnings
tests/test_decision_engine_logic.py: 6 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/market_analysis.py:385: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py: 3 warnings
tests/test_decision_engine_logic.py: 7 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/market_analysis.py:68: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow().date()

tests/test_core_integration.py: 3 warnings
tests/test_decision_engine_logic.py: 9 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/engine.py:234: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    utc_now = datetime.utcnow().replace(tzinfo=pytz.UTC)

tests/test_core_integration.py: 3 warnings
tests/test_decision_engine_helpers.py: 2 warnings
tests/test_decision_engine_logic.py: 6 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/decision_engine/decision_validator.py:137: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py: 9 warnings
tests/test_decision_store.py: 40 warnings
tests/test_e2e_workflow.py: 19 warnings
tests/test_execute_safety.py: 2 warnings
tests/test_phase2_performance_benchmarks.py: 1 warning
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py:50: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    timestamp = decision.get("timestamp", datetime.utcnow().isoformat())

tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_save_and_load
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_core_integration.py:206: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent
tests/test_core_integration.py::TestDecisionPersistence::test_decision_store_list_recent
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_core_integration.py:237: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py::TestPlatformIntegration::test_mock_platform_execute_trade
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_core_integration.py:346: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_core_integration.py: 1 warning
tests/test_execute_safety.py: 1 warning
tests/trading_platforms/test_mock_platform.py: 19 warnings
tests/trading_platforms/test_mock_platform_integration.py: 15 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py:323: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": decision.get("timestamp", datetime.utcnow().isoformat()),

tests/test_critical_fixes_integration.py::TestAlphaVantageSessionManagement::test_session_persists_across_requests
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:46: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow()

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_crypto_data_rejected
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:137: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    stale_date = (datetime.utcnow() - timedelta(days=2)).date().isoformat()

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_crypto_data_rejected
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_force_refresh_still_validates_freshness
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1445: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_crypto_data_rejected
tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_force_refresh_still_validates_freshness
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1448: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_force_refresh_still_validates_freshness
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:171: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    stale_date = (datetime.utcnow() - timedelta(days=5)).date().isoformat()

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_fresh_data_accepted
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:204: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    fresh_date = datetime.utcnow().date().isoformat()

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_forex_data_rejected
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:238: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    stale_date = (datetime.utcnow() - timedelta(days=3)).date().isoformat()

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_forex_data_rejected
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1610: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_forex_data_rejected
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1613: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    datetime.utcnow() - data_date

tests/test_critical_fixes_integration.py::TestStaleDataRejection::test_stale_forex_data_rejected
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1659: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_data_allowed_in_backtest_mode
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_data_allowed_in_backtest_mode
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_backtest_mode_allows_flexibility
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1727: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_data_allowed_in_backtest_mode
tests/test_critical_fixes_integration.py::TestMockDataBlocking::test_mock_data_allowed_in_backtest_mode
tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_backtest_mode_allows_flexibility
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:1728: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "date": datetime.utcnow().date().isoformat(),

tests/test_critical_fixes_integration.py::TestCriticalFixesIntegration::test_complete_live_trading_safety
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_critical_fixes_integration.py:562: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    stale_date = (datetime.utcnow() - timedelta(days=2)).date().isoformat()

tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_error_handling
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_data_providers_comprehensive.py:166: RuntimeWarning: coroutine 'CircuitBreaker.call' was never awaited
    with pytest.raises(Exception):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_decision_engine_logic.py: 10 warnings
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_engine_logic.py:79: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "date": datetime.utcnow().isoformat(),

tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_store.py:264: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_store.py:278: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": (datetime.utcnow() - timedelta(days=40)).isoformat(),

tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_decision_store.py:284: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    old_timestamp = (datetime.utcnow() - timedelta(days=40)).timestamp()

tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_old_decisions
tests/test_decision_store.py::TestDecisionStoreCleanup::test_cleanup_with_no_old_decisions
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/persistence/decision_store.py:185: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cutoff_date = datetime.utcnow() - timedelta(days=days)

tests/test_e2e_workflow.py: 2 warnings
tests/test_portfolio_memory_persistence.py: 13 warnings
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py:253: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    exit_ts = exit_timestamp or datetime.utcnow().isoformat()

tests/test_execute_safety.py::test_invalid_decision_blocks_execution
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_amount
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py:204: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": decision.get("timestamp", datetime.utcnow().isoformat()),

tests/test_execute_safety.py::test_invalid_decision_blocks_execution
tests/test_execute_safety.py::test_mock_platform_executes
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/core.py:729: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    decision["execution_time"] = datetime.utcnow().isoformat()

tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_analyze_decision_outcome
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_feedback_analyzer.py:25: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_identify_patterns
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_feedback_analyzer.py:58: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    {"timestamp": datetime.utcnow().isoformat(), "price": 50000},

tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_identify_patterns
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_feedback_analyzer.py:59: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    {"timestamp": datetime.utcnow().isoformat(), "price": 51000},

tests/test_feedback_analyzer.py::TestFeedbackAnalyzer::test_identify_patterns
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_feedback_analyzer.py:60: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    {"timestamp": datetime.utcnow().isoformat(), "price": 49000},

tests/test_gemini_provider.py::test_gemini_provider
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_gemini_provider.py::test_gemini_provider returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_long_term_performance.py::test_long_term_performance
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_long_term_performance.py:22: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    base_time = datetime.utcnow() - timedelta(days=100)

tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
tests/test_long_term_performance.py::test_long_term_performance
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/memory/portfolio_memory.py:871: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "period_end": datetime.utcnow().isoformat(),

tests/test_long_term_performance.py::test_long_term_performance
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:170: PytestReturnNotNoneWarning: Test functions should return None, but tests/test_long_term_performance.py::test_long_term_performance returned <class 'tuple'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/test_phase1_robustness.py::test_circuit_breaker
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_phase1_robustness.py:78: RuntimeWarning: coroutine 'CircuitBreaker.call' was never awaited
    breaker.call(failing_function)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_phase1_robustness.py::test_circuit_breaker
  /home/cmp6510/finance_feedback_engine-2.0/.venv/lib/python3.13/site-packages/_pytest/python.py:166: RuntimeWarning: coroutine 'CircuitBreaker.call' was never awaited
    result = testfunction(**testargs)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_phase2_performance_benchmarks.py::TestDataProviderCachingPerformance::test_market_regime_caching
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/data_providers/alpha_vantage_provider.py:851: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    end_date = datetime.utcnow().date()

tests/test_telegram_bot_implementation.py::TestTelegramBot::test_init_with_valid_config
  tests/test_telegram_bot_implementation.py:40: PytestWarning: The test <Function test_init_with_valid_config> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    @patch("finance_feedback_engine.integrations.tunnel_manager.TunnelManager")

tests/test_telegram_bot_implementation.py::TestTelegramBot::test_format_decision_message
  tests/test_telegram_bot_implementation.py:59: PytestWarning: The test <Function test_format_decision_message> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    @patch("finance_feedback_engine.integrations.tunnel_manager.TunnelManager")

tests/test_telegram_bot_implementation.py::TestTelegramBot::test_create_approval_keyboard
  tests/test_telegram_bot_implementation.py:79: PytestWarning: The test <Function test_create_approval_keyboard> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    @patch("finance_feedback_engine.integrations.tunnel_manager.TunnelManager")

tests/test_telegram_bot_implementation.py::TestTelegramBot::test_sanitize_decision_id
  tests/test_telegram_bot_implementation.py:328: PytestWarning: The test <Function test_sanitize_decision_id> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    @patch("finance_feedback_engine.integrations.tunnel_manager.TunnelManager")

tests/test_telegram_bot_implementation.py::TestTelegramBotWithoutInstallation::test_init_without_telegram_library
  tests/test_telegram_bot_implementation.py:350: PytestWarning: The test <Function test_init_without_telegram_library> is marked with '@pytest.mark.asyncio' but it is not an async function. Please remove the asyncio mark. If the test is not marked explicitly, check for global marks applied via 'pytestmark'.
    @patch("finance_feedback_engine.integrations.tunnel_manager.TunnelManager")

tests/test_trade_tracker.py::TestTradeTrackerThread::test_init
tests/test_trade_tracker.py::TestTradeTrackerThread::test_start_tracking
tests/test_trade_tracker.py::TestTradeTrackerThread::test_stop_tracking
tests/test_trade_tracker.py::TestTradeTrackerThread::test_get_current_status
tests/test_trade_tracker.py::TestTradeTrackerThread::test_is_running_property
tests/test_trade_tracker.py::TestPositionTracking::test_long_position_tracking
tests/test_trade_tracker.py::TestPositionTracking::test_short_position_tracking
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/trade_tracker.py:58: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self.entry_time = datetime.utcnow()

tests/test_trade_tracker.py::TestTradeTrackerThread::test_start_tracking
tests/test_trade_tracker.py::TestTradeTrackerThread::test_stop_tracking
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/trade_tracker.py:171: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    exit_time = datetime.utcnow()

tests/test_trade_tracker.py::TestTradeTrackerThread::test_get_current_status
tests/test_trade_tracker.py::TestPositionTracking::test_long_position_tracking
tests/test_trade_tracker.py::TestPositionTracking::test_short_position_tracking
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/monitoring/trade_tracker.py:261: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    holding_time = datetime.utcnow() - self.entry_time

tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_timestamp
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_utils_financial_data_validator.py:75: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    valid_ts = datetime.utcnow().isoformat()

tests/test_utils_financial_data_validator.py::TestFinancialDataValidator::test_validate_dataframe
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_utils_financial_data_validator.py:95: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": [datetime.utcnow().isoformat()],

tests/test_utils_financial_data_validator.py::TestIntegration::test_complete_market_data_validation
  /home/cmp6510/finance_feedback_engine-2.0/tests/test_utils_financial_data_validator.py:152: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_buy_trade_execution
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:52: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_sell_trade_execution
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:79: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_sell_trade_execution
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:94: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_insufficient_balance
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:114: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_insufficient_balance
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py:237: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp", datetime.utcnow().isoformat()

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_action
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:130: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_action
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py:194: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": decision.get("timestamp", datetime.utcnow().isoformat()),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_invalid_amount
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:146: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_slippage_application
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:162: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_portfolio_with_positions
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:202: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_trade_history
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_trade_history
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_trade_history
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:228: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_reset_functionality
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:250: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_position_price_update
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:293: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_asset_pair_normalization
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_asset_pair_normalization
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_asset_pair_normalization
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:323: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_multiple_positions
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_multiple_positions
tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_multiple_positions
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:347: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_no_position_sell_fails
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:377: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_no_position_sell_fails
  /home/cmp6510/finance_feedback_engine-2.0/finance_feedback_engine/trading_platforms/mock_platform.py:316: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp", datetime.utcnow().isoformat()

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_partial_position_close
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:394: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_partial_position_close
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:408: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

tests/trading_platforms/test_mock_platform.py::TestMockTradingPlatform::test_fees_applied
  /home/cmp6510/finance_feedback_engine-2.0/tests/trading_platforms/test_mock_platform.py:431: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/integration/test_pipeline_integration.py::TestPipelineIntegration::test_end_to_end_backfill
FAILED tests/integration/test_pipeline_integration.py::TestBatchIngestionIntegration::test_ingestion_with_multiple_timeframes
FAILED tests/test_cli_commands.py::test_analyze_command_success - assert 1 == 0
FAILED tests/test_cli_commands.py::test_analyze_command_network_failure - ass...
FAILED tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_get_market_data_success
FAILED tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_circuit_breaker_opens_on_failures
FAILED tests/test_data_providers_comprehensive.py::TestAlphaVantageProvider::test_get_comprehensive_market_data
FAILED tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_initialization
FAILED tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_get_candles
FAILED tests/test_data_providers_comprehensive.py::TestCoinbaseDataProvider::test_get_portfolio
FAILED tests/test_data_providers_comprehensive.py::TestOandaDataProvider::test_get_candles
FAILED tests/test_data_providers_comprehensive.py::TestOandaDataProvider::test_get_account_summary
FAILED tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_market_data_routes_correctly
FAILED tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_crypto_data_routes_to_coinbase
FAILED tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_get_forex_data_routes_to_oanda
FAILED tests/test_data_providers_comprehensive.py::TestUnifiedDataProvider::test_fallback_on_provider_failure
FAILED tests/test_data_providers_comprehensive.py::TestHistoricalDataProvider::test_initialization
FAILED tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_normal_mode_with_valid_balance_buy
FAILED tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_normal_mode_with_valid_balance_sell
FAILED tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_hold_without_position_no_sizing
FAILED tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_hold_with_position_calculates_sizing
FAILED tests/test_decision_engine_helpers.py::TestCalculatePositionSizingParams::test_legacy_percentage_conversion
FAILED tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_positive
FAILED tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_negative
FAILED tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_price_change_zero_open
FAILED tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_volatility
FAILED tests/test_decision_engine_logic.py::TestMarketAnalysisHelpers::test_calculate_volatility_zero_close
FAILED tests/test_decision_engine_logic.py::TestEnsembleIntegration::test_ensemble_decision_mocked
FAILED tests/test_decision_engine_logic.py::TestConfiguration::test_config_nested_structure
FAILED tests/test_decision_engine_logic.py::TestConfiguration::test_config_flat_structure_backward_compatibility
FAILED tests/test_decision_engine_logic.py::TestConfiguration::test_legacy_percentage_conversion
FAILED tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_tracks_local_exception_as_failure
FAILED tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_tracks_multiple_provider_failures
FAILED tests/test_ensemble_error_propagation.py::TestEnsembleProviderFailureTracking::test_ensemble_all_providers_fail_raises_error
FAILED tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_import_error
FAILED tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_runtime_error
FAILED tests/test_ensemble_error_propagation.py::TestSingleProviderFallbackBehavior::test_single_local_provider_returns_fallback_on_generic_exception
FAILED tests/test_ensemble_error_propagation.py::TestLocalPriorityFallbackChain::test_local_priority_soft_falls_back_to_remote
FAILED tests/test_ensemble_error_propagation.py::TestLocalPriorityFallbackChain::test_local_priority_true_still_tracks_failure_properly
FAILED tests/test_ensemble_error_propagation.py::TestProviderWeightAdjustment::test_weights_adjust_when_provider_fails
FAILED tests/test_ensemble_error_propagation.py::TestEnsembleFallbackTiers::test_weighted_voting_falls_back_to_majority_on_insufficient_providers
FAILED tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_majority
FAILED tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_average
FAILED tests/test_ensemble_tiers.py::TestFallbackTiers::test_fallback_to_single_provider
FAILED tests/test_execute_safety.py::test_learning_loop_calls_ensemble_update
FAILED tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_fetch_raw_data
FAILED tests/test_historical_data_provider_implementation.py::TestHistoricalDataProvider::test_fetch_raw_data_caching
FAILED tests/test_historical_data_provider_implementation.py::TestHistoricalDataProviderIntegration::test_full_workflow_without_cache
FAILED tests/test_historical_data_provider_implementation.py::TestHistoricalDataProviderIntegration::test_full_workflow_with_cache
FAILED tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_already_running
FAILED tests/test_integrations_telegram_redis.py::TestRedisManager::test_ensure_running_docker_fallback
FAILED tests/test_integrations_telegram_redis.py::TestRedisManager::test_is_redis_running_true
FAILED tests/test_integrations_telegram_redis.py::TestTunnelManager::test_start_ngrok_tunnel
FAILED tests/test_integrations_telegram_redis.py::TestTunnelManager::test_install_ngrok_if_missing
FAILED tests/test_integrations_telegram_redis.py::TestTunnelManager::test_get_tunnel_url_returns_url
FAILED tests/test_integrations_telegram_redis.py::TestTunnelManager::test_stop_tunnel
FAILED tests/test_integrations_telegram_redis.py::TestTunnelManager::test_custom_domain_scaffold
FAILED tests/test_monitoring_integration.py::test_decision_generation_with_monitoring
FAILED tests/test_monitoring_integration.py::test_end_to_end_decision_with_monitoring
FAILED tests/test_monitoring_integration.py::test_monitoring_provider_persistence
FAILED tests/test_platform_error_handling.py::TestCoinbaseProductIdFormatting::test_format_product_id_whitespace_only
FAILED tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_import_error
FAILED tests/test_platform_error_handling.py::TestCoinbasePortfolioBreakdown::test_get_portfolio_breakdown_futures_error_continues_with_spot
FAILED tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_client_initialization_import_error
FAILED tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_get_balance_connection_error
FAILED tests/test_platform_error_handling.py::TestOandaConnectionErrors::test_get_balance_timeout
FAILED tests/test_platform_error_handling.py::TestOandaResponseErrors::test_get_balance_missing_account_field
FAILED tests/test_platform_error_handling.py::TestOandaResponseErrors::test_get_balance_malformed_balance_value
FAILED tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_balance_with_error_rate
FAILED tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_zero_error_rate
FAILED tests/test_platform_error_handling.py::TestMockPlatformErrorSimulation::test_mock_platform_trade_execution_error
FAILED tests/test_risk_context_fields.py::test_risk_context_fields - ValueErr...
FAILED tests/test_system_integration_verification.py::TestHistoricalDataIntegration::test_historical_data_cache_roundtrip
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_intraday_warning_threshold_5_minutes
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_intraday_critical_threshold_15_minutes
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_daily_warning_threshold_24_hours
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_stock_daily_fresh_within_24_hours
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_case_insensitive_timeframe
FAILED tests/utils/test_data_freshness.py::TestValidateDataFreshness::test_default_timeframe_is_intraday
ERROR tests/test_trading_loop_agent.py::test_agent_initial_state - ValueError...
ERROR tests/test_trading_loop_agent.py::test_agent_process_cycle_no_action - ...
ERROR tests/test_trading_loop_agent.py::test_agent_stop_method - ValueError: ...
= 79 failed, 870 passed, 98 skipped, 4614 warnings, 3 errors in 141.19s (0:02:21) =
